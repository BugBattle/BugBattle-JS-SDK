/*!
 * 
 *   bugbattle v3.1.9
 *   https://github.com/BugBattle/JavaScript-SDK
 * 
 *   Copyright (c) BugBattle 
 * 
 *   This source code is licensed under the Commercial license found in the
 *   LICENSE file in the root directory of this source tree.
 *   
 */
!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define("BugBattle",[],t):"object"===typeof exports?exports.BugBattle=t():e.BugBattle=t()}(window,(function(){return function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(e,t,n){var r,o,a;!function(i){"use strict";"object"===typeof e.exports?e.exports=i():null!=n(1)?(o=[],void 0===(a="function"===typeof(r=i)?r.apply(t,o):r)||(e.exports=a)):self.sanctuaryTypeIdentifiers=i()}((function(){"use strict";var e=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");function type(e){return null!=e&&null!=e.constructor&&e.constructor.prototype!==e&&"string"===typeof e["@@type"]?e["@@type"]:Object.prototype.toString.call(e).slice("[object ".length,-"]".length)}return type.parse=function(t){var n=null,r=t,o=0,a=e.exec(t);return null!=a&&(n=a[1],r=a[2],null!=a[3]&&(o=Number(a[3]))),{namespace:n,name:r,version:o}},type}))},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r,o,a;!function(i){"use strict";"object"===typeof e.exports?e.exports=i():null!=n(1)?(o=[],void 0===(a="function"===typeof(r=i)?r.apply(t,o):r)||(e.exports=a)):self.sanctuaryShow=i()}((function(){"use strict";var e=[];function entry(e){return function(t){return show(t)+": "+show(e[t])}}function sortedKeys(e){return Object.keys(e).sort()}function show(t){if(e.indexOf(t)>=0)return"<Circular>";switch(Object.prototype.toString.call(t)){case"[object Boolean]":return"object"===typeof t?"new Boolean ("+show(t.valueOf())+")":t.toString();case"[object Number]":return"object"===typeof t?"new Number ("+show(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return"object"===typeof t?"new String ("+show(t.valueOf())+")":JSON.stringify(t);case"[object Date]":return"new Date ("+show(isNaN(t.valueOf())?NaN:t.toISOString())+")";case"[object Error]":return"new "+t.name+" ("+show(t.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(t,show).join(", ")+")";case"[object Array]":e.push(t);try{return"["+t.map(show).concat(sortedKeys(t).filter((function(e){return!/^\d+$/.test(e)})).map(entry(t))).join(", ")+"]"}finally{e.pop()}case"[object Object]":e.push(t);try{return!("@@show"in t)||null!=t.constructor&&t.constructor.prototype===t?"{"+sortedKeys(t).map(entry(t)).join(", ")+"}":t["@@show"]()}finally{e.pop()}case"[object Set]":e.push(t);try{return"new Set ("+show(Array.from(t.values()))+")"}finally{e.pop()}case"[object Map]":e.push(t);try{return"new Map ("+show(Array.from(t.entries()))+")"}finally{e.pop()}default:return String(t)}}return show}))},function(e,t,n){e.exports=n(5)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(4);var r=n(0),o=n.n(r),a="fantasy-land/alt",i="fantasy-land/ap",u="fantasy-land/bimap",c="fantasy-land/chain",l="fantasy-land/chainRec",s="fantasy-land/map",f="fantasy-land/of",p="fantasy-land/zero",d=["first","second","third","fourth","fifth"],h="fluture/Future@5";function List(e,t){this.head=e,this.tail=t}List.prototype.toJSON=function(){return toArray(this)};var v=new List(null,null);function isNil(e){return e.tail===e}function cons(e,t){return new List(e,t)}function reverse(e){for(var t=v,n=e;!isNil(n);)t=cons(n.head,t),n=n.tail;return t}function toArray(e){for(var t=e,n=[];!isNil(t);)n.push(t.head),t=t.tail;return n}v.tail=v;var y=Error.captureStackTrace||function(e){var t=new Error;"string"===typeof t.stack?e.stack=e.name+"\n"+t.stack.split("\n").slice(1).join("\n"):e.stack=e.name},g=debugHandleNone;function debugHandleNone(e){return e}function debug(e,t,n,r,o){return g(e,t,n,r,o)}function captureContext(e,t,n){return debug(e,debugCaptureContext,e,t,n)}function debugCaptureContext(e,t,n){var r={tag:t,name:" from "+t+":"};return y(r,n),cons(r,e)}function debugCaptureApplicationContext(e,t,n){return debugCaptureContext(e,d[t-1]+" application of "+n.name,n)}var m=n(2),b=n.n(m),w="undefined"===typeof w?function(e,t){return setTimeout(e,0,t)}:w;function noop(){}function call(e,t){return e(t)}function raise(e){w((function(){throw e}))}function showArg(e){return b()(e)+" :: "+o.a.parse(o()(e)).name}function error_error(e){return new Error(e)}function typeError(e){return new TypeError(e)}function invalidArgument(e,t,n,r){return typeError(e+"() expects its "+d[t]+" argument to "+n+".\n  Actual: "+showArg(r))}function invalidArgumentOf(e){return function(t,n,r){return invalidArgument(t,n,e,r)}}function invalidFuture(e,t,n){var r,a=o.a.parse(o()(t));return typeError(e+" to be a valid Future."+("Future"===a.name?"\n"+("fluture"!==a.namespace?"The Future was not created by fluture. Make sure you transform other Futures to fluture Futures. Got "+((r=a.namespace)?"a Future from "+r:"an unscoped Future")+".\n  See: https://github.com/fluture-js/Fluture#casting-futures":5!==a.version?function(e,t){return"The Future was created by "+(t<5?"an older":"a newer")+" version of fluture. This means that one of the sources which creates Futures is outdated. Update this source, or transform its created Futures to be compatible.\n  See: https://github.com/fluture-js/Fluture#casting-futures"}(0,a.version):"Nothing seems wrong. Contact the Fluture maintainers."):"")+"\n  Actual: "+b()(t)+" :: "+a.name+(n||""))}function invalidFutureArgument(e,t,n,r){return invalidFuture(e+"() expects its "+d[t]+" argument",n,r)}function assignUnenumerable(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function wrapException(e,t){var n=function(e,t){var n;try{if(e instanceof Error)return e;n="A Non-Error was thrown from a Future: "+b()(e)}catch(o){n="Something was thrown from a Future, but it could not be converted to String"}var r=error_error(n);return y(r,t),r}(e,wrapException),r=function(e,t){for(var n=t,r=reverse(e);!isNil(r);)n=cons(r.head,n),r=r.tail;return n}(n.context||v,t.context),o=error_error(n.message);return assignUnenumerable(o,"future",n.future||t),assignUnenumerable(o,"reason",n.reason||n),assignUnenumerable(o,"stack",o.reason.stack),withExtraContext(o,r)}function withExtraContext(e,t){return assignUnenumerable(e,"context",t),assignUnenumerable(e,"stack",e.stack+function(e){var t="",n=e;for(;n!==v;)t=t+"\n"+n.head.stack,n=n.tail;return t}(t)),e}function isFunction(e){return"function"===typeof e}function isObject(e){return null!==e&&"object"===typeof e}function hasMethod(e,t){return null!=t&&isFunction(t[e])}function isFunctor(e){return hasMethod(s,e)}function isApply(e){return isFunctor(e)&&hasMethod(i,e)}function Next(e){return{done:!1,value:e}}function Done(e){return{done:!0,value:e}}function getArgs(e){for(var t=new Array(e.arity),n=1;n<=e.arity;n++)t[n-1]=e["$"+String(n)];return t}function future_showArg(e){return" ("+b()(e)+")"}var _={pred:function(){return!0},error:invalidArgumentOf("be anything")},x={pred:isFunction,error:invalidArgumentOf("be a Function")},k={pred:isFuture,error:invalidFutureArgument},C={pred:function(e){return e===1/0||"number"===typeof e&&e>0&&e%1===0},error:invalidArgumentOf("be a positive Integer")};function application(e,t,n,r,o){if(r.length<2&&n.pred(r[0]))return function(e,t,n){return debug(e,debugCaptureApplicationContext,e,t,n)}(o,e,t);var a=r.length>1?function(e,t){return new TypeError(e.name+"() expects to be called with a single argument per invocation\n  Saw: "+t.length+" arguments"+Array.prototype.slice.call(t).map((function(e,t){return"\n  "+(d[t]?d[t].charAt(0).toUpperCase()+d[t].slice(1):"Argument "+String(t+1))+": "+showArg(e)})).join(""))}(t,r):n.error(t.name,e-1,r[0]);throw y(a,t),withExtraContext(a,o)}function application1(e,t,n){return application(1,e,t,n,v)}function Future(e){var t=application1(Future,x,arguments);return new L(t,e)}function isFuture(e){return e instanceof Future||o()(e)===h}function createInterpreter(e,t,n){var Interpreter=function(e,t,n,r){this.context=e,this.$1=t,this.$2=n,this.$3=r};return(Interpreter.prototype=Object.create(Future.prototype)).arity=e,Interpreter.prototype.name=t,Interpreter.prototype._interpret=n,Interpreter}Future["@@type"]=h,Future.constructor={prototype:Future},Future[f]=future_resolve,Future[l]=function(e,t){return future_resolve(Next(t))._transform(new M(v,(function chainRec$recur(t){return t.done?future_resolve(t.value):e(Next,Done,t.value)._transform(new M(v,chainRec$recur))})))},Future.prototype["@@type"]=h,Future.prototype["@@show"]=function(){return this.toString()},Future.prototype.pipe=function(e){if(!isFunction(e))throw invalidArgument("Future#pipe",0,"be a Function",e);return e(this)},Future.prototype[i]=function Future$FL$ap(e){var t=captureContext(v,"a Fantasy Land dispatch to ap",Future$FL$ap);return e._transform(new j(t,this))},Future.prototype[s]=function Future$FL$map(e){var t=captureContext(v,"a Fantasy Land dispatch to map",Future$FL$map);return this._transform(new O(t,e))},Future.prototype[u]=function Future$FL$bimap(e,t){var n=captureContext(v,"a Fantasy Land dispatch to bimap",Future$FL$bimap);return this._transform(new q(n,e,t))},Future.prototype[c]=function Future$FL$chain(e){var t=captureContext(v,"a Fantasy Land dispatch to chain",Future$FL$chain);return this._transform(new M(t,e))},Future.prototype[a]=function Future$FL$alt(e){var t=captureContext(v,"a Fantasy Land dispatch to alt",Future$FL$alt);return this._transform(new R(t,e))},Future.prototype.extractLeft=function(){return[]},Future.prototype.extractRight=function(){return[]},Future.prototype._transform=function(e){return new P(e.context,this,cons(e,v))},Future.prototype.isTransformer=!1,Future.prototype.context=v,Future.prototype.arity=0,Future.prototype.name="future",Future.prototype.toString=function(){return this.name+getArgs(this).map(future_showArg).join("")},Future.prototype.toJSON=function(){return{$:h,kind:"interpreter",type:this.name,args:getArgs(this)}};var L=createInterpreter(1,"Future",(function(e,t,n){var r=this.$1,o=!1,a=noop,cont=function(){o=!0};try{a=r((function(e){cont=function(){o=!1,t(e)},o&&cont()}),(function(e){cont=function(){o=!1,n(e)},o&&cont()}))}catch(i){return e(wrapException(i,this)),noop}return isFunction(a)&&0===a.length?(cont(),function(){o&&(o=!1,a&&a())}):(e(wrapException(typeError("The computation was expected to return a nullary cancellation function\n  Actual: "+b()(a)),this)),noop)})),S=createInterpreter(0,"never",(function(){return noop}));S.prototype._isNever=!0;var F=new S(v);var E=createInterpreter(1,"crash",(function(e){return e(this.$1),noop}));function future_crash(e){return new E(application1(future_crash,_,arguments),e)}var $=createInterpreter(1,"reject",(function(e,t){return t(this.$1),noop}));function future_reject(e){return new $(application1(future_reject,_,arguments),e)}$.prototype.extractLeft=function(){return[this.$1]};var T=createInterpreter(1,"resolve",(function(e,t,n){return n(this.$1),noop}));function future_resolve(e){return new T(application1(future_resolve,_,arguments),e)}T.prototype.extractRight=function(){return[this.$1]};var P=createInterpreter(2,"transform",(function(e,t,n){var r,o,a,i,u=v,c=v,l=noop,s=!0;function nextHot(){var e=c.head;return c=c.tail,e}function nextCold(){var e=u.head;return u=u.tail,e}function settle(e){if(a=!0,(r=e).isTransformer){for(var i=r.$2;!isNil(i);)u=cons(i.head,u),i=i.tail;r=r.$1}s&&function(){s=!1;for(;;){if(a=!1,o=nextCold())l=r._interpret(exception,rejected,resolved),a||warmupActions();else{if(!(o=nextHot()))break;l=r._interpret(exception,rejected,resolved)}if(!a)return void(s=!0)}l=r._interpret(exception,t,n)}()}function rejected(e){settle(o.rejected(e))}function resolved(e){settle(o.resolved(e))}function early(e,t){if(l(),u=v,s&&o!==t)for(o.cancel();(i=nextHot())&&i!==t;)i.cancel();settle(e)}function Sequence$cancel(){for(l(),o&&o.cancel();i=nextHot();)i.cancel()}function exception(t){Sequence$cancel(),a=!0,u=c=v;var n=wrapException(t,r);r=F,e(n)}function warmupActions(){for(u=reverse(u);u!==v;){if(i=u.head.run(early),a)return;c=cons(i,c),u=u.tail}o=o.run(early)}return settle(this),Sequence$cancel}));P.prototype.isTransformer=!0,P.prototype._transform=function(e){return new P(e.context,this.$1,cons(e,this.$2))},P.prototype.toString=function(){return toArray(reverse(this.$2)).reduce((function(e,t){return t.name+getArgs(t).map(future_showArg).join("")+" ("+e+")"}),this.$1.toString())};var A={rejected:function(e){return this.cancel(),new $(this.context,e)},resolved:function(e){return this.cancel(),new T(this.context,e)},run:function(){return this},cancel:noop,context:v,arity:0,name:"transform",toJSON:function(){return{$:h,kind:"transformation",type:this.name,args:getArgs(this)}}};function wrapHandler(e){return function(t){var n;try{n=e.call(this,t)}catch(r){return new E(this.context,r)}return isFuture(n)?n:new E(this.context,invalidFuture(this.name+" expects the return value from the function it's given",n,"\n  When called with: "+b()(t)))}}function createTransformation(e,t,n){var Transformation=function(e,t,n){this.context=e,this.$1=t,this.$2=n};return(Transformation.prototype=Object.create(A)).arity=e,Transformation.prototype.name=t,"function"===typeof n.rejected&&(Transformation.prototype.rejected=wrapHandler(n.rejected)),"function"===typeof n.resolved&&(Transformation.prototype.resolved=wrapHandler(n.resolved)),"function"===typeof n.run&&(Transformation.prototype.run=n.run),Transformation}var j=createTransformation(1,"ap",{resolved:function(e){if(isFunction(e))return this.$1._transform(new O(this.context,e));throw typeError("ap expects the second Future to resolve to a Function\n  Actual: "+b()(e))}}),R=createTransformation(1,"alt",{rejected:function(){return this.$1}}),O=createTransformation(1,"map",{resolved:function(e){return new T(this.context,call(this.$1,e))}}),q=createTransformation(2,"bimap",{rejected:function(e){return new $(this.context,call(this.$1,e))},resolved:function(e){return new T(this.context,call(this.$2,e))}}),M=createTransformation(1,"chain",{resolved:function(e){return call(this.$1,e)}}),H=createInterpreter(2,"after",(function(e,t,n){var r=setTimeout(n,this.$1,this.$2);return function(){clearTimeout(r)}}));H.prototype.extractRight=function(){return[this.$2]};var B={pred:function(e){return isFunctor(e)&&hasMethod(a,e)},error:invalidArgumentOf("have Alt implemented")};function alt_alt(e){if(isFuture(e)){var t=application1(alt_alt,k,arguments);return function alt(n){var r=application(2,alt,k,arguments,t);return n._transform(new R(r,e))}}var n=application1(alt_alt,B,arguments);return function alt(t){return application(2,alt,B,arguments,n),e[a](t)}}var I=createTransformation(1,"and",{resolved:function(){return this.$1}});var N={pred:isApply,error:invalidArgumentOf("have Apply implemented")};function ap_ap(e){if(isFuture(e)){var t=application1(ap_ap,k,arguments);return function ap(n){var r=application(2,ap,k,arguments,t);return n._transform(new j(r,e))}}var n=application1(ap_ap,N,arguments);return function ap(t){return application(2,ap,N,arguments,n),e[i](t)}}var W=createInterpreter(2,"encaseP",(function(e,t,n){var r,o,a=!0,i=this.$1,u=this.$2;try{r=i(u)}catch(c){return e(wrapException(c,this)),noop}return(o=r)instanceof Promise||null!=o&&isFunction(o.then)?(r.then((function(e){a&&(a=!1,n(e))}),(function(e){a&&(a=!1,t(e))})),function(){a=!1}):(e(wrapException(function(e,t,n){return typeError("encaseP() expects the function it's given to return a Promise/Thenable\n  Actual: "+b()(e)+"\n  From calling: "+b()(t)+"\n  With: "+b()(n))}(r,i,u),this)),noop)}));function encase_p_encaseP(e){var t=application1(encase_p_encaseP,x,arguments);return function encaseP(n){var r=application(2,encaseP,_,arguments,t);return new W(r,e,n)}}function attemptP(e){return encase_p_encaseP.apply(this,arguments)(void 0)}var U=createInterpreter(2,"encase",(function(e,t,n){var r,o=this.$1;try{r=o(this.$2)}catch(a){return t(a),noop}return n(r),noop}));function encase_encase(e){var t=application1(encase_encase,x,arguments);return function encase(n){var r=application(2,encase,_,arguments,t);return new U(r,e,n)}}function attempt(e){return encase_encase.apply(this,arguments)(void 0)}var D={pred:function(e){return isFunctor(e)&&hasMethod(u,e)},error:invalidArgumentOf("have Bifunctor implemented")};function bimap_bimap(e){var t=application1(bimap_bimap,x,arguments);return function bimap(n){var r=application(2,bimap,x,arguments,t);return function bimap(t){var o=application(3,bimap,D,arguments,r);return isFuture(t)?t._transform(new q(o,e,n)):t[u](e,n)}}}createTransformation(2,"bichain",{rejected:function(e){return call(this.$1,e)},resolved:function(e){return call(this.$2,e)}});function Eager(e){var t=this;t.rec=noop,t.rej=noop,t.res=noop,t.crashed=!1,t.rejected=!1,t.resolved=!1,t.value=null,t.cancel=e._interpret((function(e){t.value=e,t.crashed=!0,t.cancel=noop,t.rec(e)}),(function(e){t.value=e,t.rejected=!0,t.cancel=noop,t.rej(e)}),(function(e){t.value=e,t.resolved=!0,t.cancel=noop,t.res(e)}))}function earlyCrash(e,t){e(future_crash(t))}function earlyReject(e,t){e(future_reject(t))}function createParallelTransformation(e,t,n,r,o){var a=createTransformation(1,e,Object.assign({run:function(e){var o=new Eager(this.$1),i=new a(this.context,o);function Parallel$early(t){e(t,i)}return i.cancel=o._interpret((function(e){t(Parallel$early,e)}),(function(e){n(Parallel$early,e)}),(function(e){r(Parallel$early,e)})),i}},o));return a}Eager.prototype=Object.create(Future.prototype),Eager.prototype._interpret=function(e,t,n){return this.crashed?e(this.value):this.rejected?t(this.value):this.resolved?n(this.value):(this.rec=e,this.rej=t,this.res=n),this.cancel};var z=createTransformation(1,"pair",{resolved:function(e){return new T(this.context,[e,this.$1])}}),V=createParallelTransformation("both",earlyCrash,earlyReject,noop,{resolved:function(e){return this.$1._transform(new z(this.context,e))}});function both_both(e){var t=application1(both_both,k,arguments);return function both(n){var r=application(2,both,k,arguments,t);return n._transform(new V(r,e))}}function Queued(e,t,n){this[2]=e,this[3]=t,this[4]=n}var Z=createInterpreter(1,"cache",(function(e,t,n){var r=noop;switch(this._state){case 1:r=this._addToQueue(e,t,n);break;case 2:e(this._value);break;case 3:t(this._value);break;case 4:n(this._value);break;default:this._queue=[],r=this._addToQueue(e,t,n),this.run()}return r}));Z.prototype._cancel=noop,Z.prototype._queue=null,Z.prototype._queued=0,Z.prototype._value=void 0,Z.prototype._state=0,Z.prototype.extractLeft=function(){return 3===this._state?[this._value]:[]},Z.prototype.extractRight=function(){return 4===this._state?[this._value]:[]},Z.prototype._addToQueue=function(e,t,n){var r=this;if(r._state>1)return noop;var o=r._queue.push(new Queued(e,t,n))-1;return r._queued=r._queued+1,function(){r._state>1||(r._queue[o]=void 0,r._queued=r._queued-1,0===r._queued&&r.reset())}},Z.prototype._drainQueue=function(){if(!(this._state<=1)&&0!==this._queued){for(var e=this._queue,t=e.length,n=this._state,r=this._value,o=0;o<t;o++)e[o]&&e[o][n](r),e[o]=void 0;this._queue=void 0,this._queued=0}},Z.prototype.crash=function(e){this._state>1||(this._value=e,this._state=2,this._drainQueue())},Z.prototype.reject=function(e){this._state>1||(this._value=e,this._state=3,this._drainQueue())},Z.prototype.resolve=function(e){this._state>1||(this._value=e,this._state=4,this._drainQueue())},Z.prototype.run=function(){var e=this;e._state>0||(e._state=1,e._cancel=e.$1._interpret((function(t){e.crash(t)}),(function(t){e.reject(t)}),(function(t){e.resolve(t)})))},Z.prototype.reset=function(){0!==this._state&&(1===this._state&&this._cancel(),this._cancel=noop,this._queue=[],this._queued=0,this._value=void 0,this._state=0)};createTransformation(1,"chainRej",{rejected:function(e){return call(this.$1,e)}});var X={pred:function(e){return isApply(e)&&hasMethod(c,e)},error:invalidArgumentOf("have Chain implemented")};function chain_chain(e){var t=application1(chain_chain,x,arguments);return function chain(n){var r=application(2,chain,X,arguments,t);return isFuture(n)?n._transform(new M(r,e)):n[c](e)}}var K=createTransformation(2,"coalesce",{rejected:function(e){return new T(this.context,call(this.$1,e))},resolved:function(e){return new T(this.context,call(this.$2,e))}});function coalesce_coalesce(e){var t=application1(coalesce_coalesce,x,arguments);return function coalesce(n){var r=application(2,coalesce,x,arguments,t);return function coalesce(t){var o=application(3,coalesce,k,arguments,r);return t._transform(new K(o,e,n))}}}function fork_fork(e){var t=application1(fork_fork,x,arguments);return function fork(n){var r=application(2,fork,x,arguments,t);return function fork(t){return application(3,fork,k,arguments,r),t._interpret(raise,e,n)}}}function invalidState(e){return invalidFuture("go() expects the value produced by the iterator",e,"\n  Tip: If you're using a generator, make sure you always yield a Future")}createInterpreter(1,"go",(function(e,t,n){var r,o,a,i,u=this,c=0,l=noop;function crash(t){e(wrapException(t,u))}try{a=u.$1()}catch(s){return crash(s),noop}if(!isObject(i=a)||!isFunction(i.next))return crash(invalidArgument("go",0,'return an iterator, maybe you forgot the "*"',a)),noop;function resolved(e){if(o=e,2===c)return drain();c=1}function drain(){for(;;){try{r=a.next(o)}catch(s){return crash(s)}if(!isObject(i=r)||"boolean"!==typeof i.done)return crash((e=r,typeError("The iterator did not return a valid iteration from iterator.next()\n  Actual: "+b()(e))));if(r.done)break;if(!isFuture(r.value))return crash(invalidState(r.value));if(c=0,l=r.value._interpret(crash,t,resolved),0===c)return c=2}var e,i;n(r.value)}return drain(),function(){l()}}));createInterpreter(3,"hook",(function(e,t,n){var r,o,a,i=this,u=this.$1,c=this.$2,l=this.$3,s=noop,f=noop;function Hook$done(){f(a)}function Hook$rec(t){e(wrapException(t,i))}function Hook$dispose(){var e,t,n;try{e=c(o)}catch(a){return Hook$rec(a)}if(!isFuture(e))return Hook$rec((t=c,n=o,invalidFuture("hook() expects the return value from the first function it's given",e,"\n  From calling: "+b()(t)+"\n  With: "+b()(n))));r=Hook$cancelDisposal,e._interpret(Hook$rec,Hook$disposalRejected,Hook$done)}function Hook$cancelConsumption(){s(),Hook$dispose(),Hook$cancelDisposal()}function Hook$cancelDisposal(){f=noop}function Hook$disposalRejected(e){Hook$rec(new Error("The disposal Future rejected with "+b()(e)))}function Hook$consumptionException(e){f=Hook$rec,a=e,Hook$dispose()}function Hook$consumptionRejected(e){f=t,a=e,Hook$dispose()}function Hook$consumptionResolved(e){f=n,a=e,Hook$dispose()}var p=u._interpret(Hook$rec,t,(function(e){var t;o=e;try{t=l(o)}catch(n){return Hook$consumptionException(n)}if(!isFuture(t))return Hook$consumptionException(function(e,t,n){return invalidFuture("hook() expects the return value from the second function it's given",e,"\n  From calling: "+b()(t)+"\n  With: "+b()(n))}(t,l,o));r=Hook$cancelConsumption,s=t._interpret(Hook$consumptionException,Hook$consumptionRejected,Hook$consumptionResolved)}));return r=r||p,function(){e=raise,r()}}));createTransformation(1,"lastly",{rejected:function(e){return this.$1._transform(new I(this.context,new $(this.context,e)))},resolved:function(e){return this.$1._transform(new I(this.context,new T(this.context,e)))}});var G=createTransformation(1,"mapRej",{rejected:function(e){return new $(this.context,call(this.$1,e))}});function map_rej_mapRej(e){var t=application1(map_rej_mapRej,x,arguments);return function mapRej(n){var r=application(2,mapRej,k,arguments,t);return n._transform(new G(r,e))}}var Q={pred:isFunctor,error:invalidArgumentOf("have Functor implemented")};function map_map(e){var t=application1(map_map,x,arguments);return function map(n){var r=application(2,map,Q,arguments,t);return isFuture(n)?n._transform(new O(r,e)):n[s](e)}}createInterpreter(1,"node",(function(e,t,n){var r=!1,cont=function(){r=!0};try{call(this.$1,(function(e,o){cont=e?function(){r=!1,t(e)}:function(){r=!1,n(o)},r&&cont()}))}catch(o){return e(wrapException(o,this)),r=!1,noop}return cont(),function(){r=!1}}));var J=createParallelTransformation("pap",earlyCrash,earlyReject,noop,{resolved:function(e){if(isFunction(e))return this.$1._transform(new O(this.context,e));throw typeError("pap expects the second Future to resolve to a Function\n  Actual: "+b()(e))}});var Y={pred:function(e){if(t=e,!Array.isArray(t))return!1;for(var t,n=0;n<e.length;n++)if(!isFuture(e[n]))return!1;return!0},error:invalidArgumentOf("be an Array of valid Futures")},ee=createInterpreter(2,"parallel",(function(e,t,n){var r=this,o=this.$2,a=o.length,i=Math.min(this.$1,a),u=new Array(a),c=new Array(a),l=0,s=0,f=!1,p=noop;function Parallel$cancel(){e=noop,t=noop,n=noop,l=a;for(var r=0;r<a;r++)u[r]&&u[r]()}function Parallel$run(i){s++,u[i]=o[i]._interpret((function(t){p=e,u[i]=noop,Parallel$cancel(),p(wrapException(t,r))}),(function(e){p=t,u[i]=noop,Parallel$cancel(),p(e)}),(function(e){u[i]=noop,c[i]=e,s--,l===a&&0===s?n(c):f&&Parallel$drain()}))}function Parallel$drain(){for(f=!1;l<a&&s<i;)Parallel$run(l++);f=!0}return Parallel$drain(),Parallel$cancel})),te=future_resolve([]);var ne=createParallelTransformation("race",earlyCrash,earlyReject,(function(e,t){e(future_resolve(t))}),{});function race_race(e){var t=application1(race_race,k,arguments);return function race(n){var r=application(2,race,k,arguments,t);return n._transform(new ne(r,e))}}function ConcurrentFuture(e){this.sequential=e}function Par(e){if(!isFuture(e))throw invalidFutureArgument(Par.name,0,e);return new ConcurrentFuture(e)}ConcurrentFuture.prototype=Object.create(Par.prototype);var re="fluture/ConcurrentFuture@5",oe=new ConcurrentFuture(F);Par["@@type"]=re,Par.constructor={prototype:Par},Par[f]=function(e){return new ConcurrentFuture(future_resolve(e))},Par[p]=function(){return oe},Par.prototype["@@type"]=re,Par.prototype["@@show"]=function(){return this.toString()},Par.prototype.toString=function(){return"Par ("+this.sequential.toString()+")"},Par.prototype[s]=function Par$FL$map(e){var t=captureContext(v,"a Fantasy Land dispatch to map via ConcurrentFuture",Par$FL$map);return new ConcurrentFuture(this.sequential._transform(new O(t,e)))},Par.prototype[i]=function Par$FL$ap(e){var t=captureContext(v,"a Fantasy Land dispatch to ap via ConcurrentFuture",Par$FL$ap);return new ConcurrentFuture(e.sequential._transform(new J(t,this.sequential)))},Par.prototype[a]=function Par$FL$alt(e){var t=captureContext(v,"a Fantasy Land dispatch to alt via ConcurrentFuture",Par$FL$alt);return new ConcurrentFuture(e.sequential._transform(new ne(t,this.sequential)))};var ae=createInterpreter(2,"rejectAfter",(function(e,t){var n=setTimeout(t,this.$1,this.$2);return function(){clearTimeout(n)}}));ae.prototype.extractLeft=function(){return[this.$2]};invalidArgumentOf("be a ConcurrentFuture");createTransformation(0,"swap",{resolved:function(e){return new $(this.context,e)},rejected:function(e){return new T(this.context,e)}});function identity(e){return e}function flow(e,t,n,r,o,a,i,u,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return o(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(o(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return i(a(o(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return u(i(a(o(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(u(i(a(o(r(n(t(e.apply(this,arguments)))))))))}}}function pipe(e,t,n,r,o,a,i,u,c,l,s,f,p,d,h,v,y,g,m,b){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return o(r(n(t(e))));case 6:return a(o(r(n(t(e)))));case 7:return i(a(o(r(n(t(e))))));case 8:return u(i(a(o(r(n(t(e)))))));case 9:return c(u(i(a(o(r(n(t(e))))))));case 10:return l(c(u(i(a(o(r(n(t(e)))))))));case 11:return s(l(c(u(i(a(o(r(n(t(e))))))))));case 12:return f(s(l(c(u(i(a(o(r(n(t(e)))))))))));case 13:return p(f(s(l(c(u(i(a(o(r(n(t(e))))))))))));case 14:return d(p(f(s(l(c(u(i(a(o(r(n(t(e)))))))))))));case 15:return h(d(p(f(s(l(c(u(i(a(o(r(n(t(e))))))))))))));case 16:return v(h(d(p(f(s(l(c(u(i(a(o(r(n(t(e)))))))))))))));case 17:return y(v(h(d(p(f(s(l(c(u(i(a(o(r(n(t(e))))))))))))))));case 18:return g(y(v(h(d(p(f(s(l(c(u(i(a(o(r(n(t(e)))))))))))))))));case 19:return m(g(y(v(h(d(p(f(s(l(c(u(i(a(o(r(n(t(e))))))))))))))))));case 20:return b(m(g(y(v(h(d(p(f(s(l(c(u(i(a(o(r(n(t(e)))))))))))))))))))}}var isLeft=function(e){return"Left"===e._tag},Either_left=function(e){return{_tag:"Left",left:e}},Either_right=function(e){return{_tag:"Right",right:e}};var Either_map=function(e){return function(t){return isLeft(t)?t:Either_right(e(t.right))}};var ie=pipe;var ue={URI:"Fluture/Future",map:function(e,t){return map_map(t)(e)},of:future_resolve,ap:function(e,t){return ap_ap(t)(e)},chain:function(e,t){return chain_chain(t)(e)},bimap:function(e,t,n){return bimap_bimap(t)(n)(e)},mapLeft:function(e,t){return map_rej_mapRej(t)(e)},alt:function(e,t){return alt_alt(t())(e)},chainRec:function(e,t){return function recur(e){return ue.chain(t(e),(n=recur,r=future_resolve,function(e){return isLeft(e)?n(e.left):r(e.right)}));var n,r}(e)},throwError:future_reject,fromTask:attemptP,fromIO:attempt};var ce=function(e){var t={};if(function(e){return"function"===typeof e.map}(e)){t.map=function(t){return function(n){return e.map(n,t)}}}if(function(e){return"function"===typeof e.contramap}(e)){t.contramap=function(t){return function(n){return e.contramap(n,t)}}}if(function(e){return"function"===typeof e.mapWithIndex}(e)){t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}}if(function(e){return"function"===typeof e.ap}(e)){t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}if(function(e){return"function"===typeof e.chain}(e)){t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,identity)}}if(function(e){return"function"===typeof e.bimap}(e)){t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.mapLeft(n,t)}}}if(function(e){return"function"===typeof e.extend}(e)){t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,identity)}}if(function(e){return"function"===typeof e.reduce}(e)){t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.reduceRight(r,t,n)}}}if(function(e){return"function"===typeof e.reduceWithIndex}(e)){t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.reduceRightWithIndex(r,t,n)}}}if(function(e){return"function"===typeof e.alt}(e)){t.alt=function(t){return function(n){return e.alt(n,t)}}}if(function(e){return"function"===typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"===typeof e.filter}(e)){t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}}if(function(e){return"function"===typeof e.filterWithIndex}(e)){t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}}if(function(e){return"function"===typeof e.promap}(e)){t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}}if(function(e){return"function"===typeof e.compose}(e)){t.compose=function(t){return function(n){return e.compose(n,t)}}}if(function(e){return"function"===typeof e.throwError}(e)){t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}}return t}(ue),le=(ce.alt,ce.ap,ce.apFirst,ce.apSecond,ce.bimap,ce.chain,ce.chainFirst,ce.flatten,ce.map,ce.mapLeft,ce.fromEither);ce.fromOption,ce.fromPredicate;function zipWith(e,t,n){for(var r=[],o=Math.min(e.length,t.length),a=0;a<o;a++)r[a]=n(e[a],t[a]);return r}var reduceWithIndex_=function(e,t,n){for(var r=e.length,o=t,a=0;a<r;a++)o=n(a,o,e[a]);return o},ReadonlyArray_map=function(e){return function(t){return t.map((function(t){return e(t)}))}},ReadonlyArray_filter=function(e){return function(t){return t.filter(e)}},ReadonlyArray_reduce=function(e,t){return ReadonlyArray_reduceWithIndex(e,(function(e,n,r){return t(n,r)}))},ReadonlyArray_reduceWithIndex=function(e,t){return function(n){return reduceWithIndex_(n,e,t)}};var Array_flatten=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r].length;var o=Array(t),a=0;for(r=0;r<n;r++){for(var i=e[r],u=i.length,c=0;c<u;c++)o[c+a]=i[c];a+=u}return o};var Array_lefts=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var o=e[r];"Left"===o._tag&&t.push(o.left)}return t},se=function zip(e,t){return void 0===t?function(t){return zip(t,e)}:zipWith(e,t,(function(e,t){return[e,t]}))};var fe=ReadonlyArray_map,pe=ReadonlyArray_filter,de=ReadonlyArray_reduce,__read=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__values=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function isHTMLElement(e){return e instanceof HTMLElement}function isHTMLOrSVGElement(e){return e instanceof HTMLElement||e instanceof SVGElement}var defaultNaN=function(e){return function(t){return isNaN(t)?e:t}},getScrolledElements=function(e){return Array.from(e.querySelectorAll("*")).filter((function(e){return 0!==e.scrollTop||0!==e.scrollLeft})).filter(isHTMLElement)},clone_cloneElementScroll=function(e,t){var n,r,o=t.dataset.picocloneid;if(void 0!==o){var a=e.parentWindow.document.querySelector('[data-picocloneid = "'+o+'"]');if(a instanceof HTMLElement){t.style.position="absolute"===t.style.position?"absolute":"relative",t.style.overflow="hidden",t.style.width=a.offsetWidth+"px",t.style.height=a.offsetHeight+"px";var i=Array.from(t.children).filter(isHTMLOrSVGElement),u=Array.from(a.children).filter(isHTMLOrSVGElement);if(i.length===u.length){var c,l=se(u,i),s=a.scrollTop,f=a.scrollLeft;try{for(var p=__values(l),d=p.next();!d.done;d=p.next()){var h=__read(d.value,2),v=h[0],y=h[1],g=e.parentWindow.window.getComputedStyle(v);if("relative"!==e.parentWindow.window.getComputedStyle(a).position||"absolute"!==g.position){if(y.style.position="absolute",y.style.width=g.width,y.style.height=g.height,"undefined"!==typeof c){var m=c.getBoundingClientRect();s-=v.getBoundingClientRect().top-m.top,f-=v.getBoundingClientRect().left-m.left}y.style.top=-s+"px",y.style.left=-f+"px",c=v}else y.style.top=defaultNaN(0)(parseInt(g.top))-a.scrollTop+"px",y.style.left=defaultNaN(0)(parseInt(g.left))-a.scrollLeft+"px",y.style.zIndex=(defaultNaN(0)(parseInt(g.zIndex))+1).toString()}}catch(b){n={error:b}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}else console.warn("Scrolled element has a different amount of children than its clone, skipping scroll emulation",a)}else console.warn("Failed to find original element for scrolled element",t)}else console.warn("Failed to get clone id from cloned scrolled element",t)},cloneBody=function(e){return function(t){!function(e){var t,n;try{for(var r=__values(__spread(e.querySelectorAll("input"),e.querySelectorAll("textarea"),e.querySelectorAll("canvas"),getScrolledElements(e))),o=r.next();!o.done;o=r.next()){o.value.dataset.picocloneid=Math.random().toString(32).substring(2)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}(t.parentWindow.html),t.tree.html.className=t.parentWindow.html.className,t.tree.html.style.cssText=t.parentWindow.html.style.cssText,t.tree.svg.style.fontSize=t.parentWindow.window.getComputedStyle(t.parentWindow.html).fontSize;var n,r=t.parentWindow.body.cloneNode(!0);return(n=e,function(e){e instanceof Element&&n.forEach((function(t){var n,r;try{for(var o=__values(e.querySelectorAll(t)),a=o.next();!a.done;a=o.next())a.value.remove()}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}))})(r),t.tree.html.appendChild(r),function(e){var t,n,_loop_2=function(t){var n=t.dataset.picocloneid;if(void 0===n)return console.warn("Failed to get clone id from cloned input or textarea",t),"continue";var r=__spread(e.parentWindow.document.querySelectorAll("input"),e.parentWindow.document.querySelectorAll("textarea")).find((function(e){return e.dataset.picocloneid===n}));if(void 0===r)return console.warn("Failed to find original input or textarea for cloned input or textarea",t),"continue";if(r instanceof HTMLInputElement&&t instanceof HTMLInputElement)"checkbox"!==t.type&&"radio"!==t.type||!r.checked?-1!==["number","text","range"].indexOf(t.type)&&t.setAttribute("value",r.value):t.setAttribute("checked","checked");else if(r instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){var o=e.parentWindow.document.createTextNode(r.value);t.innerHTML="",t.appendChild(o)}};try{for(var r=__values(__spread(e.tree.html.querySelectorAll("input"),e.tree.html.querySelectorAll("textarea"))),o=r.next();!o.done;o=r.next()){_loop_2(o.value)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}(t),function(e){var t,n,_loop_1=function(t){var n=t.dataset.picocloneid;if(void 0===n)return console.warn("Failed to get clone id from cloned canvas",t),"continue";var r=Array.from(e.parentWindow.document.querySelectorAll("canvas")).find((function(e){return e.dataset.picocloneid===n}));if(void 0===r)return console.warn("Failed to find original canvas for cloned canvas",t),"continue";var o=e.parentWindow.document.createElement("img");o.style.cssText=e.parentWindow.window.getComputedStyle(r).cssText,o.src=r.toDataURL();var a=t.parentNode;if(!a)return console.warn("Failed to get parent of node",t),"continue";a.replaceChild(o,t)};try{for(var r=__values(e.tree.html.querySelectorAll("canvas")),o=r.next();!o.done;o=r.next()){_loop_1(o.value)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}(t),function(e){var t,n;try{for(var r=__values(getScrolledElements(e.parentWindow.html)),o=r.next();!o.done;o=r.next()){var a=o.value,i=a.dataset.picocloneid;if(void 0!==i){var u=e.tree.html.querySelector('[data-picocloneid = "'+i+'"]');u instanceof HTMLElement?clone_cloneElementScroll(e,u):console.warn("Failed to find cloned element for original scrolled element",a)}else console.warn("Failed to get clone id from scrolled element",a)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.tree.html.style.transform+=" translate(-"+e.parentWindow.html.scrollLeft+"px, -"+e.parentWindow.html.scrollTop+"px)"}(t),r instanceof HTMLBodyElement&&(t.tree.html.style.margin="0"),function(e){var t,n;try{for(var r=__values(e.querySelectorAll("[data-picocloneid]")),o=r.next();!o.done;o=r.next()){var a=o.value;a instanceof HTMLElement?a.removeAttribute("data-picocloneid"):console.warn("Element that had a pico clone id attached was not an HTMLElement during cleanup",a)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}(t.parentWindow.html),t}},element_read=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},createElement=function(e){return function(t,n){void 0===n&&(n={});var r=e.createElement(t);return Object.assign(r,n),r}},err=function(e){return{reason:e,error:new Error(e)}},container_createTree=function(e){var t,n=e.window,r=n.innerWidth,o=n.innerHeight,a=createElement(e.document),i=(t=e.document,function(e,n){void 0===n&&(n={});var r=t.createElementNS("http://www.w3.org/2000/svg",e);return Object.entries(n).forEach((function(e){var t=element_read(e,2),n=t[0],o=t[1];return r.setAttribute(n,o)})),r}),u=a("iframe",{width:r+"px",height:o+"px"}),c=i("svg",{width:r+"px",height:o+"px"});c.style.backgroundColor=function(e,t){var n=e.getComputedStyle(t).backgroundColor;return"transparent"===n||"rgba(0, 0, 0, 0)"===n?"white":n}(e.window,e.body);var l=i("foreignObject",{x:"0",y:"0",width:r+"px",height:o+"px"}),s=a("html");s.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var f=a("head");return s.appendChild(f),s.appendChild(f),l.appendChild(s),c.appendChild(l),u.appendChild(c),{html:s,head:f,svg:c}},container_createContainer=function(e){return ie(function(e){var t=e.document,n=t.head,r=t.body,o=t.querySelector("html");return o instanceof HTMLHtmlElement?r instanceof HTMLBodyElement?Either_right({window:e,document:t,html:o,head:n,body:r}):Either_left(err("Failed to get HTMLBodyElement")):Either_left(err("Failed to get HTMLHtmlElement"))}(e),Either_map((function(e){return{parentWindow:e,tree:container_createTree(e)}})))},he=Symbol(),error_stack_empty=function(e){return{_tag:he,errors:[],value:e}},fromError=function(e){return function(t){return fromErrors(e)([t])}},fromErrors=function(e){return function(t){return{_tag:he,errors:t,value:e}}},error_stack_value=function(e){return e.value},error_stack_errors=function(e){return e.errors},noop_noop=function(){},serializeSVGToDataURL=function(e){return"data:image/svg+xml;charset=utf-8,"+window.encodeURIComponent((new XMLSerializer).serializeToString(e))},export_canvasToPngBlob=function(e){return Future((function(t,n){try{e.toBlob((function(e){if(null===e)return t(err("Failed to get blob from canvas (the returned blob is null)"));n(e)}),"image/png",1)}catch(r){t(err("Failed to get blob from canvas (the canvas is most likely tainted)"))}return noop_noop}))},export_canvasToPngDataURL=function(e){try{return Either_right(e.toDataURL("image/png",1))}catch(t){return Either_left(err("Failed to get data url from canvas (the canvas is most likely tainted)"))}},export_containerToCanvas=function(e){var t,n=e.parentWindow.window.devicePixelRatio||1,r=createElement(e.parentWindow.document)("canvas",{width:e.parentWindow.window.innerWidth*n,height:e.parentWindow.window.innerHeight*n}),o=r.getContext("2d");return null===o?future_reject(err("Failed to obtain 2d canvas context")):(t=2e3,function(e){return race_race(Future((function(e){var n=setTimeout((function(){return e(err("Timed out waiting for promise ("+t+"ms)"))}),t);return function(){return clearTimeout(n)}})))(e)})(Future((function(t,a){var i=new Image;return i.onerror=function(){return t(err("Failed to load exported <img> onto canvas"))},i.onload=function(){o.setTransform(n,0,0,n,0,0),o.drawImage(i,0,0),a(r)},i.src=serializeSVGToDataURL(e.tree.svg),i.remove})))},export_dataURLToBlob=function(e){return Future((function(t,n){return fetch(e).then((function(e){return e.blob()})).then(n).catch((function(){return t(err("Failed to convert dataURL to blob ("+e+")"))})),noop_noop}))},export_createObjectURL=function(e){try{return Either_right(URL.createObjectURL(e))}catch(t){return Either_left(err("Failed to create result object URL"))}},download_download=function(e){return Future((function(t,n){return fetch(e,{cache:"force-cache"}).then((function(r){r.ok?n(r):t({_tag:"HTTPError",url:e,status:r.status,statusText:r.statusText})})).catch((function(n){t({_tag:"NetworkError",url:e})})),noop_noop}))},download_responseToText=function(e){return Future((function(t,n){return e.text().then(n).catch((function(n){return t({error:n,reason:"Failed to convert response to text ("+e.url+")"})})),noop_noop}))},download_responseToBlob=function(e){return Future((function(t,n){return e.blob().then(n).catch((function(n){return t({error:n,reason:"Failed to convert response to text ("+e.url+")"})})),noop_noop}))},download_blobToDataURL=function(e){return Future((function(t,n){var r=new FileReader;return r.onloadend=function(){return"string"===typeof r.result?n(r.result):t(err("Got invalid type when reading blob ("+typeof r.result+")"))},r.onerror=function(){return t(err("Failed to load data url for blob"))},r.readAsDataURL(e),r.abort}))},downloadErrorToDetailedError=function(e){var t="Failed to download resource at "+e.url+" "+("NetworkError"===e._tag?"(Network Error, most likely a CORS issue)":"(Status: "+e.status+" - "+e.statusText+")");return{reason:t,error:new Error(t)}},inline_read=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},inline_values=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=function parallel_parallel(e){var t=application1(parallel_parallel,C,arguments);return function parallel(n){var r=application(2,parallel,Y,arguments,t);return 0===n.length?te:new ee(r,e,n)}}(1/0);function isCSSStyleSheet(e){return e instanceof CSSStyleSheet}var inline_processStyleSheetText=function(e){return function(t){var n=document.createElement("style");n.appendChild(document.createTextNode(t)),document.implementation.createHTMLDocument().head.appendChild(n);var r=n.sheet;if(!(r instanceof CSSStyleSheet)){var o="Failed to initialize CSSStyleSheet";return future_reject({reason:o,error:new Error(o)})}return inline_inlineURLsFromCSSRuleList(r.cssRules,e)}},ye=/url\(['"]?(.+?)['"]?\)/,inline_inlineStyleSheetTextURLs=function(e){return function replaceAllAsync(e,t){return function(n){if(e.global||e.sticky)throw new TypeError("Only non-global and non-sticky (without the /g or /y flags) regex' can be used");var r=e.exec(n);if(null===r)return future_resolve(error_stack_empty(n));var o=r[0],a=r[1];if("string"!==typeof r[1])return future_resolve(error_stack_empty(n));var i=n.substring(0,r.index),u=ie(t(a),coalesce_coalesce(fromError(a))(error_stack_empty)),c=replaceAllAsync(e,t)(n.substring(r.index+o.length));return ie(both_both(u)(c),map_map((function(e){var t=inline_read(e,2),n=t[0],r=t[1];return fromErrors(i+n.value+r.value)(Array_flatten([n.errors,r.errors]))})))}}(ye,(function(t){if(0===t.indexOf("data:"))return future_resolve('url("'+t+'")');var n=new URL(t,e).toString();return ie(download_download(n),map_rej_mapRej(downloadErrorToDetailedError),chain_chain(download_responseToBlob),chain_chain(download_blobToDataURL),map_map((function(e){return"url("+e+")"})))}))},inline_inlineURLsFromCSSRuleList=function(e,t){return ie(Array.from(e),fe(function(e){return function(t){if(t instanceof CSSStyleRule){return ie(["background","backgroundImage","listStyle","listStyleImage","content","cursor","border","borderImage","borderImageSource","mask","maskImage"].map((function(n){var r=t.style[n];return""===r||void 0===r?future_resolve([]):ie(inline_inlineStyleSheetTextURLs(e)(r),map_map((function(e){var r=e.errors,o=e.value;return t.style[n]=o,r})))})),ve,map_map(Array_flatten),map_map((function(e){return fromErrors(t.cssText)(e)})))}return t instanceof CSSFontFaceRule?inline_inlineStyleSheetTextURLs(e)(t.cssText):t instanceof CSSMediaRule?window.matchMedia(t.media.mediaText).matches?inline_inlineURLsFromCSSRuleList(t.cssRules,e):future_resolve(error_stack_empty("")):t instanceof CSSImportRule?ie(download_download(t.href),map_rej_mapRej(downloadErrorToDetailedError),chain_chain(download_responseToText),chain_chain(inline_processStyleSheetText(t.href))):(CSSPageRule,future_resolve(error_stack_empty(t.cssText)))}}(t)),fe(coalesce_coalesce((function(e){return fromErrors("")([e])}))(identity)),ve,map_map((n=function(e,t){return e+"\n"+t},r="",function(e){return{_tag:he,errors:ie(e,fe((function(e){return e.errors})),Array_flatten),value:ie(e,fe((function(e){return e.value})),de(r,n))}})));var n,r},inline_extractStylesFromStyleSheets=function(e,t){return ie(Array.from(e),pe(isCSSStyleSheet),fe(function(e){return function(t){return ie(t.href?ie(download_download(t.href),map_rej_mapRej(downloadErrorToDetailedError),chain_chain(download_responseToText)):future_resolve(Array.from(t.cssRules).map((function(e){return e.cssText})).join("\n")),chain_chain(inline_processStyleSheetText(t.href||e)))}}(t)),fe(coalesce_coalesce(fromError(""))(identity)),ve)},inline_inlineImages=function(e){return ie(Array.from(e.tree.html.querySelectorAll("img")),fe((function(e){return ie(download_download(e.src),map_rej_mapRej(downloadErrorToDetailedError),chain_chain(download_responseToBlob),chain_chain(download_blobToDataURL),map_map((function(t){return e.src=t,t})),coalesce_coalesce(Either_left)(Either_right))})),ve,map_map((t=e,function(e){return{_tag:he,errors:Array_lefts(e),value:t}})));var t},inline_inlineExternalResources=function(e){return ie(inline_inlineImages(e),chain_chain((function(e){return ie(function(e){return ie(inline_extractStylesFromStyleSheets(e.parentWindow.document.styleSheets,e.parentWindow.window.location.href),map_map((function(t){var n,r;try{for(var o=inline_values(ie(t,fe(error_stack_value))),a=o.next();!a.done;a=o.next()){var i=a.value,u=e.parentWindow.document.createElement("style");u.appendChild(e.parentWindow.document.createTextNode(i)),e.tree.head.appendChild(u)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}var c=ie(t,fe(error_stack_errors),Array_flatten);return fromErrors(e)(c)})))}(error_stack_value(e)),map_map((function(t){return fromErrors(error_stack_value(t))(Array_flatten([error_stack_errors(e),error_stack_errors(t)]))})))})))},ge={ignore:[]},dist_generateExport=function(e,t){return ie(container_createContainer(e),le,map_map(cloneBody(t.ignore)),chain_chain(inline_inlineExternalResources))},dist_promisifyExport=function(e){return function(t,n){return void 0===n&&(n={}),new Promise((function(r,o){return ie(e(t,(a=n,Object.assign({},ge,a))),fork_fork((function(e){return o(e.error)}))(r));var a}))}},me=(dist_promisifyExport((function(e,t){return ie(dist_generateExport(e,t),chain_chain((function(e){var t=e.value,n=e.errors;return ie(function(e){return ie(export_containerToCanvas(e),chain_chain(export_canvasToPngBlob))}(t),chain_chain(flow(export_createObjectURL,le)),map_map((function(e){return fromErrors(e)(n)})))})))})),dist_promisifyExport((function(e,t){return ie(dist_generateExport(e,t),chain_chain((function(e){var t=e.value,n=e.errors;return ie(function(e){return ie(serializeSVGToDataURL(e.tree.svg),export_dataURLToBlob)}(t),chain_chain(flow(export_createObjectURL,le)),map_map((function(e){return fromErrors(e)(n)})))})))})),dist_promisifyExport((function(e,t){return ie(dist_generateExport(e,t),chain_chain((function(e){var t=e.value,n=e.errors;return ie(function(e){return ie(export_containerToCanvas(e),chain_chain(flow(export_canvasToPngDataURL,le)))}(t),map_map((function(e){return fromErrors(e)(n)})))})))})));function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(){function BugBattle(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BugBattle),_defineProperty(this,"apiUrl","https://api.bugbattle.io"),_defineProperty(this,"sdkKey",null),_defineProperty(this,"privacyPolicyUrl","https://www.bugbattle.io/pages/privacy-policy"),_defineProperty(this,"privacyPolicyCheckEnabled",!1),_defineProperty(this,"email",null!==(n=localStorage.getItem("bugbattle-sender-email"))&&void 0!==n?n:""),_defineProperty(this,"activation",""),_defineProperty(this,"screenshot",null),_defineProperty(this,"screenshotURL",""),_defineProperty(this,"crashDetectorEnabled",!1),_defineProperty(this,"crashDetected",!1),_defineProperty(this,"actionLog",[]),_defineProperty(this,"logArray",[]),_defineProperty(this,"customData",{}),_defineProperty(this,"sessionStart",new Date),_defineProperty(this,"bugReportingRunning",!1),_defineProperty(this,"poweredByHidden",!1),_defineProperty(this,"originalConsoleLog",void 0),_defineProperty(this,"description",""),_defineProperty(this,"severity","LOW"),_defineProperty(this,"appVersionCode",""),_defineProperty(this,"appBuildNumber",""),_defineProperty(this,"mainColor","#398CFE"),_defineProperty(this,"previousBodyOverflow",void 0),_defineProperty(this,"snapshotPosition",{x:0,y:0}),this.sdkKey=e,this.activation=t,this.init()}return _createClass(BugBattle,null,[{key:"initialize",value:function(e,t){this.instance?console.warn("Bugbattle already initialized."):this.instance=new BugBattle(e,t)}}]),_createClass(BugBattle,[{key:"startCrashDetection",value:function(){var e=this;window.onerror=function(t,n,r,o,a){var i=["Message: "+t,"URL: "+n,"Line: "+r,"Column: "+o,"Error object: "+JSON.stringify(a)];return e.addLog(i,"error"),e.startCrashFlow(),!1}}},{key:"startCrashFlow",value:function(){this.crashDetectorEnabled&&!this.bugReportingRunning&&(this.bugReportingRunning=!0,this.crashDetected=!0,BugBattle.startBugReporting())}},{key:"addLog",value:function(e,t){if(e){for(var n="",r=0;r<e.length;r++)n+=e[r]+" ";this.logArray.push({log:n,date:new Date,priority:t})}}},{key:"overwriteConsoleLog",value:function(){var e,t=this;window.console=(e=window.console,window.console&&e||(e={}),t.originalConsoleLog=e,{log:function(){t.addLog(arguments,"INFO"),e.log&&e.log.apply(e,arguments)},warn:function(){t.addLog(arguments,"WARNING"),e.warn&&e.warn.apply(e,arguments)},error:function(){t.addLog(arguments,"ERROR"),e.error&&e.error.apply(e,arguments),t.startCrashFlow()},info:function(n){t.addLog(arguments,"INFO"),e.info&&e.info.apply(e,arguments)}})}},{key:"disableScroll",value:function(){this.previousBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"}},{key:"enableScroll",value:function(){this.previousBodyOverflow?document.body.style.overflow=this.previousBodyOverflow:document.body.style.overflow=null}},{key:"askForCrashReport",value:function(){var e=this,t=document.createElement("div");t.className="bugbattle--feedback-dialog-container",t.setAttribute("data-ignore-bb","true"),t.innerHTML='<div class=\'bugbattle--feedback-dialog\'>\n      <div class="bugbattle--feedback-dialog-header">\n        <div></div>\n        <div class="bugbattle--feedback-dialog-header-title">Crash detected</div>\n        <div class="bugbattle--feedback-dialog-header-button bugbattle--feedback-dialog-header-button-cancel">\n          <svg fill="#CCCCCC" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n            <path d="m100 9.4414-9.4414-9.4414-40.344 40.344-40.773-40.344-9.4414 9.4414 40.344 40.773-40.344 40.344 9.4414 9.4414 40.773-40.344 40.344 40.344 9.4414-9.4414-40.344-40.344z" fill-rule="evenodd"/>\n          </svg>\n        </div>\n      </div>\n      <div class="bugbattle--feedback-dialog-body">\n        <div class="bugbattle--feedback-inputgroup bugbattle--feedback-inputgroup-text">\n          A critical error has been detected. Do you want to submit an error report?\n        </div>\n        <div class="bugbattle--feedback-inputgroup">\n          <div class="bugbattle--feedback-send-button">Submit error report</div>\n        </div>\n      </div>\n    </div>',document.body.appendChild(t);var n=document.querySelector(".bugbattle--feedback-send-button");document.querySelector(".bugbattle--feedback-dialog-header-button-cancel").onclick=function(){e.hide()},n.onclick=function(){document.querySelector(".bugbattle--feedback-dialog-container").remove(),e.createBugReportingDialog()}}},{key:"createBugReportingDialog",value:function(){var e=this,t=document.createElement("div");t.className="bugbattle--feedback-dialog-container",t.setAttribute("data-ignore-bb","true"),t.innerHTML='<div class=\'bugbattle--feedback-dialog\'>\n      <div class="bugbattle--feedback-dialog-header">\n        <div></div>\n        <div class="bugbattle--feedback-dialog-header-title">Report your feedback</div>\n        <div class="bugbattle--feedback-dialog-header-button bugbattle--feedback-dialog-header-button-cancel">\n          <svg fill="#CCCCCC" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n            <path d="m100 9.4414-9.4414-9.4414-40.344 40.344-40.773-40.344-9.4414 9.4414 40.344 40.773-40.344 40.344 9.4414 9.4414 40.773-40.344 40.344 40.344 9.4414-9.4414-40.344-40.344z" fill-rule="evenodd"/>\n          </svg>\n        </div>\n      </div>\n      <div class="bugbattle--feedback-dialog-loading">\n        <div class="bugbattle-spinner">\n          <div class="bugbattle-double-bounce1"></div>\n          <div class="bugbattle-double-bounce2"></div>\n        </div>\n      </div>\n      <div class="bugbattle--feedback-dialog-success">\n        <svg width="120px" height="92px" viewBox="0 0 120 92" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="np_check_1807541" fill="'.concat(this.mainColor,'" fill-rule="nonzero">\n                    <path d="M107.553103,1.03448276 L101.669379,6.85344828 C81.2141379,27.3490345 62.5845517,47.5706897 42.7038621,67.7596552 L17.5535172,47.6517931 L11.088,42.4793793 L0.743172414,55.4104138 L38.2431724,85.4104138 L44.0621379,90.0010345 L49.2991034,84.764069 C71.5404828,62.4751034 91.5349655,40.4985517 113.437034,18.5571724 L119.256,12.6734483 L107.553103,1.03448276 Z" id="Path"></path>\n                </g>\n            </g>\n        </svg>\n        <div class="bugbattle--feedback-dialog-info-text">Thank you for your feedback!</div>\n      </div>\n      <div class="bugbattle--feedback-dialog-body">\n        <div class="bugbattle--feedback-inputgroup">\n          <div class="bugbattle--feedback-inputgroup-label">Email</div>\n          <input class="bugbattle--feedback-email" type="text" placeholder="Email" />\n        </div>\n        <div class="bugbattle--feedback-inputgroup">\n          <div class="bugbattle--feedback-inputgroup-label">What went wrong?</div>\n          <textarea class="bugbattle--feedback-description" placeholder="Describe your issue"></textarea>\n        </div>\n        <div class="bugbattle--feedback-inputgroup bugbattle--feedback-inputgroup--privacy-policy">\n          <input type="checkbox" required name="terms"> <span class="bugbattle--feedback-inputgroup--privacy-policy-label">I read and accept the <a id="bugbattle-privacy-policy-link" href="#" target="_blank">privacy policy</a>.</span>\n        </div>\n        <div class="bugbattle--feedback-inputgroup">\n          <div class="bugbattle--feedback-send-button">Send feedback</div>\n        </div>\n        <div class="bugbattle--feedback-poweredbycontainer">\n          <span>Powered by</span>\n          <svg width="173px" height="30px" viewBox="0 0 173 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g fill="#AAAAAA">\n                      <g transform="translate(147.600000, 0.000000)">\n                          <path d="M24.2859542,7.7113198 C24.0540256,7.30857681 23.5901684,7.21614399 23.1067117,7.49014127 C22.4207257,7.88298074 21.7282066,8.2659167 21.0585536,8.68186438 C20.793959,8.84692298 20.6796281,8.81721243 20.5293645,8.54321515 C19.7290475,7.10060297 18.8960646,5.67119547 18.092481,4.25169149 C18.0234655,4.09525611 17.9234014,3.95480724 17.7984871,3.83904499 C17.6571381,3.74207171 17.4921828,3.68612411 17.3215635,3.67728756 L12.0002725,3.67728756 C11.7748771,3.67728756 11.8010099,3.50892778 11.8010099,3.34717035 C11.8010099,2.52847968 11.8010099,1.69658433 11.8010099,0.887797176 C11.8346543,0.638013247 11.7383149,0.38837468 11.5462151,0.227562766 C11.4071145,0.0821266579 11.2155424,0 11.0153926,0 C10.8152429,0 10.6236708,0.0821266579 10.4845702,0.227562766 C10.2986685,0.392643686 10.2046806,0.639351901 10.233042,0.887797176 C10.2036426,1.81212535 10.2624414,2.73975469 10.184043,3.66408287 L6.51891806,3.64757701 C6.36738842,3.6701226 6.22373966,3.73023167 6.10079329,3.82253913 C5.9974756,3.89628042 5.90789458,3.98792717 5.8361987,4.09323523 L0.53450728,13.3167099 C0.35516424,13.600556 0.35516424,13.9637944 0.53450728,14.2476405 L5.81006591,23.5305363 C5.90158939,23.7273663 6.07735578,23.8709275 6.28698947,23.9200746 C6.38409512,23.9386703 6.48230448,23.9508007 6.58098345,23.9563874 L17.0896349,23.9960015 C17.2513063,24.0107273 17.4140655,23.9846371 17.5632919,23.9200746 C17.7549133,23.8514168 17.9098335,23.705613 17.9912164,23.5173316 C19.733403,20.4736509 21.4864782,17.4299703 23.2504421,14.3862897 C23.4716092,14.0527399 23.4716092,13.617248 23.2504421,13.2836982 C22.7147197,12.3725747 22.2083967,11.4416442 21.6694078,10.5338219 C21.5322106,10.3027399 21.5910094,10.2235117 21.7968052,10.1112719 C22.5056573,9.71513123 23.2079763,9.30248473 23.9135618,8.88983822 C24.1271707,8.79373014 24.2900142,8.61002873 24.3611418,8.38492949 C24.4322695,8.15983024 24.4049139,7.91475021 24.2859542,7.7113198 Z M20.0393745,14.4820237 C19.9021773,14.7197081 19.7715133,14.9474889 19.6310495,15.178571 L19.6310495,15.178571 L17.8115535,18.344395 L17.8115535,18.344395 C17.3280967,19.1927962 16.8315735,20.0378962 16.3644498,20.8895986 C16.2455303,21.114253 16.0045103,21.2445048 15.7535956,21.2197158 C13.1642709,21.2043103 10.5727684,21.1911057 7.97908815,21.1801018 C7.76734312,21.1891383 7.57068598,21.0696354 7.47929839,20.8763939 C6.17265848,18.5897821 4.87255177,16.3020699 3.57897826,14.0132572 C3.47017471,13.8570302 3.46000511,13.6514856 3.55284547,13.4850697 L5.01301556,10.9794801 C5.01148564,10.969637 5.01148564,10.9596127 5.01301556,10.9497696 L6.90111023,7.64859753 L6.90111023,7.64859753 C7.03504082,7.41091314 7.18203781,7.10060297 7.2898356,6.91573733 C7.39763339,6.7308717 7.46296539,6.7308717 7.61649558,6.82990686 C9.28899466,7.82025848 10.9680269,8.81061009 12.6437926,9.78115467 C15.0545433,11.1940563 17.4663827,12.6058576 19.8793111,14.0165584 C20.1308393,14.1882194 20.1733051,14.2443393 20.0328413,14.4820237 L20.0393745,14.4820237 Z" id="Shape"></path>\n                      </g>\n                      <path d="M17.556,15.03 C17.556,19.848 13.761,23.808 9.108,23.808 C6.77072152,23.7933743 4.54993338,22.7855117 3,21.036 L3,21.168 L2.4,23.268 L0,23.268 L0,0.168 L3,0.168 L3,9 C4.56193736,7.27275703 6.77633455,6.27927072 9.105,6.261 C13.761,6.252 17.556,10.2 17.556,15.03 Z M14.556,15.03 C14.556,11.8405556 11.9704444,9.255 8.781,9.255 C5.59155557,9.255 3.006,11.8405556 3.006,15.03 C3.006,18.2194444 5.59155557,20.805 8.781,20.805 C11.9631308,20.7885804 14.5382339,18.2121389 14.553,15.03 L14.556,15.03 Z" id="Shape" fill-rule="nonzero"></path>\n                      <path d="M32.736,23.28 L32.274,21.63 C30.1613238,23.7506367 26.978911,24.3891451 24.2117195,23.2475883 C21.4445279,22.1060314 19.6379658,19.4094081 19.635,16.416 L19.635,6.78 L22.635,6.78 L22.635,16.053 C22.635,18.6774571 24.7625429,20.805 27.387,20.805 C30.0114571,20.805 32.139,18.6774571 32.139,16.053 L32.139,6.78 L35.139,6.78 L35.139,23.28 L32.736,23.28 Z" id="Path" fill-rule="nonzero"></path>\n                      <path d="M55.044,21.102 C55.0420903,24.650847 52.9027758,27.8491651 49.623469,29.2058026 C46.3441622,30.5624401 42.5705487,29.8102793 40.062,27.3 L42.207,25.2 C43.8577662,26.8474964 46.3387667,27.3376373 48.4920171,26.4416539 C50.6452675,25.5456705 52.0462228,23.4402192 52.041,21.108 L52.041,21.042 C50.5002169,22.8021497 48.2752599,23.8124004 45.936,23.814 C41.283,23.814 37.488,19.854 37.488,15.036 C37.488,10.218 41.283,6.258 45.936,6.258 C48.2752599,6.2595996 50.5002169,7.2698503 52.041,9.03 L52.041,8.898 L52.641,6.798 L55.041,6.798 L55.044,21.102 Z M51.48,15.03 C51.48,11.862 48.972,9.255 45.936,9.255 C42.9,9.255 40.392,11.862 40.392,15.03 C40.392,18.198 42.867,20.805 45.936,20.805 C49.005,20.805 51.48,18.198 51.48,15.03 Z" id="Shape" fill-rule="nonzero"></path>\n                      <path d="M75.537,15.03 C75.537,19.848 71.742,23.808 67.089,23.808 C64.7527694,23.7925242 62.5332367,22.7847364 60.984,21.036 L60.984,21.168 L60.384,23.268 L57.984,23.268 L57.984,0.168 L60.984,0.168 L60.984,9 C62.5459374,7.27275703 64.7603345,6.27927072 67.089,6.261 C71.742,6.252 75.537,10.2 75.537,15.03 Z M72.537,15.03 C72.537,11.8405556 69.9514444,9.255 66.762,9.255 C63.5725556,9.255 60.987,11.8405556 60.987,15.03 C60.987,18.2194444 63.5725556,20.805 66.762,20.805 C69.9441308,20.7885804 72.5192339,18.2121389 72.534,15.03 L72.537,15.03 Z" id="Shape" fill-rule="nonzero"></path>\n                      <path d="M95.139,23.28 L92.739,23.28 L92.139,21.18 L92.139,21.048 C90.5807158,22.803397 88.3482532,23.8116059 86.001,23.82 C81.381,23.82 77.586,19.86 77.586,15.042 C77.586,10.224 81.381,6.264 86.001,6.264 C88.3482532,6.27239413 90.5807158,7.28060302 92.139,9.036 L92.139,8.904 L92.739,6.804 L95.139,6.804 L95.139,23.28 Z M92.139,15.03 C92.139,11.8405556 89.5534444,9.255 86.364,9.255 C83.1745556,9.255 80.589,11.8405556 80.589,15.03 C80.589,18.2194444 83.1745556,20.805 86.364,20.805 C89.5461308,20.7885804 92.1212339,18.2121389 92.136,15.03 L92.139,15.03 Z" id="Shape" fill-rule="nonzero"></path>\n                      <path d="M105.963,20.805 L105.963,23.28 L103.422,23.28 C101.143537,22.2828018 99.6773135,20.0250766 99.693,17.538 L99.693,9.453 L97.593,9.453 L97.593,6.78 L99.693,6.78 L99.693,2.325 L102.693,2.325 L102.693,6.78 L105.498,6.78 L105.498,9.453 L102.693,9.453 L102.693,17.538 C102.688982,18.4062085 103.032305,19.2399754 103.646509,19.8536163 C104.260714,20.4672572 105.094796,20.8098149 105.963,20.805 Z" id="Path" fill-rule="nonzero"></path>\n                      <path d="M115.962,20.805 L115.962,23.28 L113.421,23.28 C111.142537,22.2828018 109.676314,20.0250766 109.692,17.538 L109.692,9.453 L107.592,9.453 L107.592,6.78 L109.692,6.78 L109.692,2.325 L112.692,2.325 L112.692,6.78 L115.5,6.78 L115.5,9.453 L112.695,9.453 L112.695,17.538 C112.690988,18.4056858 113.033901,19.2389929 113.647454,19.852546 C114.261007,20.4660991 115.094314,20.8090116 115.962,20.805 Z" id="Path" fill-rule="nonzero"></path>\n                      <polygon fill-rule="nonzero" points="118.305 23.28 118.305 0.18 121.305 0.18 121.305 23.28"></polygon>\n                      <path d="M127.08,15.69 C127.330165,17.935452 128.871936,19.8263987 131.021025,20.5235752 C133.170113,21.2207517 135.528322,20.5949806 137.049,18.924 L139.194,21.069 C139.119365,21.1139793 139.051659,21.1695593 138.993,21.234 C137.350467,22.8842039 135.117322,23.8107216 132.789,23.808006 C130.468503,23.7936931 128.246259,22.869464 126.6,21.234 C124.949796,19.5914668 124.023278,17.3583215 124.025994,15.03 C124.025994,10.179 127.524,6.252 131.826,6.252 C136.128,6.252 139.626,10.179 139.626,15.03 L139.626,15.69 L127.08,15.69 Z M127.314,13.017 L136.287,13.017 C135.627,10.839 133.887,9.255 131.787,9.255 C129.687,9.255 128.004,10.839 127.314,13.017 Z" id="Shape" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>\n        </div>\n      </div>\n    </div>'),document.body.appendChild(t);var n=document.querySelector(".bugbattle--feedback-inputgroup--privacy-policy"),r=document.querySelector(".bugbattle--feedback-inputgroup--privacy-policy-label"),o=document.querySelector(".bugbattle--feedback-inputgroup--privacy-policy input");this.privacyPolicyCheckEnabled?(n.style.display="block",document.querySelector("#bugbattle-privacy-policy-link").href=this.privacyPolicyUrl):n.style.display="none",r.onclick=function(){o.checked=!o.checked};var a=document.querySelector(".bugbattle--feedback-poweredbycontainer");this.poweredByHidden?a.style.display="none":a.onclick=function(){window.open("https://www.bugbattle.io/","_blank")};var i=document.querySelector(".bugbattle--feedback-send-button"),u=document.querySelector(".bugbattle--feedback-dialog-header-button-cancel"),c=document.querySelector(".bugbattle--feedback-email"),l=document.querySelector(".bugbattle--feedback-description");l.oninput=function(){l.style.height="inherit",l.style.height=l.scrollHeight+"px"},u.onclick=function(){e.hide()},c.value=this.email,i.onclick=function(){if(e.email=c.value,e.email&&0!==e.email.length)if(!e.privacyPolicyCheckEnabled||o.checked){if(e.description=l.value,localStorage.setItem("bugbattle-sender-email",e.email),e.toggleLoading(!0),!e.sdkKey)return alert("BUGBATTLE: Please provide a valid API key!");e.preScreenshotCleanup(),window.scrollTo(e.snapshotPosition.x,e.snapshotPosition.y),me(window,{ignore:['[data-ignore-bb~="true"]']}).then((function(t){t&&t.value?(e.screenshot=t.value,e.prepareScreenshot()):e.showError()})).catch((function(t){e.showError()}))}else alert("Please read and accept the privacy policy.");else alert("Please provide an email address.")}}},{key:"preScreenshotCleanup",value:function(){document.body.querySelectorAll("img, svg, video").forEach((function(e){e.setAttribute("width",e.getBoundingClientRect().width),e.setAttribute("height",e.getBoundingClientRect().height)}))}},{key:"hide",value:function(){var e=document.querySelector(".bugbattle-screenshot-editor-container");e&&e.remove();var t=document.querySelector(".bugbattle--feedback-dialog-container");t&&t.remove();var n=document.querySelector(".bugbattle--feedback-button");n&&(n.style.display="block"),this.bugReportingRunning=!1,this.crashDetected=!1,this.enableScroll()}},{key:"init",value:function(){this.overwriteConsoleLog(),this.startCrashDetection();var e=this;"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e.checkForInitType():document.addEventListener("DOMContentLoaded",(function(t){e.checkForInitType()}))}},{key:"checkForInitType",value:function(){this.activation===BugBattle.FEEDBACK_BUTTON&&this.injectFeedbackButton()}},{key:"injectFeedbackButton",value:function(){var e=document.createElement("div");e.className="bugbattle--feedback-button",e.innerHTML='<div class="bugbattle--feedback-button-inner"><span class="bugbattle--feedback-button-inner-text">Feedback</span></div>',e.onclick=function(){BugBattle.startBugReporting()},document.body.appendChild(e)}},{key:"toggleLoading",value:function(e){var t=document.querySelector(".bugbattle--feedback-dialog-header"),n=document.querySelector(".bugbattle--feedback-dialog-body"),r=document.querySelector(".bugbattle--feedback-dialog-loading");e?(n.style.display="none",r.style.display="block",t.style.display="none"):(n.style.display="block",r.style.display="none",t.style.display="block")}},{key:"showSuccessMessage",value:function(){var e=document.querySelector(".bugbattle--feedback-dialog-success"),t=document.querySelector(".bugbattle--feedback-dialog-body"),n=document.querySelector(".bugbattle--feedback-dialog-loading");t.style.display="none",n.style.display="none",e.style.display="flex"}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new Blob([r],{type:n})}},{key:"prepareScreenshot",value:function(){var e=this,t=new Image;t.onload=function(){var n=window.devicePixelRatio,r=document.createElement("canvas");r.width=this.width,r.height=this.height;var o=r.getContext("2d");o.drawImage(t,0,0,this.width,this.height);var a=document.querySelector(".bugbattle-screenshot-editor-dot"),i=document.querySelector(".bugbattle-screenshot-editor-rectangle");a&&i&&(o.beginPath(),o.arc((a.offsetLeft+a.offsetWidth/2)*n,(a.offsetTop+a.offsetHeight/2)*n,6*n,0,2*Math.PI,!1),o.fillStyle=e.mainColor,o.fill(),o.closePath(),o.lineWidth=3*n,o.strokeStyle=e.mainColor,o.stroke(),(i.offsetTop>0||i.offsetLeft)&&o.strokeRect(i.offsetLeft*n,i.offsetTop*n,i.offsetWidth*n,i.offsetHeight*n)),e.uploadScreenshot(r.toDataURL("image/jpeg",.5)),e.screenshot=null},t.onerror=function(){e.hide()},t.src=this.screenshot}},{key:"uploadScreenshot",value:function(e){var t=this,n=new XMLHttpRequest;n.open("POST",this.apiUrl+"/uploads/sdk"),n.setRequestHeader("Api-Token",this.sdkKey),n.onreadystatechange=function(e){if(n.readyState===XMLHttpRequest.DONE)try{var r=JSON.parse(n.responseText);r&&r.fileUrl?(t.screenshotURL=r.fileUrl,t.sendBugReportToServer()):t.showError()}catch(e){t.showError()}};document.querySelector(".bugbattle-screenshot-editor-canvas");var r=this.dataURItoBlob(e),o=new FormData;o.append("file",r,"screenshot.jpg"),n.send(o)}},{key:"sendBugReportToServer",value:function(){var e=this,t=new XMLHttpRequest;t.open("POST",this.apiUrl+"/bugs"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.setRequestHeader("Api-Token",this.sdkKey),t.onreadystatechange=function(n){t.readyState!==XMLHttpRequest.DONE||200!==t.status&&201!==t.status||(e.showSuccessMessage(),setTimeout((function(){e.hide()}),1500))};var n={reportedBy:this.email,description:this.description,priority:this.severity,screenshotUrl:this.screenshotURL,customData:this.customData,metaData:this.getMetaData(),consoleLog:this.logArray,type:this.crashDetected?"CRASHREPORT":"BUG"};t.send(JSON.stringify(n))}},{key:"showError",value:function(){this.toggleLoading(!1)}},{key:"getMetaData",value:function(){var e,t,n,r=navigator.userAgent,o=navigator.appName,a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);-1!==(t=r.indexOf("Opera"))?(o="Opera",a=r.substring(t+6),-1!==(t=r.indexOf("Version"))&&(a=r.substring(t+8))):-1!==(t=r.indexOf("MSIE"))?(o="Microsoft Internet Explorer",a=r.substring(t+5)):-1!==(t=r.indexOf("Chrome"))?(o="Chrome",a=r.substring(t+7)):-1!==(t=r.indexOf("Safari"))?(o="Safari",a=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(a=r.substring(t+8))):-1!==(t=r.indexOf("Firefox"))?(o="Firefox",a=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(o=r.substring(e,t),a=r.substring(t+1),o.toLowerCase()===o.toUpperCase()&&(o=navigator.appName)),-1!==(n=a.indexOf(";"))&&(a=a.substring(0,n)),-1!==(n=a.indexOf(" "))&&(a=a.substring(0,n)),i=parseInt(""+a,10),isNaN(i)&&(a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10));var u="Unknown OS";-1!==navigator.appVersion.indexOf("Win")&&(u="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(u="MacOS"),-1!==navigator.appVersion.indexOf("X11")&&(u="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(u="Linux"),-1!==navigator.appVersion.indexOf("iPad")&&(u="iPad"),-1!==navigator.appVersion.indexOf("iPhone")&&(u="iPhone"),-1!==navigator.appVersion.indexOf("Android")&&(u="Android");var c=((new Date).getTime()-this.sessionStart.getTime())/1e3;return{browserName:o+"("+a+")",userAgent:r,browser:navigator.appName,systemName:u,buildVersionNumber:this.appBuildNumber,releaseVersionNumber:this.appVersionCode,sessionDuration:c,devicePixelRatio:window.devicePixelRatio,screenWidth:window.screen.width,screenHeight:window.screen.height,innerWidth:window.innerWidth,innerHeight:window.innerHeight,currentUrl:window.location.href,language:navigator.language||navigator.userLanguage}}},{key:"showBugReportEditor",value:function(){var e=this,t=document.createElement("div");t.className="bugbattle-screenshot-editor-container",t.setAttribute("data-ignore-bb","true"),t.innerHTML="\n      <div class='bugbattle-screenshot-editor-container-inner'>\n        <div class='bugbattle-screenshot-editor-borderlayer'></div>\n        <div class='bugbattle-screenshot-editor-dot'></div>\n        <div class='bugbattle-screenshot-editor-rectangle'></div>\n        <div class='bugbattle-screenshot-editor-drag-info'>Click or drag to create a comment</div>\n      </div>\n    ",document.body.appendChild(t);var n=document.querySelector(".bugbattle-screenshot-editor-borderlayer");n&&(n.style.height="".concat(window.innerHeight,"px"));var r=!1,o=-1,a=-1;function setStartPoint(e,t){if(!r){var n=document.querySelector(".bugbattle-screenshot-editor-dot");n.style.left=e-n.offsetWidth/2+"px",n.style.top=t-n.offsetHeight/2+"px"}}function setMouseMove(e,t){var n=document.querySelector(".bugbattle-screenshot-editor-drag-info");if(n.style.left="".concat(e+20,"px"),n.style.top="".concat(t-n.offsetHeight/2,"px"),n.style.right=null,!(r||o<0)){var i=e-o,u=t-a,c=document.querySelector(".bugbattle-screenshot-editor-rectangle"),l=i<0?o+i:o,s=u<0?a+u:a,f=u<0?-1*u:u,p=i<0?-1*i:i;c.style.left="".concat(l,"px"),c.style.top="".concat(s,"px"),c.style.width="".concat(p,"px"),c.style.height="".concat(f,"px")}}function mouseUpEventHandler(t){document.querySelector(".bugbattle-screenshot-editor-drag-info").style.display="none",r=!0,e.createBugReportingDialog()}t.addEventListener("mouseup",mouseUpEventHandler),t.addEventListener("mousemove",(function(e){setMouseMove(e.pageX-document.documentElement.scrollLeft,e.pageY-document.documentElement.scrollTop)})),t.addEventListener("mousedown",(function(e){o=e.pageX-document.documentElement.scrollLeft,a=e.pageY-document.documentElement.scrollTop,setStartPoint(o,a)})),t.addEventListener("touchstart",(function(e){o=e.touches[0].pageX-document.documentElement.scrollLeft,a=e.touches[0].pageY-document.documentElement.scrollTop,setStartPoint(o,a)})),t.addEventListener("touchmove",(function(e){setMouseMove(e.touches[0].pageX-document.documentElement.scrollLeft,e.touches[0].pageY-document.documentElement.scrollTop),e.preventDefault()})),t.addEventListener("touchend",mouseUpEventHandler)}}],[{key:"enablePoweredByBugbattle",value:function(e){this.instance.poweredByHidden=e}},{key:"enablePrivacyPolicy",value:function(e){this.instance.privacyPolicyCheckEnabled=e}},{key:"setPrivacyPolicyUrl",value:function(e){this.instance.privacyPolicyUrl=e}},{key:"enableCrashDetector",value:function(e){this.instance.crashDetectorEnabled=e}},{key:"setCustomerEmail",value:function(e){this.instance.email=e}},{key:"setAppVersionCode",value:function(e){this.instance.appVersionCode=e}},{key:"setAppBuildNumber",value:function(e){this.instance.appBuildNumber=e}},{key:"setApiUrl",value:function(e){this.instance.apiUrl=e}},{key:"attachCustomData",value:function(e){this.instance.customData=e}},{key:"setMainColor",value:function(e){var t="\n    .bugbattle--feedback-button {\n        background-color: ".concat(e,";\n    }\n    .bugbattle--feedback-dialog-header-button {\n        color: ").concat(e,";\n    }\n    .bugbattle-screenshot-editor-borderlayer {\n        border-color: ").concat(e,";\n    }\n    .bugbattle-screenshot-editor-dot {\n      background-color: ").concat(e,";\n    }\n    .bugbattle-screenshot-editor-rectangle {\n      border-color: ").concat(e,";\n    }\n    .bugbattle--feedback-send-button {\n      background-color: ").concat(e,";\n    }\n    .bugbattle--feedback-inputgroup--privacy-policy a {\n      color: ").concat(e,";\n    }\n    .bugbattle-screenshot-editor-drag-info {\n      background-color: ").concat(e,";\n    }\n    .bugbattle-double-bounce1,\n    .bugbattle-double-bounce2 {\n      background-color: ").concat(e,";\n    }\n    ");this.instance.mainColor=e;var n=document.createElement("style");n.innerHTML=t,document.body.appendChild(n)}},{key:"startBugReporting",value:function(){this.instance.disableScroll();var e=document.querySelector(".bugbattle--feedback-button");e&&(e.style.display="none"),this.instance.snapshotPosition={x:window.scrollX,y:window.scrollY},this.instance.crashDetected?this.instance.askForCrashReport():this.instance.showBugReportEditor()}},{key:"disableConsoleLogOverwrite",value:function(){window.console=this.instance.originalConsoleLog}}]),BugBattle}();_defineProperty(be,"FEEDBACK_BUTTON","FEEDBACK_BUTTON"),_defineProperty(be,"NONE","NONE"),_defineProperty(be,"instance",void 0);var we=be;t.default=we}])}));
//# sourceMappingURL=index.js.map