!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Gleap=t():e.Gleap=t()}(this,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.d(t,{default:()=>bt});var i=function(e,t){3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var r=n(e.match(/.{2}/g),3),i=r[0],a=r[1],o=r[2],s=[parseInt(i,16)+t,parseInt(a,16)+t,parseInt(o,16)+t];i=s[0],a=s[1],o=s[2],i=Math.max(Math.min(255,i),0).toString(16),a=Math.max(Math.min(255,a),0).toString(16),o=Math.max(Math.min(255,o),0).toString(16);var c=(i.length<2?"0":"")+i,l=(a.length<2?"0":"")+a,u=(o.length<2?"0":"")+o;return"#".concat(c).concat(l).concat(u)},a=function(e){return(299*parseInt(e.substr(1,2),16)+587*parseInt(e.substr(3,2),16)+114*parseInt(e.substr(5,2),16))/1e3>=160?"#000000":"#ffffff"},o=function(e,t,n,r,o){var s=a(e),c=a(n),l=a(o),u="#ffffff"===l,d=i(o,u?100:-120),p=i(o,u?30:-12),h=i(o,u?80:-30),f=(r=parseInt(r,10),Math.round(1.05*r)),b=Math.round(.4*r),v=Math.round(.25*r),g="\n    .gleap-frame-container {\n      right: 20px;\n      bottom: 95px;\n      width: 380px;\n      position: fixed;\n      z-index: ".concat(2147483631,";\n      visibility: visible;\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.16);\n      border-radius: ").concat(r,"px;\n      overflow: hidden;\n      animation-duration: .3s;\n      animation-fill-mode: both;\n      animation-name: gleapFadeInUp;\n      user-select: none;\n      pointer-events: none;\n    }\n\n    [dir=rtl].gleap-frame-container {\n      right: auto;\n      left: 20px;\n      bottom: 95px;\n    }\n\n    .gleap-frame-container--survey {\n      bottom: 20px !important;\n    }\n\n    .gleap-frame-container--survey-full {\n      position: fixed;\n      top: 0 !important;\n      left: 0 !important;\n      bottom: 0 !important;\n      right: 0 !important;\n      width: 100vw !important;\n      height: 100vh !important;\n      background-color: rgba(0, 0, 0, 0.5);\n      backdrop-filter: blur(6px);\n      display: flex !important;\n      justify-content: center !important;\n      align-items: center !important;\n      max-height: 100vh !important;\n      border-radius: 0 !important;\n      animation-name: none !important;\n    }\n\n    .gleap-frame-container--survey-full .gleap-frame-container-inner {\n      max-width: 500px !important;\n      width: calc(100% - 24px);\n      border-radius: ").concat(r,"px;\n      overflow: hidden;\n    }\n\n    .gleap-frame-container--classic {\n      right: 20px;\n      bottom: 20px;\n    }\n\n    [dir=rtl].gleap-frame-container--classic {\n      right: auto;\n      left: 20px;\n      bottom: 20px;\n    }\n\n    .gleap-frame-container--classic-left {\n      right: auto;\n      left: 20px;\n      bottom: 20px;\n    }\n\n    [dir=rtl].gleap-frame-container--classic-left {\n      left: auto;\n      right: 20px;\n      bottom: 20px;\n    }\n\n    .gleap-frame-container--modern-left {\n      right: auto;\n      left: 20px;\n      bottom: 95px;\n    }\n\n    [dir=rtl].gleap-frame-container--modern-left {\n      left: auto;\n      right: 20px;\n      bottom: 95px;\n    }\n\n    .gleap-frame-container--animate {\n      pointer-events: auto !important;\n    }\n\n    @keyframes gleapFadeInUp {\n      from {\n          opacity: 0;\n          transform: translate3d(0, 100%, 0);\n      }\n      to {\n          opacity: 1;\n          transform: translate3d(0, 0, 0);\n      }\n    }\n\n    @keyframes gleapFadeInUpMobile {\n      from {\n          opacity: 0;\n          transform: translate3d(0, 10%, 0);\n      }\n      to {\n          opacity: 1;\n          transform: translate3d(0, 0, 0);\n      }\n    }\n\n    .gleap-notification-container {\n      position: fixed;\n      bottom: 88px;\n      right: 24px;\n      z-index: ").concat(2147483630,";\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      max-width: min(300px, 80vw);\n    }\n\n    .gleap-notification-item {\n\n      animation-duration: 0.7s;\n      animation-fill-mode: both;\n      animation-name: bbFadeInOpacity;\n    }\n\n    .gleap-notification-item {\n      display: flex;\n      align-items: flex-end;\n    }\n\n    .gleap-notification-item img {\n      width: 30px;\n      height: 30px;\n      min-width: 30px;\n      border-radius: 100%;\n      object-fit: cover;\n      margin-right: 8px;\n      margin-bottom: 12px;\n    }\n\n    .gleap-notification-item-container {\n      box-shadow: 0px 5px 30px rgba(0, 0, 0, 0.2);\n      border-radius: ").concat(b,"px;\n      padding: 12px 16px;\n      background-color: ").concat(o,";\n      margin-bottom: 12px;\n      cursor: pointer;\n      font-size: 15px;\n      line-height: 21px;\n      color: ").concat(l,";\n    }\n\n    .gleap-notification-item-sender {\n      font-size: 13px;\n      color: ").concat(l,";\n    }\n\n    .gleap-notification-item-content {\n      font-size: 14px;\n      line-height: 20px;\n      color: ").concat(d,";\n    }\n\n    .gleap-frame-container-inner {\n      position: relative;\n      width: 100%;\n      height: calc(100vh - 150px);\n      max-height: ").concat(660,'px;\n    }\n\n    .gleap-frame-container-inner:before {\n      content: " ";\n      position: absolute;\n      width: 100%;\n      height: calc(100% - ').concat(r,"px);\n      top: ").concat(r,"px;\n      background-color: ").concat(o,";\n      z-index: -1;\n    }\n    \n    .gleap-frame-container iframe {\n      height: 100% !important;\n      width: 100% !important;\n      max-width: 100% !important;\n      display: block;\n    }\n    \n    .gleap-frame-container--hidden {\n      display: none !important;\n      pointer-events: none;\n      animation: none !important;\n    }\n    \n    .bb-feedback-button {\n      margin: 0px;\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      border-radius: 30px;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      background-color: transparent;\n      color: #000000;\n      z-index: ").concat(2147483630,';\n      box-sizing: border-box;\n      display: flex;\n      align-items: center;\n      padding: 0px;\n    }\n\n    [dir=rtl].bb-feedback-button {\n      bottom: 20px;\n      right: auto;\n      left: 20px;\n    }\n    \n    .bb-feedback-button--bottomleft {\n      bottom: 20px;\n      right: auto;\n      left: 20px;\n    }\n\n    [dir=rtl].bb-feedback-button--bottomleft {\n      bottom: 20px;\n      right: 20px;\n      left: auto;\n    }\n    \n    .bb-feedback-button--disabled .bb-feedback-button-icon {\n      display: none !important;\n    }\n    \n    .bb-feedback-button--disabled .bb-feedback-button-text {\n      display: none;\n    }\n\n    .bb-feedback-button--hidden {\n      display: none !important;\n    }\n    \n    .bb-feedback-button-text {\n      padding: 8px 12px;\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      justify-content: center;\n      background-color: #fff;\n      border-radius: 8px;\n      box-shadow: 0px 0px 14px 0px rgba(0, 0, 0, 0.15);\n      position: relative;\n      z-index: 99;\n    }\n    \n    .bb-feedback-button-text:before {\n      content: "";\n      position: absolute;\n      box-shadow: rgba(0, 0, 0, 0.04) 6px 6px 5px;\n      transform: rotate(315deg);\n      bottom: 16px;\n      right: -4px;\n      border-width: 10px;\n      border-style: solid;\n      border-color: transparent #fff #fff transparent;\n    }\n    \n    .bb-feedback-button--bottomleft .bb-feedback-button-text:before {\n      display: none;\n    }\n    \n    .bb-feedback-button-text:after {\n      content: "";\n      position: absolute;\n      bottom: 12px;\n      right: 0px;\n      background-color: #fff;\n      width: 5px;\n      height: 30px;\n    }\n    \n    .bb-feedback-button-text-title {\n      font-family: sans-serif;\n      font-size: 14px;\n      color: #666;\n      line-height: 18px;\n      max-width: 220px;\n    }\n    \n    .bb-feedback-button-text-title b {\n      color: #000000;\n      font-weight: 600;\n    }\n\n    .bb-notification-bubble {\n      position: absolute;\n      top: -4px;\n      right: -4px;\n      min-width: 22px;\n      padding: 0px 4px;\n      height: 22px;\n      border-radius: 22px;\n      background-color: red;\n      color: #fff;\n      font-size: 12px;\n      text-align: center;\n      line-height: 22px;\n    }\n\n    .bb-notification-bubble--hidden {\n      display: none;\n    }\n    \n    .bb-feedback-button-icon {\n      width: 60px;\n      height: 60px;\n      border-radius: 60px;\n      background-color: #485bff;\n      transition: box-shadow 0.3s ease-in-out;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      position: relative;\n    }\n    \n    .bb-feedback-button-classic {\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      top: 50%;\n      right: 0px;\n      position: fixed;\n      transform: rotate(-90deg) translate(50%, -50%);\n      transform-origin: 100% 50%;\n      padding: 9px 20px;\n      text-align: center;\n      background-color: #485bff;\n      border-top-left-radius: 8px;\n      border-top-right-radius: 8px;\n      font-family: sans-serif;\n      font-size: 16px;\n      color: #fff;\n      box-shadow: 0px 0px 14px 0px rgba(0, 0, 0, 0.25);\n      animation-duration: 0.2s;\n      animation-fill-mode: both;\n      animation-name: bbFadeInOpacity;\n    }\n\n    [dir=rtl].bb-feedback-button .bb-feedback-button-classic {\n      top: 50%;\n      left: 0px;\n      right: auto;\n      transform: rotate(90deg) translate(-50%, -100%);\n      transform-origin: 0% 0%;\n    }\n    \n    .bb-feedback-button-classic--left {\n      top: 50%;\n      left: 0px;\n      right: auto;\n      transform: rotate(90deg) translate(-50%, -100%);\n      transform-origin: 0% 0%;\n    }\n\n    [dir=rtl].bb-feedback-button .bb-feedback-button-classic--left {\n      top: 50%;\n      right: 0px;\n      left: auto;\n      transform: rotate(-90deg) translate(50%, -50%);\n      transform-origin: 100% 50%;\n    }\n    \n    .bb-feedback-button-classic--bottom {\n      top: auto;\n      bottom: 0px;\n      transform: none;\n      right: 20px;\n      left: auto;\n    }\n    \n    [dir=rtl].bb-feedback-button .bb-feedback-button-classic--bottom {\n      top: auto;\n      bottom: 0px;\n      transform: none;\n      left: 20px;\n      right: auto;\n    }\n    \n    .bb-feedback-button--open.bb-feedback-button--survey,\n    .bb-feedback-button--open .bb-feedback-button-classic {\n      animation-duration: 0.2s;\n      animation-fill-mode: both;\n      animation-name: bbFadeOutRight;\n    }\n    \n    .bb-feedback-button .bb-logo-logo {\n      position: absolute;\n      width: 38px;\n      height: 38px;\n      top: 11px;\n      left: 11px;\n      object-fit: contain;\n      animation-duration: 0.3s;\n      animation-fill-mode: both;\n      animation-name: bbZoomIn;\n    }\n    \n    .bb-feedback-button .bb-logo-arrowdown {\n      position: absolute;\n      width: 18px;\n      height: 18px;\n      top: 23px;\n      left: 21px;\n      object-fit: contain;\n      animation-duration: 0.3s;\n      animation-fill-mode: both;\n    }\n    \n    .bb-feedback-button .bb-logo-arrowdown {\n      animation-name: bbZoomOut;\n    }\n    \n    .bb-feedback-button--open .bb-logo-arrowdown {\n      animation-name: bbZoomIn;\n    }\n    \n    .bb-feedback-button--open .bb-logo-logo {\n      animation-name: bbZoomOut;\n    }\n    \n    .bb-feedback-button-icon:hover {\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.25), 0px 0px 20px rgba(0, 0, 0, 0.2);\n    }\n    \n    .bb-feedback-button--open .bb-feedback-button-text {\n      animation-name: bbFadeOutDown;\n    }\n    \n    .bb-feedback-button--open .bb-feedback-button-icon {\n      display: flex;\n    }\n    \n    .bb-capture-svg {\n      position: absolute;\n      z-index: ').concat(2147483614,";\n      top: 0px;\n      left: 0px;\n      right: 0px;\n      width: 100%;\n      height: 100%;\n      padding: 0px;\n      margin: 0px;\n      cursor: crosshair;\n    }\n\n    .bb-capture-svg--preview {\n      cursor: auto !important;\n    }\n    \n    .bb-rec-on-circle {\n      animation-name: bbRecIconFade;\n      animation-duration: 2s;\n      animation-iteration-count: infinite;\n      animation-direction: alternate;\n    }\n    \n    .bb-rec-on-cont {\n      animation-name: bbRecIconContFade;\n      animation-duration: 2s;\n      animation-iteration-count: infinite;\n      animation-direction: alternate;\n    }\n    \n    .bb-capture-editor-drag-info {\n      position: fixed;\n      top: -200px;\n      left: 0px;\n      z-index: ").concat(2147483616,";\n      transition: opacity 0.3s ease-in-out;\n    }\n    \n    .bb-capture-editor-drag-info svg {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .bb-capture-editor-borderlayer {\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      width: 100vw;\n      height: 100vh;\n      border: 4px solid ").concat(e,";\n      cursor: crosshair;\n      z-index: ").concat(2147483610,";\n      box-sizing: border-box;\n      pointer-events: none;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-editor-borderlayer {\n      background-color: rgba(0, 0, 0, 0.8);\n    }\n    \n    .bb-capture-editor-recording .bb-capture-dismiss {\n      display: none;\n    }\n    \n    .bb-capture-editor-item-inactive {\n      opacity: 0.3;\n      cursor: not-allowed !important;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-toolbar-drawingitem {\n      opacity: 0.3;\n      cursor: not-allowed !important;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-editor-drag-info {\n      display: none;\n    }\n    \n    .bb-capture-editor-notrecording .bb-capture-svg {\n      pointer-events: none !important;\n    }\n    \n    .bb-capture-toolbar {\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      z-index: ").concat(2147483618,";\n      background-color: #fff;\n      padding: 5px;\n      display: flex;\n      align-items: center;\n      border-radius: 8px;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      transition: opacity 0.3s ease-in-out;\n    }\n    \n    .bb-capture-dismiss {\n      position: fixed;\n      top: 0px;\n      right: 0px;\n      z-index: ").concat(2147483618,";\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      width: 36px;\n      height: 36px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: ").concat(e,";\n      border-bottom-left-radius: ").concat(v,"px;\n    }\n\n    [dir=rtl] .bb-capture-dismiss {\n      top: 0px;\n      left: 0px;\n      right: auto;\n      border-bottom-left-radius: 0px !important;\n      border-bottom-right-radius: ").concat(v,"px;\n    }\n    \n    .bb-capture-dismiss svg path {\n      fill: ").concat(s,';\n    }\n    \n    .bb-capture-dismiss svg {\n      width: 20px;\n      height: 20px;\n      object-fit: contain;\n    }\n    \n    .bb-capture-button-next {\n      font-family: sans-serif;\n      box-sizing: border-box;\n      font-weight: 600;\n      text-align: center;\n      width: auto;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      margin: 0px;\n      line-height: 36px;\n      padding: 0px 12px;\n      font-size: 15px;\n      margin-left: 12px;\n    }\n\n    [dir=rtl].bb-capture-editor .bb-capture-button-next {\n      margin-left: auto;\n      margin-right: 12px;\n    }\n    \n    .bb-capture-toolbar-item-spacer {\n      width: 1px;\n      height: 38px;\n      min-width: 1px;\n      margin: 0px 5px;\n    }\n    \n    .bb-capture-toolbar-item {\n      width: 42px;\n      height: 38px;\n      min-width: 42px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      position: relative;\n      margin-right: 5px;\n    }\n    \n    .bb-capture-toolbar-item svg {\n      width: 23px;\n      height: 23px;\n      object-fit: contain;\n    }\n    \n    .bb-capture-toolbar-item-selectedcolor {\n      border-radius: 100%;\n      width: 20px;\n      height: 20px;\n      background-color: #db4035;\n    }\n    \n    .bb-capture-toolbar-item[data-type="undo"] svg {\n      width: 18px;\n      height: 18px;\n    }\n    \n    .bb-capture-toolbar-item[data-active="true"] {\n      position: relative;\n    }\n    \n    .bb-capture-preview {\n      display: none;\n      background-color: rgba(0, 0, 0, 0.6);\n      position: fixed;\n      top: 0px;\n      left: 0px;\n      width: 100vw;\n      height: 100vh;\n      justify-content: center;\n      align-items: center;\n      z-index: ').concat(2147483620,";\n    }\n    \n    .bb-capture-preview-inner {\n      background-color: #fff;\n      padding: 0px;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      border-radius: 8px;\n      flex-direction: column;\n      max-width: 640px;\n      width: 100%;\n      margin: 20px;\n    }\n    \n    .bb-capture-preview-inner video {\n      border-radius: 8px 8px 0px 0px;\n      display: block;\n      border: 0px;\n      outline: none;\n      width: 100%;\n      max-height: 60vh;\n    }\n    \n    .bb-capture-preview-buttons {\n      display: flex;\n      justify-content: space-between;\n      padding: 14px;\n    }\n    \n    .bb-capture-preview-retrybutton {\n      font-family: sans-serif;\n      border-radius: 21px;\n      box-sizing: border-box;\n      padding: 12px 26px;\n      font-size: 16px;\n      line-height: 19px;\n      font-weight: 600;\n      text-align: center;\n      margin-top: 0px;\n      margin-bottom: 0px;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n    }\n    \n    .bb-capture-preview-sendbutton {\n      font-family: sans-serif;\n      border-radius: 21px;\n      box-sizing: border-box;\n      padding: 12px 26px;\n      font-size: 16px;\n      line-height: 19px;\n      font-weight: 600;\n      text-align: center;\n      margin-top: 0px;\n      margin-bottom: 0px;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n    }\n    \n    .bb-capture-preview-retrybutton:hover,\n    .bb-capture-preview-sendbutton:hover {\n      opacity: 0.9;\n    }\n    \n    .bb-capture-toolbar-item-recording {\n      margin-right: 0px;\n    }\n    \n    .bb-capture-toolbar-item-recording svg {\n      width: 33px;\n      height: 33px;\n    }\n    \n    .bb-capture-toolbar-item-colorpicker {\n      position: fixed;\n      top: 70px;\n      left: 50%;\n      transform: translateX(-50%);\n      z-index: ").concat(2147483618,';\n      background-color: #fff;\n      display: none;\n      padding: 10px;\n      box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.15), 0px 0px 20px rgba(0, 0, 0, 0.1);\n      border-radius: 8px;\n    }\n    \n    .bb-capture-toolbar-item-color {\n      width: 20px;\n      height: 20px;\n      border-radius: 100%;\n      margin-right: 12px;\n      box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.15);\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n    }\n    \n    .bb-capture-toolbar-item-color:hover {\n      box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.25);\n    }\n    \n    .bb-capture-toolbar-item-color:last-of-type {\n      margin-right: 0px;\n    }\n    \n    [dir=rtl].bb-capture-editor .bb-capture-toolbar-item-color {\n      margin-right: auto;\n      margin-left: 12px;\n    }\n    \n    [dir=rtl].bb-capture-editor .bb-capture-toolbar-item-color:last-of-type {\n      margin-right: auto;\n      margin-left: 0px;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="true"] svg:first-of-type {\n      display: none;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="true"] svg:nth-of-type(2) {\n      display: block;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="false"] svg:first-of-type {\n      display: block;\n    }\n    \n    .bb-capture-toolbar-item-recording[data-active="false"] svg:nth-of-type(2) {\n      display: none;\n    }\n    \n    .bb-capture-toolbar-item--active {\n      background-color: #eee;\n    }\n    \n    .bb-capture-toolbar-item:hover svg {\n      opacity: 1;\n    }\n    \n    .bb-capture-toolbar-item--active {\n      background-color: #f8f8f8;\n    }\n    \n    .bb-capture-toolbar-item--active svg {\n      opacity: 1;\n    }\n    \n    .bb-capture-toolbar-item--inactivecross::before {\n      content: "";\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      height: 3px;\n      width: 26px;\n      margin: auto;\n      border-radius: 4px;\n      background-color: #e80000;\n      transform: rotate(45deg);\n    }\n    \n    .bb-capture-toolbar-item--inactivecross svg {\n      fill: #eee;\n    }\n    \n    .bb-capture-toolbar-item-timer {\n      text-align: left;\n      line-height: 32px;\n      font-size: 14px;\n      margin: 5px;\n      min-width: 40px;\n      display: none;\n    }\n    \n    .bb-capture-toolbar-item .bb-tooltip {\n      background-color: #555;\n      color: #fff;\n      visibility: hidden;\n      font-size: 14px;\n      text-align: center;\n      padding: 5px 10px;\n      position: absolute;\n      z-index: 1;\n      top: 45px;\n      left: 0px;\n      transform: translateX(calc(-50% + 21px));\n      opacity: 0;\n      transition: opacity 0.3s;\n      white-space: nowrap;\n    }\n    \n    .bb-capture-toolbar-item .bb-tooltip::after {\n      content: "";\n      position: absolute;\n      bottom: 100%;\n      left: 50%;\n      margin-left: -5px;\n      border-width: 5px;\n      border-style: solid;\n      transform: rotate(180deg);\n      border-color: #555 transparent transparent transparent;\n    }\n    \n    .bb-capture-toolbar-item:hover .bb-tooltip {\n      visibility: visible;\n      opacity: 1;\n    }\n    \n    .bb-capture-options {\n      display: none;\n    }\n    \n    .bb-capture-options--active {\n      display: flex;\n    }\n\n    @keyframes bbFadeOutRight {\n      from {\n        opacity: 1;\n      }\n    \n      to {\n        opacity: 0;\n      }\n    }\n    \n    @keyframes bbFadeOutDown {\n      from {\n        opacity: 1;\n      }\n    \n      to {\n        opacity: 0;\n        transform: translate3d(0, 100%, 0);\n      }\n    }\n    \n    @keyframes bbFadeInOpacity {\n      from {\n        opacity: 0;\n      }\n    \n      to {\n        opacity: 1;\n      }\n    }\n    \n    @keyframes bbZoomOut {\n      from {\n        opacity: 1;\n      }\n    \n      50% {\n        opacity: 0;\n        transform: scale3d(0.3, 0.3, 0.3);\n      }\n    \n      to {\n        opacity: 0;\n      }\n    }\n    \n    @keyframes bbZoomIn {\n      from {\n        opacity: 0;\n        transform: scale3d(0.3, 0.3, 0.3);\n      }\n    \n      50% {\n        opacity: 1;\n      }\n    }\n    \n    @keyframes bbRecIconContFade {\n      0% {\n        fill: #b10802;\n      }\n      50% {\n        fill: #ff0000;\n      }\n      100% {\n        fill: #b10802;\n      }\n    }  \n    .bb-capture-preview-retrybutton {\n      color: ').concat(l,";\n      border-radius: ").concat(f,"px;\n      background-color: ").concat(p,";\n    }\n    .bb-capture-preview-retrybutton:hover {\n      background-color: ").concat(h,";\n    }\n    @keyframes bb-suc-fill {\n      100% {\n        box-shadow: inset 0px 0px 0px 30px ").concat(e,";\n      }\n    }\n    .bb-capture-toolbar-item-spacer {\n      background-color: ").concat(p,";\n    }\n    .bb-tooltip {\n      border-radius: ").concat(b,"px;\n    }\n    @keyframes bbRecIconFade {\n      0% {\n        fill: transparent;\n      }\n      50% {\n        fill: ").concat(h,";\n      }\n      100% {\n        fill: transparent;\n      }\n    }\n    .bb-capture-preview-sendbutton {\n      color: ").concat(s,";\n      background-color: ").concat(e,";\n      border-radius: ").concat(f,"px;\n    }\n    .bb-capture-button-next {\n      color: ").concat(s,";\n      background-color: ").concat(e,";\n      border-radius: ").concat(v,"px;\n    }\n    .bb-capture-preview-inner {\n      background-color: ").concat(o,";\n      border-radius: ").concat(b,"px;\n    }\n    .bb-capture-toolbar-item-timer {\n      color: ").concat(d,";\n    }\n    .bb-svg-path {\n      fill: ").concat(l,";\n    }\n    .bb-capture-toolbar-item {\n      border-radius: ").concat(b,"px;\n    }\n    .bb-capture-toolbar {\n      background-color: ").concat(o,";\n      border-radius: ").concat(b,"px;\n    }\n    .bb-capture-toolbar-item-colorpicker {\n      background-color: ").concat(o,";\n    }\n    .bb-capture-toolbar-item--active {\n      background-color: ").concat(p,";\n    }\n    .bb-feedback-button-classic {\n      border-top-left-radius: ").concat(b,"px;\n      border-top-right-radius: ").concat(b,"px;\n    }\n    .bb-logo-logo--default path {\n      fill: ").concat(c,";\n    }\n    .bb-logo-arrowdown {\n      fill: ").concat(c,";\n    }\n    .bb-feedback-button-icon {\n        background-color: ").concat(n,";\n    }\n    .bb-feedback-button-classic {\n      background-color: ").concat(n,";\n      color: ").concat(c,";\n    }\n\n    @media only screen and (max-width: 450px) {\n      .gleap-frame-container {\n        left: 0px;\n        right: 0px;\n        width: 100vw;\n        min-height: 100vh;\n        min-height: -webkit-fill-available;\n        top: 0px;\n        bottom: 0px;\n        border-radius: 0px;\n        animation-name: gleapFadeInUpMobile;\n      }\n\n      .gleap-frame-container-inner {\n        width: 100vw;\n        height: 100%;\n      }\n\n      .gleap-frame-container:not(.gleap-frame-container--survey):not(.gleap-frame-container--survey-full) .gleap-frame-container-inner {\n        max-height: initial !important;\n      }\n\n      .gleap-frame-container--survey {\n        height: auto !important;\n        top: initial !important;\n        bottom: 0px !important;\n        min-height: initial !important;\n      }\n\n      .gleap-frame-container--survey .gleap-frame-container-inner {\n        height: 100vh !important;\n      }\n\n      .bb-tooltip {\n        display: none !important;\n      }\n    \n      .bb-capture-toolbar-item-colorpicker {\n        top: 75px;\n      }\n    \n      .bb-capture-button-next {\n        margin-left: auto;\n      }\n    \n      .bb-capture-dismiss {\n        display: none;\n      }\n    \n      .bb-capture-toolbar {\n        top: 15px;\n        right: 15px;\n        left: 15px;\n        width: auto;\n        transform: none;\n      }\n    \n      .bb-capture-editor-drag-info {\n        display: none;\n      }\n    \n      .bb-capture-editor-borderlayer {\n        border-width: 4px;\n      }\n    }\n    \n    @media print {\n      .bb-feedback-button {\n        display: none !important;\n      }\n      \n      .gleap-frame-container {\n        display: none !important;\n      }\n    }\n    "),m=document.querySelector(".gleap-styles");m&&m.remove();var y=document.createElement("style");y.innerHTML=g,y.className="gleap-styles",document.body.appendChild(y)},s=function(e,t){return"button"===e?'<svg class="bb-logo-logo bb-logo-logo--default" width="700px" height="700px" viewBox="0 0 700 700" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(77.000000, 119.000000)" fill="#FFFFFF" fill-rule="nonzero">\n            <path d="M476.856373,0 L68.122339,0 C30.601832,0 0,30.5935323 0,67.1461527 L0,372.655827 C0,410.166158 30.601832,439.80198 68.122339,439.80198 L170.305847,439.80198 L170.305847,528.23059 C170.305847,538.605788 182.280477,544.671288 190.657396,538.552581 L323.602398,438.844269 L476.877661,438.844269 C514.398168,438.844269 545,408.250737 545,371.698116 L545,67.1461527 C544.978712,30.5935323 515.28163,0 476.856373,0 Z"></path>\n        </g>\n    </g>\n</svg>':"dismiss"===e?'<svg width="1200pt" height="1200pt" version="1.1" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">\n    <path d="m684 600 439.2-439.2c22.801-22.801 22.801-60 0-84s-60-22.801-84 0l-439.2 439.2-439.2-439.2c-22.801-22.801-60-22.801-84 0s-22.801 60 0 84l439.2 439.2-439.2 439.2c-22.801 22.801-22.801 60 0 84 12 12 26.398 16.801 42 16.801 15.602 0 30-6 42-16.801l439.2-439.2 439.2 439.2c12 12 26.398 16.801 42 16.801 15.602 0 30-6 42-16.801 22.801-22.801 22.801-60 0-84z" fill="#333"/>\n   </svg>':"blur"===e?'<svg width="1200pt" height="1200pt" version="1.1" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">\n <path class="bb-svg-path" d="m602.25 1200c238.2 0 435.95-193.26 435.95-435.95 0-269.66-220.23-615.73-435.95-764.05-220.23 161.8-440.45 485.39-440.45 764.05 0 242.7 197.75 435.95 440.45 435.95zm-260.68-382.02c0 112.36 89.887 206.74 206.74 206.74v62.922c-148.32 0-274.16-121.35-274.16-269.66z" fill="#333"/>\n</svg>':"pen"===e?'<svg width="1072px" height="1034px" viewBox="0 0 1072 1034" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-907.000000, -217.000000)" fill-rule="nonzero">\n            <g transform="translate(907.268457, 217.009827)">\n                <g transform="translate(132.335119, 0.000000)" fill="#000" class="bb-svg-path">\n                    <path d="M20.3764235,730.530173 L10.1884235,720.342173 C-0.791576454,709.362173 -3.16357645,692.432173 4.37592355,678.858173 L83.1809235,537.018173 C71.7589235,502.979173 82.3098335,463.998173 112.254924,440.706173 L655.334924,18.3161733 C689.951924,-8.6058267 739.197924,-5.5388267 770.214924,25.4684733 L913.774924,169.028473 C944.782924,200.040473 947.848924,249.286473 920.927224,283.908473 L498.537224,826.988473 C496.322424,829.836173 493.935624,832.543173 491.384924,835.090073 C467.271924,859.207073 432.513924,866.195073 402.232924,856.063073 L260.382924,934.868073 C246.804924,942.407173 229.874924,940.036073 218.894924,929.055573 L208.706924,918.867573 L20.3764235,730.530173 Z M866.006424,241.190173 C871.393124,234.264373 870.779824,224.417173 864.576724,218.213173 L721.016724,74.6531733 C714.813624,68.4500733 704.965724,67.8367733 698.043724,73.2234733 L154.963724,495.613473 C147.381724,501.507973 146.018424,512.433473 151.912924,520.015473 C152.358234,520.585783 152.834804,521.128773 153.346524,521.636573 L417.586524,785.886573 C424.379524,792.675673 435.391524,792.675673 442.180524,785.886573 C442.692244,785.374853 443.168804,784.831873 443.610224,784.265473 L866.006424,241.190173 Z M342.796424,809.480173 L129.746424,596.430173 L77.9264235,689.707173 L249.516424,861.297173 L342.796424,809.480173 Z"></path>\n                </g>\n                <g transform="translate(-0.000000, 755.530173)" fill="#EB144C">\n                    <path d="M124.711543,0 L313.042043,188.3374 L233.288043,268.0914 C222.003043,279.3764 204.483043,281.5324 190.800043,273.3219 L16.8900429,168.9719 C-2.51595711,157.3309 -5.80895711,130.5499 10.1908429,114.5499 L124.711543,0 Z" class="bb-pen-tip"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>':"rect"===e?'<svg width="339px" height="241px" viewBox="0 0 339 241" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-0.000865, 0.000000)" fill-rule="nonzero">\n            <g transform="translate(0.000865, 0.000000)" fill="#000000" class="bb-svg-path">\n                <path d="M339,0 L339,241 L0,241 L0,0 L339,0 Z M312.826351,26.168387 L26.1855674,26.168387 L26.1855674,214.41156 L312.826351,214.41156 L312.826351,26.168387 Z"></path>\n            </g>\n            <g transform="translate(0.000000, 83.206095)" fill="#EB144C" class="bb-pen-tip">\n                <path d="M0,0 L26.186,26.186 L26.1864325,131.205465 L131.204,131.205 L157.792,157.793 L0.000865118243,157.793905 L0,0 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>':"pointer"===e?'<svg width="1200pt" height="1200pt" version="1.1" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">\n    <path d="m1050.7 508.95-225.94 157.5 160.31 160.31c4.4531 4.4531 6.9141 10.43 6.9141 16.758s-2.4609 12.305-6.9141 16.758l-126.09 126.09c-4.4531 4.4531-10.43 6.9141-16.758 6.9141-6.3281 0-12.188-2.4609-16.758-6.9141l-160.2-160.43-157.62 225.94c-3.3984 4.9219-9.0234 7.8516-14.883 7.8516-0.70313 0-1.5234 0-2.2266-0.11719-6.7969-0.82031-12.422-5.2734-14.766-11.719l-333.16-880.55c-2.5781-6.6797-0.9375-14.297 4.2188-19.336 5.0391-5.0391 12.656-6.6797 19.336-4.2188l880.66 333.05c6.3281 2.3438 10.781 8.0859 11.602 14.766 0.82031 6.7969-2.1094 13.359-7.7344 17.344z" fill="#333"/>\n   </svg>':"clip"===e?'<svg width="600px" height="1126px" viewBox="0 0 600 1126" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-0.002000, 0.501000)" fill="#333333" fill-rule="nonzero">\n            <path d="M225.002,1124.999 C165.33,1124.999 108.102,1101.292 65.902,1059.097 C23.707,1016.902 5.68434189e-14,959.671 5.68434189e-14,899.997 L5.68434189e-14,299.997 C5.68434189e-14,220.431 31.605,144.127 87.867,87.867 C144.129,31.605 220.437,-4.26325641e-14 299.997,-4.26325641e-14 C379.557,-4.26325641e-14 455.867,31.605 512.127,87.867 C568.389,144.129 599.994,220.437 599.994,299.997 L599.994,1012.497 C599.994,1025.895 592.8456,1038.274 581.244,1044.974 C569.642,1051.6732 555.346,1051.6732 543.744,1044.974 C532.142,1038.2748 524.994,1025.896 524.994,1012.497 L524.994,299.997 C524.994,240.325 501.287,183.097 459.092,140.897 C416.897,98.702 359.666,74.995 299.992,74.995 C240.318,74.995 183.092,98.702 140.892,140.897 C98.697,183.092 74.99,240.323 74.99,299.997 L74.99,899.997 C74.99,953.587 103.58,1003.107 149.99,1029.897 C196.4,1056.694 253.58,1056.694 299.99,1029.897 C346.4,1003.104 374.99,953.585 374.99,899.997 L374.99,337.497 C374.99,310.704 360.697,285.942 337.49,272.544 C314.283,259.149 285.697,259.149 262.49,272.544 C239.283,285.942 224.99,310.704 224.99,337.497 L224.99,824.997 C224.99,838.395 217.8416,850.774 206.24,857.474 C194.638,864.1732 180.342,864.1732 168.74,857.474 C157.138,850.7748 149.99,838.396 149.99,824.997 L149.99,337.497 C149.99,283.907 178.58,234.387 224.99,207.597 C271.4,180.8 328.58,180.8 374.99,207.597 C421.4,234.39 449.99,283.909 449.99,337.497 L449.99,899.997 C449.99,959.669 426.283,1016.897 384.088,1059.097 C341.893,1101.292 284.662,1124.999 224.988,1124.999 L225.002,1124.999 Z" id="Path"></path>\n        </g>\n    </g>\n</svg>':"mic"===e?'<svg\n    width="1200pt"\n    height="1200pt"\n    version="1.1"\n    viewBox="0 0 1200 1200"\n    xmlns="http://www.w3.org/2000/svg"\n  >\n    <g class="bb-svg-path">\n      <path\n        d="m600 862.5c144.75 0 262.5-117.75 262.5-262.5v-300c0-144.75-117.75-262.5-262.5-262.5s-262.5 117.75-262.5 262.5v300c0 144.75 117.75 262.5 262.5 262.5z"\n      />\n      <path\n        d="m1012.5 600c0-20.707-16.793-37.5-37.5-37.5s-37.5 16.793-37.5 37.5c0 186.11-151.41 337.5-337.5 337.5s-337.5-151.39-337.5-337.5c0-20.707-16.793-37.5-37.5-37.5s-37.5 16.793-37.5 37.5c0 214.8 165.08 391.57 375 410.6v114.4c0 20.727 16.793 37.5 37.5 37.5s37.5-16.773 37.5-37.5v-114.4c209.92-19.031 375-195.8 375-410.6z"\n      />\n    </g>\n  </svg>':"camera"===e?'<svg width="1155px" height="1004px" viewBox="0 0 1155 1004" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g fill="#333333" fill-rule="nonzero">\n            <g transform="translate(128.324095, 0.000000)">\n                <path d="M42.7803063,0.00413459787 C31.4357421,0.00413459787 20.5549853,4.41399115 12.5336107,12.2572687 C4.51223664,20.1005462 0.00420584816,30.741831 0.00420584816,41.8370305 L0.00420584816,251.00151 C-0.156199045,262.200455 4.27736739,272.989996 12.315738,280.963903 C20.3585574,288.938257 31.3288589,293.431222 42.7803063,293.431222 C54.2317532,293.431222 65.2018267,288.938592 73.2448746,280.963903 C81.2832452,272.989549 85.7172445,262.200455 85.5564062,251.00151 L85.5564062,83.6699265 L256.660808,83.6699265 C268.112255,83.8267939 279.145066,79.4909873 287.298762,71.6298611 C295.452913,63.7643845 300.04718,53.0359758 300.04718,41.8370305 C300.04718,30.6380854 295.453255,19.9098998 287.298762,12.0441998 C279.144611,4.18307356 268.112255,-0.153157091 256.660808,0.00413459787 L42.7803063,0.00413459787 Z"></path>\n                <path d="M983.227131,710.59444 C971.895913,710.764382 961.099907,715.326799 953.20401,723.279287 C945.312674,731.227538 940.964345,741.91668 941.119476,752.99849 L941.119476,920.330075 L770.015075,920.330075 C758.563631,920.173205 747.530815,924.509015 739.377123,932.370139 C731.222968,940.235615 726.628705,950.964028 726.628705,962.16297 C726.628705,973.361918 731.222627,984.090105 739.377123,991.955802 C747.531272,999.816926 758.563631,1004.15316 770.015075,1003.99587 L983.895579,1003.99587 C995.24014,1003.99587 1006.1209,999.586011 1014.14227,991.742733 C1022.16365,983.899455 1026.67168,973.258169 1026.67168,962.16297 L1026.67168,752.99849 C1026.83208,741.690223 1022.30053,730.801401 1014.11489,722.812989 C1005.93394,714.825472 994.790363,710.415949 983.227131,710.59444 L983.227131,710.59444 Z"></path>\n                <path d="M983.227131,375.93127 C971.895913,376.101212 961.099907,380.66363 953.20401,388.61612 C945.312674,396.56437 940.964345,407.253512 941.119476,418.335325 L941.119476,585.66691 C940.959072,596.865853 945.39264,607.655394 953.431008,615.629303 C961.47383,623.603658 972.444131,628.096618 983.895579,628.096618 C995.347023,628.096618 1006.3171,623.603989 1014.36015,615.629303 C1022.39852,607.654947 1026.83251,596.865853 1026.67168,585.66691 L1026.67168,418.335325 C1026.83208,407.027056 1022.30053,396.138232 1014.11489,388.149822 C1005.93394,380.162305 994.790363,375.752783 983.227131,375.93127 L983.227131,375.93127 Z"></path>\n                <path d="M769.974012,0.00413459787 C758.522563,-0.152733184 747.489752,4.18307356 739.336055,12.0441998 C731.181906,19.9096767 726.587637,30.6380854 726.587637,41.8370305 C726.587637,53.0359758 731.181564,63.7641611 739.336055,71.6298611 C747.490209,79.4909873 758.522563,83.8272181 769.974012,83.6699265 L941.078414,83.6699265 L941.078414,251.00151 C940.918009,262.200455 945.351572,272.989996 953.389945,280.963903 C961.432763,288.938257 972.403063,293.431222 983.854512,293.431222 C995.30596,293.431222 1006.27603,288.938592 1014.31908,280.963903 C1022.35745,272.989549 1026.79145,262.200455 1026.63061,251.00151 L1026.63061,41.8370305 C1026.63061,30.7426118 1022.12133,20.1017733 1014.10121,12.2572687 C1006.08109,4.41276405 995.199876,0.00413459787 983.854512,0.00413459787 L769.974012,0.00413459787 Z"></path>\n                <path d="M427.765208,0.00413459787 C416.31376,-0.152733184 405.280949,4.18307356 397.127256,12.0441998 C388.973102,19.9096767 384.378838,30.6380854 384.378838,41.8370305 C384.378838,53.0359758 388.972761,63.7641611 397.127256,71.6298611 C405.281406,79.4909873 416.31376,83.8272181 427.765208,83.6699265 L598.86961,83.6699265 C610.321058,83.8267939 621.35387,79.4909873 629.507562,71.6298611 C637.661716,63.7643845 642.255985,53.0359758 642.255985,41.8370305 C642.255985,30.6380854 637.662058,19.9098998 629.507562,12.0441998 C621.353413,4.18307356 610.321058,-0.153157091 598.86961,0.00413459787 L427.765208,0.00413459787 Z"></path>\n            </g>\n            <g transform="translate(0.000000, 427.000000)">\n                <path d="M768.516184,22.1826583 C752.659627,13.73125 732.573775,13.73125 717.773442,24.29375 L562.379192,124.6375 L562.379192,31.6875 C562.379192,13.7330104 548.635081,0 530.666079,0 L31.7131123,0 C13.7441105,0 0,13.7330104 0,31.6875 L0,475.3125 C0,493.26699 13.7441105,507 31.7131123,507 L530.666079,507 C548.635081,507 562.379192,493.26699 562.379192,475.3125 L562.379192,382.3625 L717.773442,482.70625 C726.231681,487.9875 735.742444,491.157658 745.257258,491.157658 C753.715498,491.157658 761.113815,489.046567 769.572406,484.820862 C786.485185,475.313732 796,458.414612 796,439.400352 L796,68.6566021 C794.943601,48.5869719 785.428963,31.6878521 768.516184,22.1807219 L768.516184,22.1826583 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>':"recorderon"===e?'<svg width="1251px" height="1251px" viewBox="0 0 1251 1251" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g>\n            <circle fill="#E31810" cx="625.5" cy="625.5" r="625.5"></circle>\n            <circle fill="#F71008" cx="625" cy="625" r="507"></circle>\n            <g transform="translate(175.000000, 449.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M0,347.097493 L0,4.90250696 L135.528311,4.90250696 C161.471024,4.90250696 183.639743,9.49741034 202.034469,18.6872171 C220.429194,27.8770239 234.46286,40.8541449 244.135466,57.6185803 C253.808072,74.3830156 258.644376,94.0714804 258.644376,116.683975 C258.644376,139.40786 253.724206,158.929238 243.883867,175.248107 C234.043527,191.566976 219.814173,204.070682 201.195803,212.759227 C182.577434,221.447772 160.073248,225.792044 133.683247,225.792044 L42.9396629,225.792044 L42.9396629,167.64563 L121.941933,167.64563 C135.807866,167.64563 147.325536,165.751973 156.494943,161.964659 C165.66435,158.177344 172.51345,152.496373 177.042243,144.921744 C181.571035,137.347116 183.835432,127.934526 183.835432,116.683975 C183.835432,105.322032 181.571035,95.7423543 177.042243,87.9449425 C172.51345,80.1475308 165.636395,74.2159282 156.411077,70.1501349 C147.185759,66.0843416 135.584222,64.051445 121.606467,64.051445 L72.6284142,64.051445 L72.6284142,347.097493 L0,347.097493 Z M185.512762,191.37204 L270.888889,347.097493 L190.712487,347.097493 L107.181424,191.37204 L185.512762,191.37204 Z"></path>\n                <polygon points="309.166667 347.097493 309.166667 4.90250696 540.126846 4.90250696 540.126846 64.5527072 381.634607 64.5527072 381.634607 146.091356 528.244113 146.091356 528.244113 205.741556 381.634607 205.741556 381.634607 287.447293 540.796296 287.447293 540.796296 347.097493"></polygon>\n                <path d="M901,124.638783 L827.757943,124.638783 C826.420189,115.158428 823.68894,106.709759 819.564197,99.2927757 C815.439454,91.8757921 810.144176,85.5462611 803.678363,80.3041825 C797.212549,75.0621039 789.77129,71.0468948 781.354585,68.2585551 C772.93788,65.4702155 763.824427,64.0760456 754.014228,64.0760456 C736.288981,64.0760456 720.849065,68.4537389 707.69448,77.2091255 C694.539894,85.964512 684.339516,98.6793409 677.093346,115.353612 C669.847176,132.027883 666.224091,152.243346 666.224091,176 C666.224091,200.425856 669.875046,220.948035 677.176956,237.56654 C684.478866,254.185044 694.707113,266.732573 707.861699,275.209125 C721.016285,283.685678 736.233242,287.923954 753.51257,287.923954 C763.21129,287.923954 772.213263,286.641318 780.518488,284.076046 C788.823714,281.510773 796.209233,277.746515 802.675047,272.78327 C809.14086,267.820025 814.519748,261.769328 818.81171,254.631179 C823.103672,247.493029 826.08575,239.351077 827.757943,230.205323 L901,230.539924 C899.104848,246.26616 894.394837,261.406844 886.869968,275.961977 C879.3451,290.51711 869.256201,303.510773 856.603274,314.942966 C843.950346,326.375158 828.900608,335.409379 811.45406,342.045627 C794.007513,348.681876 774.303504,352 752.342035,352 C721.796641,352 694.512024,345.084918 670.488184,331.254753 C646.464343,317.424588 627.512821,297.404309 613.633619,271.193916 C599.754416,244.983523 592.814815,213.252218 592.814815,176 C592.814815,138.636248 599.838026,106.849176 613.884448,80.6387833 C627.93087,54.4283904 646.993871,34.4359949 671.073451,20.661597 C695.153031,6.88719899 722.242559,0 752.342035,0 C772.185393,0 790.607387,2.78833967 807.608016,8.36501901 C824.608646,13.9416984 839.686254,22.0557668 852.840839,32.7072243 C865.995425,43.3586819 876.72533,56.3802281 885.030556,71.7718631 C893.335782,87.1634981 898.65893,104.785805 901,124.638783 Z"></path>\n            </g>\n        </g>\n    </g>\n</svg>':"recorderoff"===e?'<svg width="1251px" height="1251px" viewBox="0 0 1251 1251" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g class="bb-rec-on-circle" fill="#EEEEEE" fill-rule="nonzero">\n              <path d="M625.5,0 C970.954111,0 1251,280.045889 1251,625.5 C1251,970.954111 970.954111,1251 625.5,1251 C280.045889,1251 0,970.954111 0,625.5 C0,280.045889 280.045889,0 625.5,0 Z M626,124 C348.753056,124 124,348.753056 124,626 C124,903.246944 348.753056,1128 626,1128 C903.246944,1128 1128,903.246944 1128,626 C1128,348.753056 903.246944,124 626,124 Z"></path>\n          </g>\n          <g class="bb-rec-on-cont" fill="#E31810" transform="translate(86.000000, 86.000000)" fill-rule="nonzero">\n              <path d="M540,0 C241.2,0 0,241.2 0,540 C0,838.8 241.2,1080 540,1080 C838.8,1080 1080,838.8 1080,540 C1080,241.2 838.8,0 540,0 Z M777.6,741.6 C777.6,761.998 761.998,777.6 741.6,777.6 L338.4,777.6 C318.002,777.6 302.4,761.998 302.4,741.6 L302.4,338.4 C302.4,318.002 318.002,302.4 338.4,302.4 L741.6,302.4 C761.998,302.4 777.6,318.002 777.6,338.4 L777.6,741.6 Z"></path>\n          </g>\n      </g>\n  </svg>':"arrowdown"===e?'<svg class="bb-logo-arrowdown" fill="'.concat(t,'" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <path d="m50 77.637c-1.3477 0-2.6953-0.51562-3.7266-1.543l-44.73-44.73c-2.0586-2.0586-2.0586-5.3945 0-7.4531 2.0586-2.0586 5.3945-2.0586 7.4531 0l41.004 41 41.004-41c2.0586-2.0586 5.3945-2.0586 7.4531 0 2.0586 2.0586 2.0586 5.3945 0 7.4531l-44.73 44.727c-1.0312 1.0312-2.3789 1.5469-3.7266 1.5469z"/>\n   </svg>'):"arrowleft"===e?'<svg fill="'.concat(t,'" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <path d="m70.988 1.6211c2.1875-2.168 5.7344-2.168 7.9297 0 2.1836 2.168 2.1836 5.7227 0 7.8906l-46.016 40.445 46.016 40.5c2.1836 2.168 2.1836 5.668 0 7.8906-2.1953 2.168-5.7383 2.168-7.9297 0l-50.039-44.109c-1.168-1.168-1.668-2.7227-1.5898-4.2773-0.078125-1.5 0.42188-3.0547 1.5898-4.2227l50.039-44.109z" fill-rule="evenodd"/>\n   </svg>'):"close"===e?'<svg fill="'.concat(t,'" width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <path d="m72.812 33.02l-5.832-5.832-16.98 16.875-16.98-16.875-5.832 5.832 16.875 16.98-16.875 16.98 5.832 5.832 16.98-16.875 16.98 16.875 5.832-5.832-16.875-16.98z"/>\n   </svg>'):"undo"===e?'<svg width="62px" height="60px" viewBox="0 0 62 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n      <g class="bb-svg-path" transform="translate(-0.000500, 0.001926)" fill-rule="nonzero">\n        <path d="M28.0005,51.6270739 C24.9653,51.0684839 22.0825,49.8731739 19.5396,48.1192739 L13.8208,53.8380739 C17.9536,57.0060739 22.8403,59.0333739 28.0008,59.7286739 L28.0005,51.6270739 Z" id="Path"></path>\n        <path d="M2.2705,33.9980739 C2.96581,39.1582739 4.9932,44.0450739 8.1611,48.1780739 L13.8799,42.4592739 C12.126,39.9162739 10.9307,37.0334739 10.3721,33.9983739 L2.2705,33.9980739 Z" id="Path"></path>\n        <path d="M61.7305,33.9980739 L53.6289,33.9980739 C53.07031,37.0332739 51.875,39.9160739 50.1211,42.4589739 L55.8399,48.1777739 C59.0079,44.0449739 61.0352,39.1582739 61.7305,33.9977739 L61.7305,33.9980739 Z" id="Path"></path>\n        <path d="M4.0005,24.9980739 L24.0005,24.9980739 L24.0005,16.9980739 L14.27,16.9980739 C17.6762,12.3613739 22.7622,9.24417393 28.442,8.31057393 C34.1178,7.38088393 39.934,8.70901393 44.645,12.0175739 C49.352,15.3222739 52.5786,20.3417739 53.6294,25.9975739 L61.731,25.9975739 C60.6646,18.0834739 56.4888,10.9235739 50.129,6.09957393 C43.7657,1.27147393 35.746,-0.818426068 27.836,0.290973932 C19.9298,1.39647393 12.793,5.61127393 8,11.9979739 L8,0.997973932 L-3.55271368e-15,0.997973932 L-3.55271368e-15,20.9979739 C-3.55271368e-15,22.0604739 0.42188,23.0760739 1.1719,23.8260739 C1.92192,24.5760739 2.9375,24.9979739 4,24.9979739 L4.0005,24.9980739 Z" id="Path"></path>\n        <path d="M36.0005,51.6270739 L36.0005,59.7286739 C41.1607,59.0333639 46.0475,57.0059739 50.1805,53.8380739 L44.4617,48.1192739 C41.9187,49.8731739 39.0359,51.0684739 36.0008,51.6270739 L36.0005,51.6270739 Z" id="Path"></path>\n      </g>\n    </g>\n  </svg>':""};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"startTimestamp",Date.now()),u(this,"requestId",0),u(this,"requests",{}),u(this,"maxRequests",10),u(this,"filters",[]),u(this,"blacklist",["gleap.io"]),u(this,"initialized",!1),u(this,"stopped",!1),u(this,"loadAllResources",!1)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"setLoadAllResources",value:function(e){this.loadAllResources=e}},{key:"isContentTypeSupported",value:function(e){if("string"!=typeof e)return!1;if(""===e)return!0;e=e.toLocaleLowerCase();for(var t=["text/","xml","json"],n=0;n<t.length;n++)if(e.includes(t[n]))return!0;return!1}},{key:"getRequests",value:function(){var e=this,t=JSON.parse(JSON.stringify(Object.values(this.requests)));if(this.filters&&this.filters.length>0)for(var n=0;n<t.length;n++){var r=t[n];if(r&&r.request&&r.request.headers)for(var i=0;i<this.filters.length;i++)delete r.request.headers[this.filters[i]];if(r&&r.request&&r.request.payload){var a=r.request.payload;try{a=JSON.parse(r.request.payload)}catch(l){}if(a){for(i=0;i<this.filters.length;i++)delete a[this.filters[i]];r.request.payload=JSON.stringify(a)}}if(r&&r.response&&r.response.responseText)try{var o=JSON.parse(r.response.responseText);for(i=0;i<this.filters.length;i++)delete o[this.filters[i]];r.response.responseText=JSON.stringify(o)}catch(l){}}try{if("undefined"!=typeof window&&window.performance){var s=window.performance.getEntriesByType("resource");for(n=0;n<s.length;n++){var c=s[n];c&&c.name&&(this.loadAllResources||["xmlhttprequest","fetch"].indexOf(c.initiatorType)>-1)&&!t.find((function(e){return e.url===c.name}))&&t.push({type:"RESOURCE",date:new Date(this.startTimestamp+c.startTime),url:c.name,duration:Math.round(c.duration),initiatorType:c.initiatorType})}}}catch(u){}return this.blacklist&&this.blacklist.length>0&&(t=t.filter((function(t){for(var n=0;n<e.blacklist.length;n++)if(t.url&&t.url.includes(e.blacklist[n]))return!1;return!0}))),t}},{key:"setMaxRequests",value:function(e){this.maxRequests=e}},{key:"setStopped",value:function(e){this.stopped=e}},{key:"setFilters",value:function(e){this.filters=e||[]}},{key:"setBlacklist",value:function(e){this.blacklist=e||[]}},{key:"cleanRequests",value:function(){var e=Object.keys(this.requests);if(e.length>this.maxRequests)for(var t=e.slice(0,e.length-this.maxRequests),n=0;n<t.length;n++)delete this.requests[t[n]]}},{key:"calcRequestTime",value:function(e){if(e&&this.requests&&this.requests[e]){var t=this.requests[e].date;t&&(this.requests[e].duration=(new Date).getTime()-t.getTime())}}},{key:"getTextContentSize",value:function(e){return(new TextEncoder).encode(e).length/1024/1024}},{key:"cleanupContentSize",value:function(e){return this.getTextContentSize(e)>.2?"<content_too_large>":e}},{key:"cleanupPayload",value:function(e){if(null==e)return"{}";try{if(void 0!==("undefined"==typeof TextDecoder?"undefined":c(TextDecoder))&&ArrayBuffer.isView(e))return(new TextDecoder).decode(e)}catch(t){}return e}},{key:"preparePayload",value:function(e){var t=this.cleanupPayload(e);return this.cleanupContentSize(t)}},{key:"start",value:function(){var e=this;if(!this.initialized){this.initialized=!0;var t=this;this.interceptNetworkRequests({onFetch:function(n,r){if(!e.stopped&&r&&e.requests){if(n.length>0&&void 0!==n[0]&&void 0!==n[0].url)e.requests[r]={url:n[0].url,date:new Date,request:{payload:"",headers:void 0!==n[0].headers?Object.fromEntries(n[0].headers.entries()):{}},type:void 0!==n[0].method?n[0].method:""};else if(n.length>=2&&n[1]){var i=n[1]&&n[1].method?n[1].method:"GET";e.requests[r]={request:{payload:t.preparePayload(n[1].body),headers:n[1].headers},type:i,url:n[0],date:new Date}}else e.requests[r]={url:n[0],date:new Date};e.cleanRequests()}},onFetchLoad:function(n,r){if(!e.stopped&&r&&e.requests&&e.requests[r]){try{e.requests[r].success=!0,e.requests[r].response={status:n.status,statusText:"",responseText:"<request_still_open>"},e.calcRequestTime(r)}catch(a){}try{var i="";n.headers&&void 0!==n.headers.get&&(i=n.headers.get("content-type")),e.isContentTypeSupported(i)?n.text().then((function(i){e.requests[r]&&(e.requests[r].success=!0,e.requests[r].response={status:n.status,statusText:n.statusText,responseText:t.cleanupContentSize(i)}),e.calcRequestTime(r),e.cleanRequests()})).catch((function(t){e.cleanRequests()})):(e.requests[r]&&(e.requests[r].success=!0,e.requests[r].response={status:n.status,statusText:n.statusText,responseText:"<content_type_not_supported>"}),e.calcRequestTime(r),e.cleanRequests())}catch(a){}}},onFetchFailed:function(t,n){!e.stopped&&n&&e.requests&&e.requests[n]&&(e.requests[n].success=!1,e.calcRequestTime(n),e.cleanRequests())},onOpen:function(t,n){e.stopped||(t&&t.bbRequestId&&n.length>=2&&e.requests&&(e.requests[t.bbRequestId]={type:n[0],url:n[1],date:new Date}),e.cleanRequests())},onSend:function(t,n){e.stopped||(t&&t.bbRequestId&&e.requests&&e.requests[t.bbRequestId]&&(e.requests[t.bbRequestId].request={payload:e.preparePayload(n.length>0?n[0]:"{}"),headers:t.requestHeaders}),e.cleanRequests())},onError:function(t,n){!e.stopped&&e.requests&&t&&t.currentTarget&&t.currentTarget.bbRequestId&&e.requests[t.currentTarget.bbRequestId]&&(e.requests[t.currentTarget.bbRequestId].success=!1,e.calcRequestTime(t.bbRequestId)),e.cleanRequests()},onLoad:function(t,n){if(!e.stopped){if(t&&t.currentTarget&&t.currentTarget.bbRequestId&&e.requests&&e.requests[t.currentTarget.bbRequestId]){var r=t.currentTarget,i=r.responseType,a="<"+i+">";""!==i&&"text"!==i||(a=e.cleanupContentSize(r.responseText)),e.requests[r.bbRequestId].success=!0,e.requests[r.bbRequestId].response={status:r.status,statusText:r.statusText,responseText:a},e.calcRequestTime(r.bbRequestId)}e.cleanRequests()}}})}}},{key:"interceptNetworkRequests",value:function(e){var t,n=this,r=XMLHttpRequest.prototype.open,i=XMLHttpRequest.prototype.send;return XMLHttpRequest.prototype.wrappedSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader,XMLHttpRequest.prototype.setRequestHeader=function(e,t){this.requestHeaders||(this.requestHeaders={}),this.requestHeaders&&this.requestHeaders.hasOwnProperty(e)||(this.requestHeaders[e]||(this.requestHeaders[e]=[]),this.requestHeaders[e].push(t),this.wrappedSetRequestHeader(e,t))},XMLHttpRequest.prototype.open=function(){return this.bbRequestId=++n.requestId,e.onOpen&&e.onOpen(this,arguments),e.onLoad&&this.addEventListener("load",e.onLoad.bind(e)),e.onError&&this.addEventListener("error",e.onError.bind(e)),r.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){return e.onSend&&e.onSend(this,arguments),i.apply(this,arguments)},window.fetch&&(t=window.fetch,window.fetch=function(){var r=++n.requestId;return e.onFetch(arguments,r),t.apply(this,arguments).then((function(t){if(t&&"function"==typeof t.clone){var n=t.clone();e.onFetchLoad(n,r)}return t})).catch((function(t){throw e.onFetchFailed(t,r),t}))}),e}},{key:"blobToTextPromise",value:function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){e&&e.target&&e.target.result?t(e.target.result):n()},r.onerror=function(e){n(e)},r.readAsText(e)}))}}])&&l(t.prototype,n),r&&l(t,r),e}();u(d,"instance",void 0);const p=d;var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;return new Promise((function(r,i){var a=0===e.indexOf("data:image/jpeg"),o=new Image;o.src=e,o.onerror=function(){i()},o.onload=function(){var e=document.createElement("canvas"),i=t,s=n;t>o.width/4&&(i=o.width/4),n>o.height/4&&(s=o.height/4);var c=o.width,l=o.height;c>l?c>i&&(l*=i/c,c=i):l>s&&(c*=s/l,l=s),e.width=c,e.height=l,e.getContext("2d").drawImage(o,0,0,c,l),r(a?e.toDataURL("image/jpeg",.7):e.toDataURL())}}))},f=function(){return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))},b=function(e){if("string"==typeof e||e instanceof String)try{return JSON.parse(e)}catch(t){return{}}return e},v=function(e,t){return e.length>t?e.slice(0,t)+"...":e},g=function(e){try{var t=localStorage.getItem("gleap-widget-".concat(e));if(t)return JSON.parse(t)}catch(n){}return null},m=function(e,t){var n="gleap-widget-".concat(e);if(t)try{localStorage.setItem(n,JSON.stringify(t))}catch(r){}else localStorage.removeItem(n)},y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=v(e.innerText||"",40).replace(/(\r\n|\n|\r)/gm,"").replace(/ +(?= )/g,""),r="",i="";if(void 0!==e.getAttribute){var a=e.getAttribute("id");a&&(r=' id="'.concat(a,'"'));var o=e.getAttribute("class");o&&(i=' class="'.concat(o,'"'))}var s=(e.tagName||"").toLowerCase(),c="<",l=">";return t||(c="[",l="]"),"".concat(c).concat(s).concat(r).concat(i).concat(l).concat(n).concat(c,"/").concat(s).concat(l)};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"apiUrl","https://api.gleap.io"),C(this,"sdkKey",null),C(this,"session",{gleapId:null,gleapHash:null,name:"",email:"",userId:"",value:0}),C(this,"ready",!1),C(this,"onSessionReadyListener",[]),C(this,"setOnSessionReady",(function(e){t.ready?e():t.onSessionReadyListener.push(e)})),C(this,"injectSession",(function(e){e&&t.session&&(e.setRequestHeader("Api-Token",t.sdkKey),e.setRequestHeader("Gleap-Id",t.session.gleapId),e.setRequestHeader("Gleap-Hash",t.session.gleapHash))})),C(this,"clearSession",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{m("session-".concat(t.sdkKey),null)}catch(n){}t.session={id:null,hash:null,type:null,name:"",email:"",value:0},e&&t.startSession()})),C(this,"validateSession",(function(e){e&&(m("session-".concat(t.sdkKey),e),t.session=e,t.ready=!0,t.notifySessionReady())})),C(this,"startSession",(function(){var e=g("session-".concat(t.sdkKey));e&&t.validateSession(e);var n=t,r=new XMLHttpRequest;r.open("POST",n.apiUrl+"/sessions"),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.setRequestHeader("Api-Token",n.sdkKey);try{t.session&&t.session.gleapId&&t.session.gleapHash&&(r.setRequestHeader("Gleap-Id",t.session.gleapId),r.setRequestHeader("Gleap-Hash",t.session.gleapHash))}catch(i){}r.onerror=function(e){n.clearSession(!1)},r.onreadystatechange=function(e){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status||201===r.status)try{var t=JSON.parse(r.responseText);n.validateSession(t)}catch(i){}else n.clearSession(!1)},r.send(JSON.stringify({}))})),C(this,"checkIfSessionNeedsUpdate",(function(e,n){if(!t.session||!t.session.userId||!e)return!0;try{if(t.session.userId.toString()!==e.toString())return!0}catch(o){}if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var a=r[i];if(t.session[a]!==n[a])return!0}return!1})),C(this,"identifySession",(function(e,n,r){if(t.checkIfSessionNeedsUpdate(e,n)){var i=t;return new Promise((function(a,o){t.setOnSessionReady((function(){if(!i.session.gleapId||!i.session.gleapHash)return o();var t=new XMLHttpRequest;t.open("POST",i.apiUrl+"/sessions/identify"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.setRequestHeader("Api-Token",i.sdkKey);try{t.setRequestHeader("Gleap-Id",i.session.gleapId),t.setRequestHeader("Gleap-Hash",i.session.gleapHash)}catch(s){}t.onerror=function(){o()},t.onreadystatechange=function(e){if(t.readyState===XMLHttpRequest.DONE)if(200===t.status||201===t.status)try{var n=JSON.parse(t.responseText);i.validateSession(n),a(n)}catch(s){i.clearSession(!0),o(s)}else i.clearSession(!0),o()},t.send(JSON.stringify(k(k({},n),{},{userId:e,userHash:r})))}))}))}}))}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"getName",value:function(){try{return this.session.name?this.session.name.split(" ")[0].split("@")[0].split(".")[0].split("+")[0]:""}catch(e){return this.session.name}}},{key:"getSession",value:function(){return this.session}},{key:"isUser",value:function(){return!(!this.session||!this.session.userId)}},{key:"notifySessionReady",value:function(){if(this.onSessionReadyListener.length>0)for(var e=0;e<this.onSessionReadyListener.length;e++)this.onSessionReadyListener[e]();this.onSessionReadyListener=[],J.getInstance().sendSessionUpdate()}}])&&x(t.prototype,n),r&&x(t,r),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}C(L,"instance",void 0);var R=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"eventArray",[]),T(this,"streamedEventArray",[]),T(this,"eventMaxLength",500),T(this,"errorCount",0),T(this,"streamingEvents",!1),T(this,"lastUrl",void 0),T(this,"runEventStreamLoop",(function(){var e=t;t.streamEvents(),setTimeout((function(){e.runEventStreamLoop()}),6e3)})),T(this,"streamEvents",(function(){if(!(!L.getInstance().ready||t.streamingEvents||t.errorCount>2)){var e=t;t.streamingEvents=!0;var n=new XMLHttpRequest;n.open("POST",L.getInstance().apiUrl+"/sessions/ping"),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),L.getInstance().injectSession(n),n.onerror=function(t){e.errorCount++,e.streamingEvents=!1},n.onreadystatechange=function(t){if(n.readyState===XMLHttpRequest.DONE){if(200===n.status||201===n.status){e.errorCount=0;try{var r=JSON.parse(n.responseText),i=r.a,a=r.u;J.getInstance().isOpened()||(i&&ft.getInstance().performActions(i),null!=a&&rt.getInstance().setNotificationCount(a))}catch(o){}}else e.errorCount++;e.streamingEvents=!1}};var r=Q.getInstance().getSessionDuration();n.send(JSON.stringify({time:r,events:t.streamedEventArray,opened:J.getInstance().isOpened()})),t.streamedEventArray=[]}}))}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"getEventArray",value:function(){return this.eventArray}},{key:"resetErrorCountLoop",value:function(){var e=this;setInterval((function(){e.errorCount=0}),6e4)}},{key:"start",value:function(){this.startPageListener(),this.runEventStreamLoop(),this.resetErrorCountLoop()}},{key:"logCurrentPage",value:function(){var e=window.location.href;e&&e!==this.lastUrl&&(this.lastUrl=e,this.logEvent("pageView",{page:e}))}},{key:"startPageListener",value:function(){this.logEvent("sessionStarted"),this.logCurrentPage();var e=this;setInterval((function(){e.logCurrentPage()}),1e3)}},{key:"logEvent",value:function(e,t){var n={name:e,date:new Date};t&&(n.data=b(t)),this.eventArray.push(n),this.streamedEventArray.push(n),this.eventArray.length>this.eventMaxLength&&this.eventArray.shift(),this.streamedEventArray.length>this.eventMaxLength&&this.streamedEventArray.shift()}}])&&S(t.prototype,n),r&&S(t,r),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}T(R,"instance",void 0);var O=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"flowConfig",null),E(this,"projectActions",null),E(this,"start",(function(){var e=L.getInstance(),n=g("config-".concat(e.sdkKey));return n?(t.applyConfig(n),t.loadConfigFromServer().catch((function(e){})),Promise.resolve()):t.loadConfigFromServer()})),E(this,"loadConfigFromServer",(function(){var e=t;return new Promise((function(t,n){var r=L.getInstance(),i=new XMLHttpRequest;i.open("GET",r.apiUrl+"/config/"+r.sdkKey),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.injectSession(i),i.onerror=function(){n()},i.onreadystatechange=function(a){if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||201===i.status)try{var o=JSON.parse(i.responseText);try{m("config-".concat(r.sdkKey),o)}catch(s){}return e.applyConfig(o),t()}catch(a){}n()}},i.send()}))}))}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"getFlowConfig",value:function(){return this.flowConfig}},{key:"getProjectActions",value:function(){return this.projectActions}},{key:"applyConfig",value:function(e){try{var t=e.flowConfig,n=e.projectActions;this.flowConfig=t,this.projectActions=n,J.getInstance().sendConfigUpdate(),fe.getInstance().updateFeedbackButtonState(),t.color&&ft.setStyles(t.color,t.headerColor,t.buttonColor,t.backgroundColor?t.backgroundColor:"#FFFFFF",t.borderRadius),t.enableReplays?qe.getInstance().start():qe.getInstance().stop(),t.enableNetworkLogs&&p.getInstance().start(),p.getInstance().setLoadAllResources(!!t.sendNetworkResources),t.networkLogPropsToIgnore&&p.getInstance().setFilters(t.networkLogPropsToIgnore),t.networkLogBlacklist&&p.getInstance().setBlacklist(t.networkLogBlacklist),t.customTranslations&&(Ze.getInstance().setCustomTranslation(t.customTranslations),Ze.getInstance().updateRTLSupport()),ft.enableShortcuts(!!t.enableShortcuts)}catch(r){}}},{key:"getFeedbackOptions",value:function(e){var t=null;e&&(t=this.projectActions[e]),t||(t=this.projectActions.bugreporting);try{t=JSON.parse(JSON.stringify(t))}catch(n){}return t}}])&&I(t.prototype,n),r&&I(t,r),e}();E(O,"instance",void 0);var D=["//fonts.googleapis.com","//cdn.jsdelivr.net","//cdnjs.cloudflare.com","//ajax.googleapis.com","//use.typekit.net",".amazonaws.com","//jssdk.gleap.io",".gstatic.com"],A=function(e){if(!e)return!1;for(var t=0;t<D.length;t++)if(-1!==e.indexOf(D[t]))return!0;return!1},M=function(e,t){return n=e,r=/url\((.*?)\)/g,i=function(e){return new Promise((function(n,r){if(!e)return n(e);var i=e.substr(4,e.length-5).replaceAll("'","").replaceAll('"',"");if(0===i.indexOf("http")||0===i.indexOf("//")||0===i.indexOf("data"))return n(e);try{var a=i;return t&&(a=t+"/"+i),P(a).then((function(e){return n("url("+e+")")}))}catch(o){return n(e)}}))},new Promise((function(e,t){var a=[];n.replace(r,(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=i.apply(void 0,[e].concat(n));a.push(o)})),Promise.all(a).then((function(t){e(n.replace(r,(function(){return t.shift()})))})).catch((function(){t()}))}));var n,r,i},P=function(e){return new Promise((function(t,n){if(e){var r=new XMLHttpRequest;r.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.onerror=function(){n()},e.readAsDataURL(r.response)},r.onerror=function(e){t()},r.open("GET",e),r.responseType="blob",r.send()}else t()}))},F=function(e){return new Promise((function(t,n){if(e&&e.src){if(A(e.src))return t();var r=new XMLHttpRequest;r.onload=function(){var n=new FileReader;n.onloadend=function(){!function(e,t,n,r){h(e,500,500).then((function(e){t.src=e,n()})).catch((function(){console.warn("BB: Image resize failed."),n()}))}(n.result,e,t)},n.onerror=function(){t()},n.readAsDataURL(r.response)},r.onerror=function(e){t()};var i=e.src;r.open("GET",i),r.responseType="blob",r.send()}else t()}))},q=function(e,t,n,r){var i=null;t.ownerNode&&(i=e.querySelector('[bb-styleid="'+r+'"]'));try{if(i){var a=null;if(""!=n){var o=e.querySelector("head"),s=window.document.createElement("style");o.appendChild(s),s.type="text/css",s.styleSheet?s.styleSheet.cssText=n:s.appendChild(window.document.createTextNode(n)),a=s}else{var c=window.document.createElement("link");c.rel="stylesheet",c.type=t.type,c.href=t.href,c.media=t.media,a=c}a&&(i.parentNode.insertBefore(a,i),i.remove())}}catch(l){}},N=function(e){var t=null;try{e.cssRules?t=e.cssRules:e.rules&&(t=e.rules)}catch(i){}var n="";if(t)for(var r in t)t[r].cssText&&(n+=t[r].cssText);return n},j=function(e,t){for(var n=[],r=function(){var e=document.styleSheets[i],r=N(e);if(e&&e.ownerNode)if(""==r||t)n.push(Promise.resolve({styletext:r,stylesheet:e,styleId:e.ownerNode.getAttribute("bb-styleid")}));else{var o=document.getElementsByTagName("base");a=o.length?o[0].href.substr(location.origin.length,999):window.location.href,e.href&&(a=e.href);var s=a.substring(0,a.lastIndexOf("/"));n.push(M(r,s).then((function(t){return{styletext:t,stylesheet:e,styleId:e.ownerNode.getAttribute("bb-styleid")}})))}},i=0;i<document.styleSheets.length;i++){var a;r()}return Promise.all(n).then((function(t){if(t)for(var n=0;n<t.length;n++)q(e,t[n].stylesheet,t[n].styletext,t[n].styleId);return!0}))},B=function(e,t){return new Promise((function(n,r){return t?j(e,t).then((function(){n()})).catch((function(){n()})):function(e){for(var t=e.querySelectorAll("img"),n=[],r=0;r<t.length;r++){var i=t[r];n.push(F(i))}return Promise.all(n)}(e).then((function(){return j(e,t).then((function(){n()}))})).catch((function(){console.warn("Gleap: Failed with resolving local resources. Please contact the Gleap support team."),n()}))}))},U=function(e,t,n){if(void 0!==e.adoptedStyleSheets)for(var r=0;r<e.adoptedStyleSheets.length;r++){var i=e.adoptedStyleSheets[r],a=N(i),o=window.document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=a:o.appendChild(window.document.createTextNode(a)),n&&o.setAttribute("bb-shadow-child",n),t.insertBefore(o,t.firstElementChild)}},H=function(e){return new Promise((function(t,n){for(var r=window.document.querySelectorAll("style, link"),i=0;i<r.length;++i)r[i].setAttribute("bb-styleid",i);var a=function(e){var t=1,n=document.createDocumentFragment();!function e(n,r,i){var a=function(t,n,r){for(;t;)e(t,n,r),t=t.nextSibling},o=n.cloneNode();if(void 0!==o.setAttribute&&(i&&o.setAttribute("bb-shadow-child",i),n instanceof HTMLCanvasElement&&o.setAttribute("bb-canvas-data",n.toDataURL()),n instanceof HTMLCanvasElement&&o.setAttribute("bb-canvas-data",n.toDataURL())),n.nodeType==Node.ELEMENT_NODE){var s=n.tagName?n.tagName.toUpperCase():n.tagName;if("IFRAME"==s||"VIDEO"==s||"EMBED"==s||"IMG"==s||"SVG"==s){var c=n.getBoundingClientRect();o.setAttribute("bb-element",!0),o.setAttribute("bb-height",c.height),o.setAttribute("bb-width",c.width)}if("DIV"==s&&(n.scrollTop>0||n.scrollLeft>0)&&(o.setAttribute("bb-scrollpos",!0),o.setAttribute("bb-scrolltop",n.scrollTop),o.setAttribute("bb-scrollleft",n.scrollLeft)),"SELECT"===s||"TEXTAREA"===s||"INPUT"===s){var l=n.value;"value"===n.getAttribute("gleap-ignore")&&(l=new Array(l.length+1).join("*")),o.setAttribute("bb-data-value",l),"checkbox"!==n.type&&"radio"!==n.type||!n.checked||o.setAttribute("bb-data-checked",!0)}}if(r.appendChild(o),n.shadowRoot){var u=t;t++,a(n.shadowRoot.firstChild,o,u),U(n.shadowRoot,o,u),void 0!==o.setAttribute&&o.setAttribute("bb-shadow-parent",u)}a(n.firstChild,o)}(e,n);var r=n.querySelector("head");return r||(r=n),U(window.document,r),n}(window.document.documentElement),o=a.querySelectorAll("link[rel=import]");for(i=0;i<o.length;++i){var s=o[i];if(s&&s.childNodes&&s.childNodes.length>0){for(var c=s.childNodes;c.length>0;)s.parentNode.insertBefore(c[0],s);s.remove()}}var l=a.querySelectorAll("script, noscript");for(i=0;i<l.length;++i)l[i].remove();var u=a.querySelectorAll("base");for(i=0;i<u.length;++i)u[i].remove();var d=window.location.href.substring(0,window.location.href.lastIndexOf("/"))+"/",p=window.document.createElement("base");p.href=d;var h=a.querySelector("head");h.insertBefore(p,h.firstChild);var b=a.querySelectorAll(".bb-feedback-dialog-container, .bb-capture-editor-borderlayer");for(i=0;i<b.length;++i)b[i].remove();var v=a.querySelectorAll("[bb-element=true]");for(i=0;i<v.length;++i)v[i]&&(v[i].style.height=v[i].getAttribute("bb-height")+"px");B(a,e).then((function(){var e=function(e){var t="",n=window.document.doctype;if(n&&(t="<!DOCTYPE "+n.name+(n.publicId?' PUBLIC "'+n.publicId+'"':"")+(!n.publicId&&n.systemId?" SYSTEM":"")+(n.systemId?' "'+n.systemId+'"':"")+">"),e&&e.childNodes&&e.childNodes.length>0)for(var r=0;r<e.childNodes.length;r++)e.childNodes[r]&&(t+=e.childNodes[r].outerHTML);return t}(a);t({html:e,baseUrl:d,width:window.innerWidth,height:window.innerHeight,isMobile:f()})}))}))};function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"rerender",void 0),_(this,"stream",void 0),_(this,"mediaRecorder",void 0),_(this,"audioMuted",!1),_(this,"audioAvailable",!0),_(this,"available",!0),_(this,"isRecording",!1),_(this,"file",null),_(this,"maxRecordTime",120),_(this,"recordTime",0),_(this,"recordingTimer",null),_(this,"permissionErrorText",""),_(this,"startScreenRecording",(function(){var e=this;if(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia||this.isRecording)return this.available=!1,void this.rerender();navigator.mediaDevices.getDisplayMedia({video:{width:1280},audio:!0}).then((function(t){e.stream=t,e.audioMuted?(e.audioAvailable=!1,e.handleRecord({stream:t})):e.startAudioRecording(),e.rerender()})).catch((function(t){window.alert(e.permissionErrorText),e.rerender()}))})),_(this,"stopScreenRecording",(function(){this.mediaRecorder&&this.stream&&this.isRecording&&(this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null),this.mediaRecorder.stop(),this.stream.getTracks().forEach((function(e){e.stop()})),this.rerender())})),_(this,"startAudioRecording",(function(){var e=this;this.stream&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){for(var n=0;n<t.getAudioTracks().length;n++)e.stream.addTrack(t.getAudioTracks()[n]);e.audioMuted=!1,e.audioAvailable=!0,e.handleRecord({stream:e.stream}),e.rerender()})).catch((function(t){e.audioAvailable=!1,e.handleRecord({stream:e.stream}),e.rerender()}))})),_(this,"toggleAudio",(function(){if(this.audioMuted=!this.audioMuted,this.rerender(),this.stream)for(var e=this.stream.getAudioTracks(),t=0;t<e.length;t++){e[t].enabled=!this.audioMuted}})),_(this,"clearPreview",(function(){document.querySelector(".bb-capture-preview video").src=null,this.file=null,this.rerender()})),_(this,"handleRecord",(function(e){var t=e.stream,n=this,r=[];this.mediaRecorder=new MediaRecorder(t,{mimeType:this.getSupportedMimeType()}),this.isRecording=!0,this.recordTime=0;var i=document.querySelector(".bb-capture-toolbar-item-timer");this.recordingTimer=setInterval((function(){n.recordTime++;var e=n.maxRecordTime-n.recordTime;e>0?i.innerHTML=n.formatTime(e):(i.innerHTML="2:00",n.stopScreenRecording())}),1e3),this.mediaRecorder.ondataavailable=function(e){e.data.size>0&&r.push(e.data)},t.getVideoTracks()[0].onended=function(){n.prepareRecording(r)},this.mediaRecorder.onstop=function(){n.prepareRecording(r)},this.mediaRecorder.start(200),n.rerender()})),_(this,"prepareRecording",(function(e){var t=new Blob(e,{type:this.getSupportedMimeType()});this.file=new File([t],"screen-recording.".concat("video/mp4"===this.getSupportedMimeType()?"mp4":"webm"),{type:this.getSupportedMimeType()});var n=document.querySelector(".bb-capture-preview video");n&&(n.src=URL.createObjectURL(t),this.audioAvailable=!0,this.isRecording=!1,this.rerender())})),this.rerender=t,this.permissionErrorText=n,navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia||(this.available=!1),setTimeout((function(){r.rerender()}),100)}var t,n,r;return t=e,(n=[{key:"getSupportedMimeType",value:function(){return MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":MediaRecorder.isTypeSupported("video/webm;codecs=h264")?"video/webm;codecs=h264":"video/webm"}},{key:"formatTime",value:function(e){return(e-(e%=60))/60+(9<e?":":":0")+e}}])&&z(t.prototype,n),r&&z(t,r),e}();function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_(W,"uploadScreenRecording",(function(e){return new Promise((function(t,n){null==e&&t(null);var r=new XMLHttpRequest;r.open("POST",L.getInstance().apiUrl+"/uploads/sdk"),L.getInstance().injectSession(r);var i=new FormData;i.append("file",e),r.send(i),r.onerror=function(){n()},r.onreadystatechange=function(){4==r.readyState&&(200==r.status?t(JSON.parse(r.response).fileUrl):n())}}))}));var X=function(){function e(t,n,r,i,a,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,"excludeData",{}),K(this,"type","BUG"),K(this,"priority","LOW"),K(this,"customData",{}),K(this,"metaData",{}),K(this,"consoleLog",[]),K(this,"networkLogs",[]),K(this,"customEventLog",[]),K(this,"formData",{}),K(this,"isSilent",!1),K(this,"outboundId",void 0),K(this,"screenshotData",void 0),K(this,"webReplay",void 0),K(this,"screenRecordingUrl",void 0),K(this,"spamToken",void 0),this.type=t,this.priority=n,this.formData=r,this.isSilent=i,this.excludeData=a,this.outboundId=o,this.spamToken=s}var t,n,r;return t=e,(n=[{key:"takeSnapshot",value:function(){var e=this,t=ft.getInstance();this.customData=ge.getInstance().getCustomData(),this.metaData=Q.getInstance().getMetaData(),this.consoleLog=ie.getInstance().getLogs(),this.networkLogs=p.getInstance().getRequests(),this.customEventLog=R.getInstance().getEventArray();var n=[],r=t.getGlobalDataItem("webReplay");null!==r&&(this.webReplay=r);var i,a=t.getGlobalDataItem("screenRecordingData");if(null!=a){var o=W.uploadScreenRecording(a).then((function(t){t&&(e.screenRecordingUrl=t)}));n.push(o)}if(!this.excludeData||!this.excludeData.screenshot){var s=(i=t.isLiveMode(),H(i)).then((function(n){if(n){var r=t.getGlobalDataItem("snapshotPosition");n.x=r.x,n.y=r.y,e.screenshotData=n}}));n.push(s)}return Promise.all(n)}},{key:"getData",value:function(){for(var e={type:this.type,priority:this.priority,customData:this.customData,metaData:this.metaData,consoleLog:this.consoleLog,networkLogs:this.networkLogs,customEventLog:this.customEventLog,formData:this.formData,isSilent:this.isSilent,outbound:this.outboundId,screenshotData:this.screenshotData,webReplay:this.webReplay,screenRecordingUrl:this.screenRecordingUrl,spamToken:this.spamToken},t=Object.keys(this.excludeData),n=0;n<t.length;n++){var r=t[n];!0===this.excludeData[r]&&(e[r]&&delete e[r],"screenshot"===r&&delete e.screenshotData,"replays"===r&&delete e.webReplay)}return e}},{key:"sendFeedback",value:function(){var e=this;return new Promise((function(t,n){e.takeSnapshot().then((function(){var r=e.getData(),i=new XMLHttpRequest;i.open("POST",L.getInstance().apiUrl+"/bugs/v2"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),L.getInstance().injectSession(i),i.onerror=function(e){n()},i.onreadystatechange=function(e){if(i.readyState===XMLHttpRequest.DONE)if(200===i.status||201===i.status)try{var r=JSON.parse(i.responseText);t(r)}catch(a){n()}else n()},i.send(JSON.stringify(r))})).catch((function(e){n()}))}))}}])&&G(t.prototype,n),r&&G(t,r),e}();function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,"frameUrl","https://messenger.gleap.io"),V(this,"gleapFrameContainer",null),V(this,"gleapFrame",null),V(this,"injectedFrame",!1),V(this,"widgetOpened",!1),V(this,"listeners",[]),V(this,"appMode","widget"),V(this,"markerManager",void 0),V(this,"escListener",void 0),V(this,"frameHeight",0),V(this,"injectFrame",(function(){if(!t.injectedFrame){t.injectedFrame=!0;var e=document.createElement("div");e.className="gleap-frame-container gleap-frame-container--hidden gleap-hidden",e.innerHTML='<div class="gleap-frame-container-inner"><iframe src="'.concat(t.frameUrl,'" class="gleap-frame" scrolling="yes" title="Gleap Widget Window" allow="autoplay; encrypted-media; fullscreen;" frameborder="0"></iframe></div>'),document.body.appendChild(e),t.gleapFrameContainer=e,t.gleapFrame=document.querySelector(".gleap-frame"),t.updateFrameStyle()}})),V(this,"updateFrameStyle",(function(){if(t.gleapFrameContainer){for(var e="gleap-frame-container--survey",n="gleap-frame-container--survey-full",r="gleap-frame-container--classic",i="gleap-frame-container--classic-left",a="gleap-frame-container--modern-left",o=[r,i,a,e,n],s=0;s<o.length;s++)t.gleapFrameContainer.classList.remove(o[s]);var c=void 0,l=O.getInstance().getFlowConfig();l.feedbackButtonPosition!==fe.FEEDBACK_BUTTON_CLASSIC&&l.feedbackButtonPosition!==fe.FEEDBACK_BUTTON_CLASSIC_BOTTOM||(c=r),l.feedbackButtonPosition===fe.FEEDBACK_BUTTON_CLASSIC_LEFT&&(c=i),l.feedbackButtonPosition===fe.FEEDBACK_BUTTON_BOTTOM_LEFT&&(c=a),c&&t.gleapFrameContainer.classList.add(c),"survey"===t.appMode&&t.gleapFrameContainer.classList.add(e),"survey_full"===t.appMode&&t.gleapFrameContainer.classList.add(n),t.gleapFrameContainer.setAttribute("dir",Ze.getInstance().isRTLLayout?"rtl":"ltr")}})),this.startCommunication()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"setAppMode",value:function(e){this.appMode=e,this.updateFrameStyle();var t=document.querySelector(".gleap-frame-container-inner");"widget"!==e&&"survey_full"!==e||!t||(t.style.maxHeight="".concat(660,"px"))}},{key:"registerEscListener",value:function(){var e=this;this.escListener||(this.escListener=function(t){"Escape"===(t=t||window.event).key&&e.hideWidget()},document.addEventListener("keydown",this.escListener))}},{key:"unregisterEscListener",value:function(){this.escListener&&(document.removeEventListener("keydown",this.escListener),this.escListener=null)}},{key:"isOpened",value:function(){return this.widgetOpened}},{key:"showWidget",value:function(){var e=this;this.gleapFrameContainer.classList&&(this.gleapFrameContainer.classList.remove("gleap-frame-container--hidden"),setTimeout((function(){e.gleapFrameContainer.classList.add("gleap-frame-container--animate")}),500)),this.widgetOpened=!0,this.updateWidgetStatus(),rt.getInstance().clearAllNotifications(),rt.getInstance().setNotificationCount(0),fe.getInstance().updateFeedbackButtonState(),we.notifyEvent("open"),this.registerEscListener()}},{key:"updateWidgetStatus",value:function(){this.sendMessage({name:"widget-status-update",data:{isWidgetOpen:this.widgetOpened}})}},{key:"hideMarkerManager",value:function(){this.markerManager&&(this.markerManager.clear(),this.markerManager=null)}},{key:"hideWidget",value:function(){this.hideMarkerManager(),this.gleapFrameContainer&&(this.gleapFrameContainer.classList.add("gleap-frame-container--hidden"),this.gleapFrameContainer.classList.remove("gleap-frame-container--animate")),this.widgetOpened=!1,this.updateWidgetStatus(),fe.getInstance().updateFeedbackButtonState(),we.notifyEvent("close"),this.unregisterEscListener(),"undefined"!=typeof window&&void 0!==window.focus&&window.focus()}},{key:"sendMessage",value:function(e){this.gleapFrame&&this.gleapFrame.contentWindow.postMessage(JSON.stringify(e),"*")}},{key:"sendSessionUpdate",value:function(){this.sendMessage({name:"session-update",data:{sessionData:L.getInstance().getSession(),apiUrl:L.getInstance().apiUrl,sdkKey:L.getInstance().sdkKey}})}},{key:"sendFormPreFillData",value:function(){this.sendMessage({name:"prefill-form-data",data:et.getInstance().formPreFill})}},{key:"sendConfigUpdate",value:function(){this.sendMessage({name:"config-update",data:{config:O.getInstance().getFlowConfig(),actions:O.getInstance().getProjectActions(),overrideLanguage:Ze.getInstance().getOverrideLanguage()}}),this.updateFrameStyle()}},{key:"showDrawingScreen",value:function(e){var t=this;this.hideWidget(),this.markerManager=new Ge(e),this.markerManager.show((function(e){e||t.hideMarkerManager(),t.showWidget()}))}},{key:"startCommunication",value:function(){var e=this;this.addMessageListener((function(t){if("ping"===t.name&&(R.getInstance().start(),fe.getInstance().injectFeedbackButton(),rt.getInstance().injectNotificationUI(),e.sendConfigUpdate(),e.sendSessionUpdate(),e.sendFormPreFillData()),"play-ping"===t.name&&at.ping(),"height-update"===t.name){e.frameHeight=t.data;var n=document.querySelector(".gleap-frame-container-inner");"survey"!==e.appMode&&"survey_full"!==e.appMode||!n||(n.style.maxHeight="".concat(e.frameHeight,"px"))}if("notify-event"===t.name&&we.notifyEvent(t.data.type,t.data.data),"cleanup-drawings"===t.name&&e.hideMarkerManager(),"open-url"===t.name){var r=t.data;r&&r.length>0&&window.open(r,"_blank").focus()}if("run-custom-action"===t.name&&Ce.triggerCustomAction(t.data),"close-widget"===t.name&&e.hideWidget(),"send-feedback"===t.name){var i=t.data.formData,a=t.data.action,o=t.data.outboundId,s=t.data.spamToken;new X(a.feedbackType,"MEDIUM",i,!1,a.excludeData,o,s).sendFeedback().then((function(t){e.sendMessage({name:"feedback-sent",data:t}),we.notifyEvent("feedback-sent",i)})).catch((function(t){e.sendMessage({name:"feedback-sending-failed",data:"Something went wrong, please try again."}),we.notifyEvent("error-while-sending")}))}"start-screen-drawing"===t.name&&e.showDrawingScreen(t.data)})),window.addEventListener("message",(function(t){if(t.origin===e.frameUrl)try{for(var n=JSON.parse(t.data),r=0;r<e.listeners.length;r++)e.listeners[r]&&e.listeners[r](n)}catch(i){}}))}},{key:"addMessageListener",value:function(e){this.listeners.push(e)}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}V(J,"instance",void 0);var Q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$(this,"sessionStart",new Date),$(this,"appBuildNumber",""),$(this,"appVersionCode","")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"setAppVersionCode",value:function(e){this.getInstance().appVersionCode=e}},{key:"setAppBuildNumber",value:function(e){this.getInstance().appBuildNumber=e}}],(n=[{key:"getSessionDuration",value:function(){var e=new Date;return Math.round((e.getTime()-this.sessionStart.getTime())/1e3)}},{key:"getMetaData",value:function(){var e,t,n,r=navigator.userAgent,i=navigator.appName,a=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);-1!==(t=r.indexOf("Opera"))?(i="Opera",a=r.substring(t+6),-1!==(t=r.indexOf("Version"))&&(a=r.substring(t+8))):-1!==(t=r.indexOf("MSIE"))?(i="Microsoft Internet Explorer",a=r.substring(t+5)):-1!==(t=r.indexOf("Chrome"))?(i="Chrome",a=r.substring(t+7)):-1!==(t=r.indexOf("Safari"))?(i="Safari",a=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(a=r.substring(t+8))):-1!==(t=r.indexOf("Firefox"))?(i="Firefox",a=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(i=r.substring(e,t),a=r.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=navigator.appName)),-1!==(n=a.indexOf(";"))&&(a=a.substring(0,n)),-1!==(n=a.indexOf(" "))&&(a=a.substring(0,n)),o=parseInt(""+a,10),isNaN(o)&&(a=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10));var s="Unknown OS";return-1!==navigator.appVersion.indexOf("Win")&&(s="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(s="MacOS"),-1!==navigator.appVersion.indexOf("X11")&&(s="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(s="Linux"),-1!==navigator.appVersion.indexOf("iPad")&&(s="iPad"),-1!==navigator.appVersion.indexOf("iPhone")&&(s="iPhone"),-1!==navigator.appVersion.indexOf("Android")&&(s="Android"),{browserName:i+"("+a+")",userAgent:r,browser:navigator.appName,systemName:s,buildVersionNumber:this.appBuildNumber,releaseVersionNumber:this.appVersionCode,sessionDuration:this.getSessionDuration(),devicePixelRatio:window.devicePixelRatio,screenWidth:window.screen.width,screenHeight:window.screen.height,innerWidth:window.innerWidth,innerHeight:window.innerHeight,currentUrl:window.location.href,language:navigator.language||navigator.userLanguage,mobile:f(),sdkVersion:"8.0.1",sdkType:"javascript"}}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(Q,"instance",void 0);var ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),re(this,"logArray",[]),re(this,"disabled",!1),re(this,"originalConsoleLog",void 0),re(this,"logMaxLength",500)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"getLogs",value:function(){return this.logArray}},{key:"stop",value:function(){this.disabled=!0,window.console=this.originalConsoleLog}},{key:"addLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INFO";!e||e.length<=0||(this.logArray.push({log:v(e,1e3),date:new Date,priority:t}),this.logArray.length>this.logMaxLength&&this.logArray.shift())}},{key:"addLogWithArgs",value:function(e,t){if(e&&!(e.length<=0)){var n="";try{for(var r=0;r<e.length;r++)n+=e[r]+" "}catch(i){}this.addLog(n,t)}}},{key:"start",value:function(){if(!this.disabled){var e,t=this;window.console=(e=window.console,window.console&&e||(e={}),t.originalConsoleLog=e,te(te({},e),{},{log:function(){t.addLogWithArgs(arguments,"INFO"),e.log&&e.log.apply(e,arguments)},warn:function(){t.addLogWithArgs(arguments,"WARNING"),e.warn&&e.warn.apply(e,arguments)},error:function(){t.addLogWithArgs(arguments,"ERROR"),e.error&&e.error.apply(e,arguments)},info:function(n){t.addLogWithArgs(arguments,"INFO"),e.info&&e.info.apply(e,arguments)}}))}}}])&&ne(t.prototype,n),r&&ne(t,r),e}();function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}re(ie,"instance",void 0);var oe,se,ce,le=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"start",value:function(){document.addEventListener("click",(function(e){e.target&&(J.getInstance().isOpened()||ie.getInstance().addLog(y(e.target),"CLICK"))}))}}])&&ae(t.prototype,n),r&&ae(t,r),e}();function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ce=void 0,(se="instance")in(oe=le)?Object.defineProperty(oe,se,{value:ce,enumerable:!0,configurable:!0,writable:!0}):oe[se]=ce;var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"start",value:function(){window.addEventListener("error",(function(e){var t=e.message,n=e.filename,r=e.lineno,i=e.colno,a=e.error,o="";null!==a&&void 0!==a.stack&&(o=a.stack);var s=["Message: "+t,"URL: "+n,"Line: "+r,"Column: "+i,"Stack: "+o];ie.getInstance().addLogWithArgs(s,"ERROR");var c=O.getInstance().getFlowConfig();c&&void 0!==c.enableCrashDetector&&c.enableCrashDetector&&(c.crashDetectorIsSilent?ft.sendSilentCrashReportWithFormData({errorMessage:t,url:n,lineNo:r,columnNo:i,stackTrace:o},"MEDIUM",{screenshot:!0,replays:!0}):ft.startFeedbackFlowWithOptions("crash"))}))}}])&&ue(t.prototype,n),r&&ue(t,r),e}();function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(de,"instance",void 0);var fe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),he(this,"feedbackButton",null),he(this,"injectedFeedbackButton",!1)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"toggleFeedbackButton",value:function(e){this.feedbackButton&&(this.feedbackButton.style.display=e?"flex":"none")}},{key:"feedbackButtonPressed",value:function(){var e=J.getInstance();e.isOpened()?e.hideWidget():(e.setAppMode("widget"),e.showWidget())}},{key:"injectFeedbackButton",value:function(){var e=this;if(!this.injectedFeedbackButton){this.injectedFeedbackButton=!0;var t=document.createElement("div");t.onclick=function(){e.feedbackButtonPressed()},document.body.appendChild(t),this.feedbackButton=t,this.updateFeedbackButtonState()}}},{key:"updateNotificationBadge",value:function(e){var t=document.querySelector(".bb-notification-bubble");if(t){var n="bb-notification-bubble--hidden";e>0?(t.classList.remove(n),t.innerText=e):t.classList.add(n)}}},{key:"updateFeedbackButtonState",value:function(){if(null!==this.feedbackButton){var t=O.getInstance().getFlowConfig(),n="";n=t.buttonLogo?'<img class="bb-logo-logo" src="'.concat(t.buttonLogo,'" alt="Feedback Button" />'):s("button","#fff");var r='<div class="bb-notification-bubble bb-notification-bubble--hidden"></div>';this.feedbackButton.className="bb-feedback-button gleap-hidden",this.feedbackButton.setAttribute("dir",Ze.getInstance().isRTLLayout?"rtl":"ltr"),t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC||t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_BOTTOM||t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_LEFT?this.feedbackButton.innerHTML='<div class="bb-feedback-button-classic '.concat(t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_LEFT?"bb-feedback-button-classic--left":"").concat(t.feedbackButtonPosition===e.FEEDBACK_BUTTON_CLASSIC_BOTTOM?"bb-feedback-button-classic--bottom":"",'">').concat(Ze.translateText(t.widgetButtonText),"</div>").concat(r):this.feedbackButton.innerHTML='<div class="bb-feedback-button-icon">'.concat(n).concat(s("arrowdown","#fff"),"</div>").concat(r),t.feedbackButtonPosition===e.FEEDBACK_BUTTON_NONE&&this.feedbackButton.classList.add("bb-feedback-button--disabled"),t.feedbackButtonPosition===e.FEEDBACK_BUTTON_BOTTOM_LEFT&&this.feedbackButton.classList.add("bb-feedback-button--bottomleft"),J.getInstance().isOpened()&&this.feedbackButton.classList.add("bb-feedback-button--open");var i=J.getInstance().appMode;"survey"!==i&&"survey_full"!==i||this.feedbackButton.classList.add("bb-feedback-button--survey"),!0!==t.hideForGuests||L.getInstance().isUser()||this.feedbackButton.classList.add("bb-feedback-button--hidden")}}}])&&pe(t.prototype,n),r&&pe(t,r),e}();function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}he(fe,"FEEDBACK_BUTTON_BOTTOM_RIGHT","BOTTOM_RIGHT"),he(fe,"FEEDBACK_BUTTON_BOTTOM_LEFT","BOTTOM_LEFT"),he(fe,"FEEDBACK_BUTTON_CLASSIC","BUTTON_CLASSIC"),he(fe,"FEEDBACK_BUTTON_CLASSIC_LEFT","BUTTON_CLASSIC_LEFT"),he(fe,"FEEDBACK_BUTTON_CLASSIC_BOTTOM","BUTTON_CLASSIC_BOTTOM"),he(fe,"FEEDBACK_BUTTON_NONE","BUTTON_NONE"),he(fe,"instance",void 0);var ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ve(this,"customData",{})}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"getCustomData",value:function(){return this.customData}},{key:"attachCustomData",value:function(e){this.customData=Object.assign(this.customData,b(e))}},{key:"setCustomData",value:function(e,t){this.customData[e]=t}},{key:"removeCustomData",value:function(e){delete this.customData[e]}},{key:"clearCustomData",value:function(){this.customData={}}}])&&be(t.prototype,n),r&&be(t,r),e}();function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ve(ge,"instance",void 0);var we=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,"eventListeners",{})}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"notifyEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("flow-started"===e){var n=ft.getInstance();n.setGlobalDataItem("webReplay",null),n.setGlobalDataItem("screenRecordingData",null),n.takeCurrentReplay()}var r=this.getInstance().eventListeners[e];if(r)for(var i=0;i<r.length;i++){var a=r[i];a&&a(t)}}},{key:"on",value:function(e,t){var n=this.getInstance();n.eventListeners[e]||(n.eventListeners[e]=[]),n.eventListeners[e].push(t)}}],(n=null)&&me(t.prototype,n),r&&me(t,r),e}();function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ye(we,"instance",void 0);var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,"customActionCallbacks",[])}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"registerCustomAction",value:function(e){var t=this.getInstance();t.customActionCallbacks&&t.customActionCallbacks.push(e)}},{key:"triggerCustomAction",value:function(e){var t=this.getInstance();if(t.customActionCallbacks)for(var n=0;n<t.customActionCallbacks.length;n++){var r=t.customActionCallbacks[n];r&&r({name:e})}}}],(n=null)&&ke(t.prototype,n),r&&ke(t,r),e}();function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}xe(Ce,"instance",void 0);var Te=function(e){var t,n,r,i,a;t=function(t,n){e(t)},r=(n={interval:750,limit:4}).interval,i=n.limit,a=1,setInterval((function(){a=1}),r),document.addEventListener("click",(function(e){a===i&&t(e.target),a++}))},Re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,"initializedRageClickDetector",!1)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"start",value:function(){this.initializedRageClickDetector||(this.initializedRageClickDetector=!0,Te((function(e){var t=y(e,!1),n=O.getInstance().getFlowConfig();n&&void 0!==n.enableRageClickDetector&&n.enableRageClickDetector&&(n.rageClickDetectorIsSilent?ft.sendSilentCrashReportWithFormData({description:"Rage click detected.",element:t},"MEDIUM"):ft.startFeedbackFlowWithOptions("crash"))})))}}])&&Le(t.prototype,n),r&&Le(t,r),e}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Se(Re,"instance",void 0);function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.win=t,this.node=n,this.rec=r,this.initialState={},this.initialActions=[],this.prepEvent=function(e){var t;return i.flushObserver(),(null===(t=e.target)||void 0===t?void 0:t.ReplayRecID)||0},this.mouseListener=function(e){var t=e.clientX,n=e.clientY,r=e.target,a=i.node;if(a.contains(r)){i.flushObserver();var o,s=a.getBoundingClientRect();switch(t-=s.left,n-=s.top,e.type){case"mousemove":o="m";break;case"mouseup":o="u";break;case"mousedown":o="n";break;default:throw new Error("Unknown event type: ".concat(e.type))}i.rec.actions.push(Ee({},o,[Math.round(t),Math.round(n)]))}},this.scrollListener=function(e){if(i.node.contains(e.target)){var t=i.prepEvent(e);t&&i.rec.pushScrollAction(t,e.target)}},this.mainScrollListener=function(){i.flushObserver(),i.rec.actions.push(Ee({},"x",[window.scrollX,window.scrollY]))},this.inputListener=function(e){if(i.node.contains(e.target)){var t=i.prepEvent(e);if(t&&"value"in e.target){var n=e.target.value;"password"===e.target.type&&n&&n.length&&(n=new Array(n.length+1).join("*")),"value"===e.target.getAttribute("gleap-ignore")&&(n=new Array(n.length+1).join("*")),i.rec.actions.push(Ee({},"i",[t,n]))}if(t&&"type"in e.target&&"checkbox"===e.target.type){var r=e.target.checked;i.rec.actions.push(Ee({},"z",[t,r]))}}},this.flushListener=function(e){if(i.node.contains(e.target)){var t=i.prepEvent(e);t&&i.rec.actions.push(Ee({},"f",t))}},this.canvasListener=function(e){if(i.node.contains(e.target)){var t=i.prepEvent(e);t&&i.rec.actions.push(Ee({},"c",[t,e.target.toDataURL(),"didDraw"]))}},this.focusListener=function(){},n.ownerDocument.ReplayRecInner=this;var a=[],o=this.rec.serializeNode(this.node,a);if(o){this.initialState=o,this.initialActions=a;var s=MutationObserver;window&&window.Zone&&window[window.Zone.__symbol__("MutationObserver")]&&(s=window[window.Zone.__symbol__("MutationObserver")]),this.observer=new s(r.observerCallback),this.observer.observe(n,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),this.mainScrollListener(),t.addEventListener("input",this.inputListener,{capture:!0,passive:!0}),t.addEventListener("mousemove",this.mouseListener,{capture:!0,passive:!0}),t.addEventListener("mousedown",this.mouseListener,{capture:!0,passive:!0}),t.addEventListener("mouseup",this.mouseListener,{capture:!0,passive:!0}),t.addEventListener("forceStyleFlush",this.flushListener,{capture:!0,passive:!0}),t.addEventListener("didDrawCanvas",this.canvasListener,{capture:!0,passive:!0}),t.addEventListener("focus",this.focusListener,{capture:!0,passive:!0}),t.addEventListener("scroll",this.mainScrollListener,{capture:!0,passive:!0})}}var t,n,r;return t=e,(n=[{key:"stop",value:function(){this.flushObserver(),this.observer&&this.observer.disconnect(),this.win.removeEventListener("input",this.inputListener,{capture:!0,passive:!0}),this.win.removeEventListener("mousemove",this.mouseListener,{capture:!0,passive:!0}),this.win.removeEventListener("mousedown",this.mouseListener,{capture:!0,passive:!0}),this.win.removeEventListener("mouseup",this.mouseListener,{capture:!0,passive:!0}),this.win.removeEventListener("forceStyleFlush",this.flushListener,{capture:!0,passive:!0}),this.win.removeEventListener("didDrawCanvas",this.canvasListener,{capture:!0,passive:!0}),this.win.removeEventListener("focus",this.focusListener,{capture:!0,passive:!0}),this.win.removeEventListener("scroll",this.mainScrollListener,{capture:!0,passive:!0}),this.rec.deleteAllReplayRecIDs(this.node)}},{key:"flushObserver",value:function(){this.observer&&void 0!==this.observer.takeRecords&&this.rec.observerCallback(this.observer.takeRecords())}}])&&Oe(t.prototype,n),r&&Oe(t,r),e}();function Ae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fe(this,"startDate",void 0),Fe(this,"stopped",!0),Fe(this,"fetchCSSResource",(function(e){return new Promise((function(t,n){if(e){var r=new XMLHttpRequest;r.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.onerror=function(){t()},e.readAsDataURL(r.response)},r.onerror=function(e){t()},r.open("GET",e),r.responseType="blob",r.send()}else t()}))})),Fe(this,"replaceAsync",(function(e,t,n){return new Promise((function(r,i){var a=[];e.replace(t,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=n.apply(void 0,[e].concat(r));a.push(o)})),Promise.all(a).then((function(n){r(e.replace(t,(function(){return n.shift()})))})).catch((function(){i()}))}))})),Fe(this,"validateStylesheetResources",(function(e,n){var r=n.substring(0,n.lastIndexOf("/")),i=e.split(",");return 2!==i.length?Promise.reject():(e=atob(i[1]),delete i[1],t.replaceAsync(e,/url\((.*?)\)/g,(function(e){return new Promise((function(n,i){var a=e.substr(4,e.length-5).replaceAll("'","").replaceAll('"',"");if(0===a.indexOf("http")||0===a.indexOf("//")||0===a.indexOf("data"))return n(e);try{var o=a;return r&&(o=r+"/"+a),t.fetchCSSResource(o).then((function(t){return 0===a.indexOf("data:text/html")?n(e):n("url("+t+")")}))}catch(s){return n(e)}}))})).then((function(e){return i[0]+","+btoa(e)})))})),Fe(this,"progressResource",(function(e,n,r,i){e&&0===e.indexOf("data:text/css")?t.validateStylesheetResources(e,n).then((function(e){t.resourcesToResolve[n]=e,r()})):!e||0!==e.indexOf("data:image/jpeg")&&0!==e.indexOf("data:image/png")?(t.resourcesToResolve[n]=e,r()):h(e,500,500).then((function(e){t.resourcesToResolve[n]=e,r()}))})),Fe(this,"fetchItemResource",(function(e){var n=t;return new Promise((function(t,r){if(e){var i=new XMLHttpRequest;i.onload=function(){var a=new FileReader;a.onloadend=function(){n.progressResource(a.result,e,t,r)},a.onerror=function(){t()},a.readAsDataURL(i.response)},i.onerror=function(e){t()};var a=e;i.open("GET",a),i.responseType="blob",i.send()}else t()}))})),this.initReplaySizeCheck()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"initReplaySizeCheck",value:function(){var e=this;setInterval((function(){e.isFull()&&(e.stop(),e.start())}),1e3)}},{key:"start",value:function(){this.stopped&&(this.stopped=!1,this.startDate=Date.now(),this.node=document.documentElement,this.nextID=1,this.actions=[],this.actionsSize=0,this.lastActionTime=Date.now(),this.observerCallback=this.callback.bind(this),this.resourcesToResolve={},this.rootFrame=new De(window,this.node,this),this.evaluateFocus())}},{key:"stop",value:function(){this.stopped=!0,this.rootFrame?(this.rootFrame.stop(),this.rootFrame=null):this.rootFrame=null}},{key:"getReplayData",value:function(){var e=this;if(!this.startDate)return Promise.resolve(null);var t={startDate:this.startDate,initialState:this.rootFrame.initialState,initialActions:this.rootFrame.initialActions,actions:this.actions,baseUrl:window.location.origin,width:window.innerWidth,height:window.innerHeight,resourcesToResolve:this.resourcesToResolve,isMobile:f()};return ft.getInstance().isLiveMode()?this.fetchImageResources().then((function(){return e.cleanupResources(t)})):this.cleanupResources(t)}},{key:"isFull",value:function(){return!!(this.actions&&this.actionsSize>10)}},{key:"fetchImageResources",value:function(){for(var e=[],t=Object.keys(this.resourcesToResolve),n=0;n<t.length;n++)A(t[n])||e.push(this.fetchItemResource(t[n]));return Promise.all(e)}},{key:"cleanupResources",value:function(e){for(var t=Object.keys(this.resourcesToResolve),n=0;n<t.length;n++)"--"===this.resourcesToResolve[t[n]]&&delete this.resourcesToResolve[t[n]];return Promise.resolve(JSON.parse(JSON.stringify(e)))}},{key:"evaluateFocus",value:function(){this.rootFrame.flushObserver()}},{key:"allowAttribute",value:function(e,t){switch(t){case"srcdoc":if("IFRAME"===e.tagName)return!1;break;case"title":return!1}return!0}},{key:"pushScrollAction",value:function(e,t,n){var r=n||this.actions,i=t.elementScrolledIntoView;if(i){var a={};if(i.ReplayRecID){var o="elementScrolledIntoViewOffset"in t?t.elementScrolledIntoViewOffset:null;a.s=[e,i.ReplayRecID,o]}else{if("bottom"!==i)throw new Error("Unknown scrolledIntoView: ".concat(i));a.s=[e,i]}r.push(a)}}},{key:"serializeNode",value:function(e,t){if("ReplayRecID"in e)return null;var n=this.nextID++,r={id:n};switch(e.ReplayRecID=n,e.nodeType){case Node.ELEMENT_NODE:var i=e.tagName;switch(i){case"INPUT":case"TEXTAREA":var a={},o=e.value;e.type&&"password"===e.type&&o&&o.length&&(o=new Array(o.length+1).join("*")),"value"===e.getAttribute("gleap-ignore")&&(o=new Array(o.length+1).join("*")),a.i=[n,o],t.push(a);var s=e.ownerDocument.ReplayRecInner.scrollListener;e.addEventListener("scroll",s,{passive:!0});break;case"PRE":case"DIV":var c=e.ownerDocument.ReplayRecInner.scrollListener;e.addEventListener("scroll",c,{passive:!0});break;case"SCRIPT":case"LINK":delete e.ReplayRecID;var l=e.getAttribute("rel");if(e&&e.href&&(e.href.includes(".css")||l&&l.includes("stylesheet"))){this.resourcesToResolve[e.getAttribute("href")]="--";break}if(l&&"import"===l)break;return null;case"CANVAS":var u={};u.c=[n,e.toDataURL()],t.push(u)}r[""]=i;var d,p={},h=!1,f=Ae(e.attributes);try{for(f.s();!(d=f.n()).done;){var b=d.value,v=b.name;this.allowAttribute(e,v)&&(p[v]=b.value,h=!0)}}catch(O){f.e(O)}finally{f.f()}h&&(r.a=p,r.a&&r.a.src&&"SOURCE"!==i&&"IFRAME"!==i&&this.optionallyAddAttribute("src",r.a.src));var g,m=[],y=Ae(e.childNodes);try{for(y.s();!(g=y.n()).done;){var w=g.value,k=this.serializeNode(w,t);k&&m.push(k)}}catch(O){y.e(O)}finally{y.f()}m.length>0&&(r.c=m),(e.scrollLeft||e.scrollTop)&&this.pushScrollAction(n,e,t);break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:var x=e.parentNode;if(e.parentNode&&x.tagName&&"STYLE"===x.tagName&&x.ownerDocument){var C=x.ownerDocument.styleSheets;if(C)for(var L=0;L<C.length;L++){var S=C[L];if(S.ownerNode&&S.ownerNode.ReplayRecID&&x.ReplayRecID===S.ownerNode.ReplayRecID){var T=null;if(S.cssRules?T=S.cssRules:S.rules&&(T=S.rules),T){var R="";for(var I in T)T[I].cssText&&(R+=T[I].cssText);r.d=R}}}}var E=e.data;E.length>0&&!r.d&&(r.d=E);break;case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:break;default:throw delete e.ReplayRecID,new Error("Bad node ".concat(e))}return r}},{key:"delay",value:function(e){this.lastActionTime-=1e3*e}},{key:"deleteAllReplayRecIDs",value:function(e){delete e.ReplayRecID;var t=e.ownerDocument.ReplayRecInner.scrollListener;e.removeEventListener("scroll",t,{passive:!0});for(var n=e.firstChild;n;n=n.nextSibling)n.ReplayRecID&&this.deleteAllReplayRecIDs(n)}},{key:"optionallyAddAttribute",value:function(e,t){if("src"===e&&t){var n=t;0!==n.indexOf("data")&&(this.resourcesToResolve[n]="--")}}},{key:"appendAction",value:function(e){this.actions.push(e);var t=this;setTimeout((function(){t.actionsSize+=function(e){for(var t=[],n=[e],r=0;n.length;){var i=n.pop();if("boolean"==typeof i)r+=4;else if("string"==typeof i)r+=2*i.length;else if("number"==typeof i)r+=8;else if("object"===Ie(i)&&-1===t.indexOf(i))for(var a in t.push(i),i)n.push(i[a])}return r/1024/1024}(e)}),0)}},{key:"callback",value:function(e,t){var n=Date.now();if(n>this.lastActionTime){var r={};r.o=n-this.lastActionTime,this.appendAction(r)}this.lastActionTime=Date.now();try{var i,a=Ae(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.target.ReplayRecID&&"childList"===o.type){var s,c=Ae(o.removedNodes);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=l.ReplayRecID;if(u){var d={};d.v=u,this.appendAction(d),this.deleteAllReplayRecIDs(l)}}}catch(E){c.e(E)}finally{c.f()}}}}catch(E){a.e(E)}finally{a.f()}var p,h=[],f=Ae(e);try{for(f.s();!(p=f.n()).done;){var b=p.value,v=b.target,g=v.ReplayRecID;if(g)switch(b.type){case"attributes":var m=b.attributeName;if(this.allowAttribute(v,m)){var y={};y.r=[g,m,v.getAttribute(m)],"SOURCE"!==v.tagName&&this.optionallyAddAttribute(m,v.getAttribute(m)),this.appendAction(y)}break;case"characterData":var w={};v.nodeType===Node.TEXT_NODE&&(w.t=[g,v.data]),this.appendAction(w);break;case"childList":b.addedNodes.length>0&&!v.ReplayRecNodesAdded&&(v.ReplayRecNodesAdded=!0,h.push(v))}}}catch(E){f.e(E)}finally{f.f()}for(var k=0,x=h;k<x.length;k++){var C=x[k];delete C.ReplayRecNodesAdded;for(var L=C.lastChild;L;L=L.previousSibling)if(!L.ReplayRecID){var S={},T=[],R=this.serializeNode(L,T);if(R){var I=L.nextSibling;S.p=[C.ReplayRecID,I?I.ReplayRecID:null,R,T],this.appendAction(S)}}}}catch(O){throw O}}}])&&Pe(t.prototype,n),r&&Pe(t,r),e}();function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Fe(qe,"instance",void 0);var Be=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),je(this,"rerender",void 0),je(this,"svgElement",null),je(this,"path",null),je(this,"strPath",void 0),je(this,"strokeWidth",12),je(this,"strokeWidthRect",6),je(this,"bufferSize",4),je(this,"buffer",[]),je(this,"startPoint",null),je(this,"tool","rect"),je(this,"color","#EB144C"),je(this,"mouseDown",null),je(this,"mouseMove",null),je(this,"mouseUp",null),je(this,"resizeListener",null),je(this,"pathBuffer",[]);var r=this;this.rerender=t,this.svgElement=document.querySelector(".bb-capture-svg"),this.svgElement.style.minHeight="".concat(document.documentElement.scrollHeight,"px"),this.resizeListener=function(e){r.svgElement.style.minHeight="".concat(document.documentElement.scrollHeight,"px")},window.addEventListener("resize",this.resizeListener,!0),this.mouseDown=function(e){e.preventDefault();var t=document.querySelector(".bb-capture-toolbar-item-colorpicker");t&&(t.style.display="none"),r.fadeOutToolbar(),"pen"!==r.tool&&"blur"!==r.tool||r.mouseDownPen(e),"rect"===r.tool&&r.mouseDownRect(e)},this.mouseMove=function(e){e.preventDefault(),"pen"!==r.tool&&"blur"!==r.tool||r.mouseMovePen(e),"rect"===r.tool&&r.mouseMoveRect(e)},this.mouseUp=function(e){e.preventDefault(),r.fadeInToolbar(),"pen"!==r.tool&&"blur"!==r.tool||r.mouseUpPen(e),"rect"===r.tool&&r.mouseUpRect(e)},this.svgElement.addEventListener("mousedown",this.mouseDown),this.svgElement.addEventListener("mousemove",this.mouseMove),this.svgElement.addEventListener("mouseup",this.mouseUp),this.svgElement.addEventListener("touchstart",this.mouseDown,!1),this.svgElement.addEventListener("touchmove",this.mouseMove,!1),this.svgElement.addEventListener("touchend",this.mouseUp,!1),setTimeout((function(){n.rerender()}),100)}var t,n,r;return t=e,(n=[{key:"clear",value:function(){if(this.svgElement)for(;this.svgElement.firstChild;)this.svgElement.firstChild.remove()}},{key:"destroy",value:function(){this.svgElement.removeEventListener("mousedown",this.mouseDown),this.svgElement.removeEventListener("mousemove",this.mouseMove),this.svgElement.removeEventListener("mouseup",this.mouseUp),this.svgElement.removeEventListener("touchstart",this.mouseDown),this.svgElement.removeEventListener("touchmove",this.mouseMove),this.svgElement.removeEventListener("touchend",this.mouseUp),window.removeEventListener("resize",this.resizeListener)}},{key:"mouseUpPen",value:function(){this.path&&(this.path=null)}},{key:"mouseUpRect",value:function(){this.path&&(this.path=null)}},{key:"mouseMovePen",value:function(e){this.path&&(this.appendToBuffer(this.getMousePosition(e)),this.updateSvgPath())}},{key:"mouseMoveRect",value:function(e){if(this.path){var t=this.getMousePosition(e),n=Math.abs(t.x-this.startPoint.x),r=Math.abs(t.y-this.startPoint.y),i=t.x,a=t.y;t.x>this.startPoint.x&&(i=this.startPoint.x),t.y>this.startPoint.y&&(a=this.startPoint.y),this.path.setAttributeNS(null,"x",i),this.path.setAttributeNS(null,"y",a),this.path.setAttributeNS(null,"width",n),this.path.setAttributeNS(null,"height",r)}}},{key:"mouseDownRect",value:function(e){this.path=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.path.setAttribute("fill","none"),this.path.setAttribute("stroke",this.color),this.path.setAttribute("stroke-linecap","round"),this.path.setAttribute("stroke-width",this.strokeWidthRect),this.startPoint=this.getMousePosition(e),this.appendPathToSvg(this.path)}},{key:"mouseDownPen",value:function(e){var t=this.color+"AA",n=this.strokeWidth;"blur"===this.tool&&(t="#000000",n=40),this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.setAttribute("fill","none"),this.path.setAttribute("stroke",t),this.path.setAttribute("stroke-linecap","round"),this.path.setAttribute("stroke-width",n),this.buffer=[];var r=this.getMousePosition(e);this.appendToBuffer(r),this.strPath="M"+r.x+" "+r.y,this.path.setAttribute("d",this.strPath),this.appendPathToSvg(this.path)}},{key:"setTool",value:function(e){this.tool=e}},{key:"setColor",value:function(e){this.color=e}},{key:"getMousePosition",value:function(e){return e.touches&&e.touches.length>0?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY}}},{key:"getAveragePoint",value:function(e){var t=this.buffer.length;if(t%2==1||t>=this.bufferSize){var n,r,i=0,a=0,o=0;for(r=e;r<t;r++)o++,i+=(n=this.buffer[r]).x,a+=n.y;return{x:i/o,y:a/o}}return null}},{key:"updateSvgPath",value:function(){var e=this.getAveragePoint(0);if(e){this.strPath+=" L"+e.x+" "+e.y;for(var t="",n=2;n<this.buffer.length;n+=2)t+=" L"+(e=this.getAveragePoint(n)).x+" "+e.y;this.path.setAttribute("d",this.strPath+t)}}},{key:"appendToBuffer",value:function(e){for(this.buffer.push(e);this.buffer.length>this.bufferSize;)this.buffer.shift()}},{key:"appendPathToSvg",value:function(e){this.svgElement.appendChild(e),this.pathBuffer.push(e),this.rerender()}},{key:"removeLastAddedPathFromSvg",value:function(){this.pathBuffer.length<=0||!this.svgElement||(this.svgElement.removeChild(this.pathBuffer[this.pathBuffer.length-1]),this.pathBuffer.pop(),this.rerender())}},{key:"fadeOutToolbar",value:function(){var e=document.querySelector(".bb-capture-toolbar");e&&(e.style.opacity=0,e.style.pointerEvents="none")}},{key:"fadeInToolbar",value:function(){var e=document.querySelector(".bb-capture-toolbar");e&&(e.style.opacity=1,e.style.pointerEvents="auto")}}])&&Ne(t.prototype,n),r&&Ne(t,r),e}();function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,"keys",{37:1,38:1,39:1,40:1}),He(this,"supportsPassive",!1),He(this,"wheelOpt",!!this.supportsPassive&&{passive:!1}),He(this,"wheelEvent","onwheel"in document.createElement("div")?"wheel":"mousewheel"),He(this,"scrollDisabled",!1);var t=this;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0,t.wheelOpt=!!t.supportsPassive&&{passive:!1}}}))}catch(n){}}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"disableScroll",value:function(){var e=this.getInstance();e.scrollDisabled||(e.scrollDisabled=!0,window.addEventListener("DOMMouseScroll",e.preventDefault,!1),window.addEventListener(e.wheelEvent,e.preventDefault,e.wheelOpt),window.addEventListener("touchmove",e.preventDefault,e.wheelOpt),window.addEventListener("keydown",e.preventDefaultForScrollKeys,!1))}},{key:"enableScroll",value:function(){var e=this.getInstance();e.scrollDisabled&&(e.scrollDisabled=!1,window.removeEventListener("DOMMouseScroll",e.preventDefault,!1),window.removeEventListener(e.wheelEvent,e.preventDefault,e.wheelOpt),window.removeEventListener("touchmove",e.preventDefault,e.wheelOpt),window.removeEventListener("keydown",e.preventDefaultForScrollKeys,!1))}}],(n=[{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"preventDefaultForScrollKeys",value:function(e){if(this.keys&&this.keys[e.keyCode])return this.preventDefault(e),!1}}])&&Ue(t.prototype,n),r&&Ue(t,r),e}();function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}He(ze,"instance",void 0);var Ge=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),We(this,"type","screenshot"),We(this,"dragCursor",null),We(this,"screenRecorder",null),We(this,"callback",null),We(this,"screenDrawer",null),We(this,"escListener",null),We(this,"pageLeaveListener",null),We(this,"overrideLanguage",ft.getInstance().overrideLanguage),We(this,"showNextStep",(function(){this.showWidgetUI(),this.callback&&(J.getInstance().sendMessage({name:"set-form-data",data:{formKey:"capture",data:{value:this.type,dirty:!0}}}),this.callback(!0))})),this.type=t}var t,n,r;return t=e,r=[{key:"setPenColor",value:function(e){for(var t=document.querySelectorAll(".bb-pen-tip"),n=0;n<t.length;n++)t[n].style.fill=e}}],(n=[{key:"hideWidgetUI",value:function(){var e=document.querySelector(".bb-feedback-button");e&&(e.style.display="none");var t=document.querySelector(".bb-feedback-dialog-container");t&&(t.style.display="none")}},{key:"showWidgetUI",value:function(){"screenshot"===this.type&&ze.enableScroll(),this.screenRecorder&&this.screenRecorder.stopScreenRecording(),this.unregisterListeners(),this.cleanupMousePointer(),this.screenDrawer&&this.screenDrawer.destroy();var e=document.querySelector(".bb-capture-toolbar");e&&e.remove();var t=document.querySelector(".bb-capture-svg");t&&t.classList.add("bb-capture-svg--preview");var n=document.querySelector(".bb-capture-preview");n&&n.remove();var r=document.querySelector(".bb-feedback-button");r&&(r.style.display="flex");var i=document.querySelector(".bb-feedback-dialog-container");i&&(i.style.display="block");var a=document.querySelector(".bb-capture-dismiss");a&&(a.style.display="none");var o=document.querySelector(".bb-capture-toolbar-item-colorpicker");o&&(o.style.display="none");var s=document.querySelector(".bb-capture-editor-borderlayer");s&&(s.style.display="none")}},{key:"clear",value:function(){var e=document.querySelector(".bb-capture-editor");e&&e.remove()}},{key:"setMouseMove",value:function(e,t){this.dragCursor&&(this.dragCursor.style.left="".concat(e+6,"px"),this.dragCursor.style.top="".concat(t-26,"px"),this.dragCursor.style.right=null)}},{key:"mouseMoveEventHandler",value:function(e){var t=e.pageX-document.documentElement.scrollLeft,n=e.pageY-document.documentElement.scrollTop;this.setMouseMove(t,n)}},{key:"touchMoveEventHandler",value:function(e){var t=e.touches[0].pageX-document.documentElement.scrollLeft,n=e.touches[0].pageY-document.documentElement.scrollTop;this.setMouseMove(t,n)}},{key:"setupMousePointer",value:function(){var e=this;this.dragCursor=document.querySelector(".bb-capture-editor-drag-info");var t=document.querySelector(".bb-capture-svg");t.addEventListener("mouseenter",(function(t){e.dragCursor.style.opacity=1})),t.addEventListener("mouseleave",(function(t){e.dragCursor.style.opacity=0})),document.documentElement.addEventListener("mousemove",this.mouseMoveEventHandler.bind(this)),document.documentElement.addEventListener("touchmove",this.touchMoveEventHandler.bind(this))}},{key:"cleanupMousePointer",value:function(){document.documentElement.removeEventListener("mousemove",this.mouseMoveEventHandler),document.documentElement.removeEventListener("touchmove",this.touchMoveEventHandler),this.dragCursor&&this.dragCursor.remove()}},{key:"createEditorUI",value:function(){var e=document.createElement("div");e.className="bb-capture-editor",e.innerHTML='\n          <div class="bb-capture-editor-borderlayer"></div>\n          <svg class="bb-capture-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve"></svg>\n          <div class="bb-capture-dismiss">'.concat(s("dismiss"),"</div>\n          <div class='bb-capture-editor-drag-info'>").concat(s("rect"),'</div>\n          <div class="bb-capture-toolbar">\n            ').concat("capture"===this.type?'<div class="bb-capture-toolbar-item bb-capture-item-rec bb-capture-toolbar-item-recording" data-type="recording">\n                  '.concat(s("recorderon"),"\n                  ").concat(s("recorderoff"),'\n                  <span class="bb-tooltip bb-tooltip-screen-recording"></span>\n                </div>\n                <div class="bb-capture-toolbar-item bb-capture-item-rec" data-type="mic">\n                  ').concat(s("mic"),'\n                  <span class="bb-tooltip bb-tooltip-audio-recording"></span>\n                </div>\n                <div class="bb-capture-toolbar-item-timer bb-capture-item-rec">2:00</div>\n                <div class="bb-capture-toolbar-item-spacer"></div>\n                <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="pointer">\n                  ').concat(s("pointer"),"\n                </div>"):"",'\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool bb-capture-toolbar-item--active" data-type="rect">\n              ').concat(s("rect"),'\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="pen">\n              ').concat(s("pen"),'\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="blur">\n              ').concat(s("blur"),'\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem" data-type="colorpicker">\n              <div class="bb-capture-toolbar-item-selectedcolor"></div>\n              <span class="bb-tooltip">').concat(Ze.translateText("Pick a color"),'</span>\n            </div>\n            <div class="bb-capture-toolbar-item bb-capture-toolbar-drawingitem bb-capture-toolbar-item-tool" data-type="undo">\n              ').concat(s("undo"),'\n              <span class="bb-tooltip">').concat(Ze.translateText("Undo"),"</span>\n            </div>\n            ").concat("capture"!==this.type?'<div class="bb-capture-button-next">'.concat(Ze.translateText("Next"),"</div>"):"",'\n          </div>\n          <div class="bb-capture-toolbar-item-colorpicker">\n            <div class="bb-capture-toolbar-item-color" data-color="#EB144C"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#FF6705"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#FDB903"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#9900EE"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#00D082"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#0A93E4"></div>\n            <div class="bb-capture-toolbar-item-color" data-color="#CCCCCC"></div>\n          </div>\n          <div class="bb-capture-preview">\n            <div class="bb-capture-preview-inner">\n              <video controls muted autoplay></video>\n              <div class="bb-capture-preview-buttons">\n                <div class="bb-capture-preview-retrybutton">').concat(Ze.translateText("Retry"),'</div>\n                <div class="bb-capture-preview-sendbutton">').concat(Ze.translateText("Next"),"</div>\n              </div>\n            </div>\n          </div>\n        "),document.body.appendChild(e),e.setAttribute("dir",Ze.getInstance().isRTLLayout?"rtl":"ltr")}},{key:"unregisterListeners",value:function(){this.escListener&&document.removeEventListener("keydown",this.escListener),this.pageLeaveListener&&window.removeEventListener("beforeunload",this.pageLeaveListener)}},{key:"registerListeners",value:function(){var e=this;this.escListener=function(t){var n=!1,r=!1;"key"in(t=t||window.event)&&(n="Escape"===t.key,r="Enter"===t.key),n&&e.dismiss(),"screenshot"===e.type&&r&&e.showNextStep()},document.addEventListener("keydown",this.escListener),this.pageLeaveListener=function(e){e.preventDefault(),e.returnValue=""},window.addEventListener("beforeunload",this.pageLeaveListener)}},{key:"show",value:function(e){this.callback=e,this.registerListeners(),this.hideWidgetUI(),this.createEditorUI(),this.setupMousePointer(),"screenshot"===this.type?(ft.getInstance().setGlobalDataItem("snapshotPosition",{x:window.scrollX,y:window.scrollY}),ze.disableScroll()):this.setupScreenRecording(),this.screenDrawer=new Be(this.captureScreenDrawerRerender.bind(this)),this.setupColorPicker(),this.setupToolbar()}},{key:"setupColorPicker",value:function(){for(var t=this,n=document.querySelector(".bb-capture-toolbar-item-selectedcolor"),r=document.querySelectorAll(".bb-capture-toolbar-item-color"),i=document.querySelector(".bb-capture-toolbar-item-colorpicker"),a=function(){var a=r[o],s=a.getAttribute("data-color");a.style.backgroundColor=s,a.onclick=function(){a&&(t.screenDrawer.setColor(s),i&&(i.style.display="none"),n.style.backgroundColor=a.style.backgroundColor,e.setPenColor(s))}},o=0;o<r.length;o++)a()}},{key:"dismiss",value:function(){this.showWidgetUI(),this.callback&&this.callback(!1)}},{key:"setupToolbar",value:function(){var e=this;document.querySelector(".bb-capture-dismiss").onclick=function(){e.dismiss()};var t=document.querySelector(".bb-capture-button-next");t&&(t.onclick=this.showNextStep.bind(this));for(var n=document.querySelector(".bb-capture-toolbar-item-colorpicker"),r=document.querySelector(".bb-capture-svg"),i=document.querySelectorAll(".bb-capture-toolbar-item"),a=function(){var t=i[o];t.onclick=function(){var i=t.getAttribute("data-type");if(n&&"colorpicker"!==i&&(n.style.display="none"),"mic"===i&&e.screenRecorder.toggleAudio(),"recording"===i&&(e.screenRecorder.isRecording?e.screenRecorder.stopScreenRecording():e.screenRecorder.startScreenRecording()),"capture"!==e.type||e.screenRecorder.isRecording){if("pen"===i||"blur"===i||"rect"===i||"pointer"===i){for(var a=document.querySelectorAll(".bb-capture-toolbar-item-tool"),o=0;o<a.length;o++)a[o].classList.remove("bb-capture-toolbar-item--active");if(t.classList.add("bb-capture-toolbar-item--active"),e.screenDrawer.setTool(i),e.dragCursor.innerHTML="","pointer"===i)r.style.pointerEvents="none";else{r.style.pointerEvents="auto";try{var s=t.querySelector("svg").cloneNode(!0);s&&e.dragCursor&&e.dragCursor.appendChild(s)}catch(c){}}}"colorpicker"===i&&("flex"===n.style.display?n.style.display="none":n.style.display="flex"),"undo"===i&&e.screenDrawer.removeLastAddedPathFromSvg()}}},o=0;o<i.length;o++)a()}},{key:"captureScreenDrawerRerender",value:function(){if(this.screenDrawer)for(var e="bb-capture-editor-item-inactive",t=document.querySelectorAll(".bb-capture-toolbar-item"),n=0;n<t.length;n++){var r=t[n];switch(r.getAttribute("data-type")){case"undo":null!=this.screenDrawer.pathBuffer&&this.screenDrawer.pathBuffer.length>0?r.classList.remove(e):r.classList.add(e)}}}},{key:"captureRenderer",value:function(){if(this.screenRecorder){this.screenRecorder.file&&ft.getInstance().setGlobalDataItem("screenRecordingData",this.screenRecorder.file);var e="bb-capture-editor-item-inactive",t=document.querySelector(".bb-capture-toolbar-item-timer"),n=document.querySelectorAll(".bb-capture-toolbar-item"),r=document.querySelector(".bb-tooltip-screen-recording"),i=document.querySelector(".bb-tooltip-audio-recording"),a=document.querySelector(".bb-capture-editor"),o="bb-capture-editor-recording",s="bb-capture-editor-notrecording";this.screenRecorder.isRecording?(a.classList.add(o),a.classList.remove(s)):(a.classList.add(s),a.classList.remove(o));var c=document.querySelector(".bb-capture-toolbar");document.querySelector(".bb-capture-preview").style.display=this.screenRecorder.file?"flex":"none",c.style.display=this.screenRecorder.file?"none":"flex";for(var l=0;l<n.length;l++){var u=n[l];switch(u.getAttribute("data-type")){case"mic":this.screenRecorder.audioAvailable&&this.screenRecorder.available?(u.classList.remove(e),this.screenRecorder.audioMuted?(u.classList.add("bb-capture-toolbar-item--inactivecross"),i.innerHTML=Ze.translateText("Unmute")):(u.classList.remove("bb-capture-toolbar-item--inactivecross"),i.innerHTML=Ze.translateText("Mute"))):(u.classList.add(e),u.classList.add("bb-capture-toolbar-item--inactivecross"),i.innerHTML=Ze.translateText("Browser not supported"));break;case"recording":this.screenRecorder.available?(u.classList.remove(e),this.screenRecorder.isRecording?(u.setAttribute("data-active","true"),r.innerHTML=Ze.translateText("Stop recording"),t.style.display="block"):(u.setAttribute("data-active","false"),r.innerHTML=Ze.translateText("Start recording"),t.style.display="none")):(u.classList.add(e),r.innerHTML=Ze.translateText("Browser not supported"))}}}}},{key:"setupScreenRecording",value:function(){var e=this;document.querySelector(".bb-capture-preview-sendbutton").onclick=this.showNextStep.bind(this),document.querySelector(".bb-capture-preview-retrybutton").onclick=function(){e.screenRecorder.clearPreview(),e.screenDrawer&&e.screenDrawer.clear()},this.screenRecorder=new W(this.captureRenderer.bind(this),Ze.translateText("You denied access to screen sharing. Please turn it on in your browser settings."))}}])&&_e(t.prototype,n),r&&_e(t,r),e}();function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Xe(this,"customTranslation",{}),Xe(this,"overrideLanguage",""),Xe(this,"isRTLLayout",!1)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"translateText",value:function(t){if(!t)return"";var n=e.getInstance(),r="en";"undefined"!=typeof navigator&&(r=navigator.language.substring(0,2).toLowerCase()),n.overrideLanguage&&""!==n.overrideLanguage&&(r=n.overrideLanguage.toLowerCase());var i=function(e){for(var t=null,r=Object.keys(n.customTranslation),i=0;i<r.length;i++){var a=r[i];e&&a&&e===a.toLowerCase()&&n.customTranslation[a]&&(t=n.customTranslation[a])}return t},a=i(r);if(!a&&r){var o=r.split("-");o&&o.length>1&&(a=i(o[0]))}return a&&a[t]?a[t]:t}}],(n=[{key:"getOverrideLanguage",value:function(){return this.overrideLanguage}},{key:"setOverrideLanguage",value:function(e){this.overrideLanguage=e,J.getInstance().sendConfigUpdate(),this.updateRTLSupport()}},{key:"updateRTLSupport",value:function(){this.isRTLLayout="true"===e.translateText("rtlLang"),fe.getInstance().updateFeedbackButtonState(),J.getInstance().updateFrameStyle()}},{key:"setCustomTranslation",value:function(e){this.customTranslation=e}}])&&Ke(t.prototype,n),r&&Ke(t,r),e}();function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xe(Ze,"instance",void 0);var Ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Je(this,"shortCutListener",void 0)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"start",value:function(){this.shortCutListener||(this.shortCutListener=document.addEventListener("keyup",(function(e){var t,n,r=(void 0!==(t=e).key?n=t.key:void 0!==t.keyIdentifier?n=t.keyIdentifier:void 0!==t.keyCode&&(n=t.keyCode),n);!e.ctrlKey||"i"!==r&&"I"!==r&&73!==r||ft.startFeedbackFlowWithOptions("bugreporting",{autostartDrawing:!0})})))}},{key:"stop",value:function(){this.shortCutListener&&(document.removeEventListener("keyup",this.shortCutListener),this.shortCutListener=void 0)}}])&&Ve(t.prototype,n),r&&Ve(t,r),e}();function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Je(Ye,"instance",void 0);var et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qe(this,"formPreFill",{})}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=null)&&$e(t.prototype,n),r&&$e(t,r),e}();function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qe(et,"instance",void 0);var rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nt(this,"notificationContainer",null),nt(this,"notifications",[]),nt(this,"unreadCount",0),nt(this,"unreadNotificationsKey","unread-notifications")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],(n=[{key:"injectNotificationUI",value:function(){if(!this.notificationContainer){var e=document.createElement("div");e.className="gleap-notification-container",document.body.appendChild(e),this.notificationContainer=e;var t=g(this.unreadNotificationsKey);t&&t.length>0&&(this.notifications=t,this.renderNotifications())}}},{key:"setNotificationCount",value:function(e){J.getInstance().isOpened()?this.unreadCount=0:(this.unreadCount=e,fe.getInstance().updateNotificationBadge(this.unreadCount))}},{key:"showNotification",value:function(e){this.notificationContainer&&e&&e.data&&(this.notifications.find((function(t){return e.outbound===t.outbound}))||this.notifications.push(e),this.notifications.length>2&&this.notifications.shift(),m(this.unreadNotificationsKey,this.notifications),this.renderNotifications())}},{key:"renderNotifications",value:function(){var e=this;if(this.notificationContainer){this.clearAllNotifications(!0);for(var t=function(){var t=e.notifications[n];r=(r=t.data.text).replaceAll("{{name}}",L.getInstance().getName());var i=document.createElement("div");i.onclick=function(){t.data.conversation?ft.openConversation(t.data.conversation.shareToken):ft.open()},i.className="gleap-notification-item",i.innerHTML="\n            ".concat(t.data.sender&&t.data.sender.profileImageUrl&&'<img src="'.concat(t.data.sender.profileImageUrl,'" />'),'\n            <div class="gleap-notification-item-container">\n                ').concat(t.data.sender?'<div  class="gleap-notification-item-sender">'.concat(t.data.sender.name,"</div>"):"",'\n                <div class="gleap-notification-item-content">').concat(r,"</div>\n            </div>"),e.notificationContainer.appendChild(i)},n=0;n<this.notifications.length;n++){var r;t()}}}},{key:"clearAllNotifications",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.notificationContainer)for(e||(this.notifications=[],m(this.unreadNotificationsKey,this.notifications));this.notificationContainer.firstChild;)this.notificationContainer.removeChild(this.notificationContainer.firstChild)}}])&&tt(t.prototype,n),r&&tt(t,r),e}();function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}nt(rt,"instance",void 0);var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"ping",value:function(){try{this.audio||(this.audio=new Audio("https://js.gleap.io/res/ping.mp3")),this.audio.play()}catch(e){}}}],(n=null)&&it(t.prototype,n),r&&it(t,r),e}();function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(at,"audio",void 0),"undefined"!=typeof HTMLCanvasElement&&HTMLCanvasElement.prototype&&(HTMLCanvasElement.prototype.__originalGetContext=HTMLCanvasElement.prototype.getContext,HTMLCanvasElement.prototype.getContext=function(e,t){return this.__originalGetContext(e,ct(ct({},t),{},{preserveDrawingBuffer:!0}))});var ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lt(this,"initialized",!1),lt(this,"offlineMode",!1),lt(this,"globalData",{screenRecordingData:null,webReplay:null,snapshotPosition:{x:0,y:0}}),"undefined"!=typeof window&&(Q.getInstance(),ie.getInstance().start(),le.getInstance().start(),de.getInstance().start(),Re.getInstance().start())}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}},{key:"setOfflineMode",value:function(e){this.getInstance().offlineMode=e}},{key:"disableConsoleLogOverwrite",value:function(){ie.getInstance().stop()}},{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INFO";ie.getInstance().addLog(e,t)}},{key:"initialize",value:function(e){var t=this.getInstance();if(t.initialized)console.warn("Gleap already initialized.");else{t.initialized=!0;var n=L.getInstance();n.sdkKey=e,n.setOnSessionReady((function(){O.getInstance().start().then((function(){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?t.postInitialization():document.addEventListener("DOMContentLoaded",(function(e){t.postInitialization()}))})).catch((function(e){console.warn("Failed to initialize Gleap.")}))})),n.startSession()}}},{key:"identify",value:function(e,t,n){return L.getInstance().identifySession(e,b(t),n)}},{key:"clearIdentity",value:function(){L.getInstance().clearSession()}},{key:"isOpened",value:function(){return J.getInstance().isOpened()}},{key:"hide",value:function(){J.getInstance().hideWidget()}},{key:"close",value:function(){J.getInstance().hideWidget()}},{key:"open",value:function(){J.getInstance().setAppMode("widget"),J.getInstance().showWidget()}},{key:"logEvent",value:function(e,t){R.getInstance().logEvent(e,t)}},{key:"preFillForm",value:function(e){et.getInstance().formPreFill=b(e),J.getInstance().sendFormPreFillData()}},{key:"on",value:function(e,t){we.on(e,t)}},{key:"enableShortcuts",value:function(e){e?Ye.getInstance().start():Ye.getInstance().stop()}},{key:"showFeedbackButton",value:function(e){fe.getInstance().toggleFeedbackButton(e)}},{key:"setAppVersionCode",value:function(e){Q.setAppVersionCode(e)}},{key:"setAppBuildNumber",value:function(e){Q.setAppBuildNumber(e)}},{key:"setApiUrl",value:function(e){L.getInstance().apiUrl=e}},{key:"setFrameUrl",value:function(e){J.getInstance().frameUrl=e}},{key:"attachCustomData",value:function(e){ge.getInstance().attachCustomData(e)}},{key:"setCustomData",value:function(e,t){ge.getInstance().setCustomData(e,t)}},{key:"removeCustomData",value:function(e){ge.getInstance().removeCustomData(e)}},{key:"clearCustomData",value:function(){ge.getInstance().clearCustomData()}},{key:"setLanguage",value:function(e){Ze.getInstance().setOverrideLanguage(e)}},{key:"registerCustomAction",value:function(e){Ce.registerCustomAction(e)}},{key:"triggerCustomAction",value:function(e){Ce.triggerCustomAction(e)}},{key:"setStyles",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?o(e,0,n,i,r):document.addEventListener("DOMContentLoaded",(function(t){o(e,0,n,i,r)}))}},{key:"sendSilentCrashReport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MEDIUM",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{screenshot:!0,replays:!0,attachments:!0};return e.sendSilentCrashReportWithFormData({description:t},n,r)}},{key:"sendSilentCrashReportWithFormData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MEDIUM",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{screenshot:!0,replays:!0,attachments:!0},r=n?b(n):{},i=L.getInstance();if(i.ready){var a=e||{};i.session.email&&(a.reportedBy=i.session.email);var o=new X("CRASH",t,a,!0,r);o.sendFeedback().then((function(){})).catch((function(e){}))}}},{key:"startFeedbackFlow",value:function(t,n){e.startFeedbackFlowWithOptions(t,{hideBackButton:!n})}},{key:"startFeedbackFlowWithOptions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.actionOutboundId,a=n.autostartDrawing,o=n.hideBackButton,s=n.format,c=L.getInstance();if(c.ready){e.getInstance().setGlobalDataItem("snapshotPosition",{x:window.scrollX,y:window.scrollY});var l="start-feedbackflow";r&&(l="start-survey"),J.getInstance().setAppMode(r?s:"widget"),J.getInstance().sendMessage({name:l,data:{flow:t,actionOutboundId:i,hideBackButton:o,format:s}}),a?J.getInstance().showDrawingScreen("screenshot"):J.getInstance().showWidget()}}},{key:"openConversation",value:function(e){e&&(J.getInstance().sendMessage({name:"open-conversation",data:{shareToken:e}}),J.getInstance().showWidget())}},{key:"showNotification",value:function(e){rt.getInstance().showNotification(e),e&&e.sound&&at.ping()}}],(n=[{key:"isLiveMode",value:function(){if(!0===this.offlineMode)return!1;var e=window.location.hostname;return!(["localhost","127.0.0.1","0.0.0.0","","::1"].includes(e)||e.startsWith("192.168.")||e.startsWith("10.0.")||e.endsWith(".local")||!e.includes("."))}},{key:"postInitialization",value:function(){L.getInstance().setOnSessionReady(function(){setTimeout((function(){J.getInstance().injectFrame()}),100)}.bind(this))}},{key:"performActions",value:function(t){for(var n=0;n<t.length;n++){var r=t[n];r&&r.outbound&&r.actionType&&("notification"===r.actionType?e.showNotification(r):e.startFeedbackFlowWithOptions(r.actionType,{actionOutboundId:r.outbound,hideBackButton:!0,format:r.format},!0))}}},{key:"setGlobalDataItem",value:function(e,t){this.globalData[e]=t}},{key:"getGlobalDataItem",value:function(e){return this.globalData[e]}},{key:"takeCurrentReplay",value:function(){var e=this;qe.getInstance().getReplayData().then((function(t){t&&e.setGlobalDataItem("webReplay",t)})).catch((function(e){}))}}])&&ot(t.prototype,n),r&&ot(t,r),e}();if(lt(ut,"instance",void 0),"undefined"!=typeof window){var dt=window.GleapActions;if(dt&&dt.length>0)for(var pt=0;pt<dt.length;pt++){var ht=dt[pt];ht&&ht.e&&ut[ht.e]&&ut[ht.e].apply(ut,ht.a)}}const ft=ut,bt=ft;return t=t.default})()}));