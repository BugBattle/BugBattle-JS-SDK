{"version":3,"sources":["../../webpack/universalModuleDefinition","../../webpack/bootstrap","../../node_modules/sanctuary-type-identifiers/index.js","../../node_modules/webpack/buildin/amd-options.js","../../node_modules/sanctuary-show/index.js","../../node_modules/fluture/src/internal/const.js","../../node_modules/fluture/src/internal/list.js","../../node_modules/fluture/src/internal/debug.js","../../node_modules/fluture/src/internal/utils.js","../../node_modules/fluture/src/internal/error.js","../../node_modules/fluture/src/internal/predicates.js","../../node_modules/fluture/src/internal/iteration.js","../../node_modules/fluture/src/future.js","../../node_modules/fluture/src/after.js","../../node_modules/fluture/src/alt.js","../../node_modules/fluture/src/and.js","../../node_modules/fluture/src/ap.js","../../node_modules/fluture/src/encase-p.js","../../node_modules/fluture/src/attempt-p.js","../../node_modules/fluture/src/encase.js","../../node_modules/fluture/src/attempt.js","../../node_modules/fluture/src/bimap.js","../../node_modules/fluture/src/bichain.js","../../node_modules/fluture/src/internal/parallel.js","../../node_modules/fluture/src/both.js","../../node_modules/fluture/src/cache.js","../../node_modules/fluture/src/chain-rej.js","../../node_modules/fluture/src/chain.js","../../node_modules/fluture/src/coalesce.js","../../node_modules/fluture/src/fork.js","../../node_modules/fluture/src/go.js","../../node_modules/fluture/src/internal/timing.js","../../node_modules/fluture/src/hook.js","../../node_modules/fluture/src/lastly.js","../../node_modules/fluture/src/map-rej.js","../../node_modules/fluture/src/map.js","../../node_modules/fluture/src/node.js","../../node_modules/fluture/src/pap.js","../../node_modules/fluture/src/parallel.js","../../node_modules/fluture/src/race.js","../../node_modules/fluture/src/par.js","../../node_modules/fluture/src/reject-after.js","../../node_modules/fluture/src/seq.js","../../node_modules/fluture/src/swap.js","../../node_modules/fp-ts/es6/function.js","../../node_modules/fp-ts/es6/Either.js","../../node_modules/fp-ts/es6/pipeable.js","../../node_modules/fp-ts-fluture/es6/Future.js","../../node_modules/fp-ts/es6/ReadonlyArray.js","../../node_modules/fp-ts/es6/Array.js","../../node_modules/@gripeless/pico/dist/clone.js","../../node_modules/@gripeless/pico/dist/element.js","../../node_modules/@gripeless/pico/dist/error.js","../../node_modules/@gripeless/pico/dist/container.js","../../node_modules/@gripeless/pico/dist/window-info.js","../../node_modules/@gripeless/pico/dist/error-stack.js","../../node_modules/@gripeless/pico/dist/noop.js","../../node_modules/@gripeless/pico/dist/export.js","../../node_modules/@gripeless/pico/dist/future.js","../../node_modules/@gripeless/pico/dist/download.js","../../node_modules/@gripeless/pico/dist/inline.js","../../node_modules/@gripeless/pico/dist/options.js","../../node_modules/@gripeless/pico/dist/index.js","BugBattle.js","index.js"],"names":["root","factory","exports","module","define","amd","window","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","f","self","sanctuaryTypeIdentifiers","pattern","RegExp","type","x","constructor","toString","slice","length","parse","s","namespace","name","version","groups","exec","Number","__webpack_amd_options__","sanctuaryShow","seen","entry","o","k","show","sortedKeys","keys","sort","indexOf","valueOf","Infinity","JSON","stringify","isNaN","NaN","toISOString","message","Array","map","join","push","concat","filter","test","pop","from","values","entries","String","FL","ordinal","$$type","List","head","tail","this","toJSON","toArray","nil","isNil","list","cons","reverse","xs","ys","arr","captureStackTrace","Error","e","stack","split","_debug","debugHandleNone","debug","fn","a","b","c","captureContext","previous","tag","debugCaptureContext","context","debugCaptureApplicationContext","n","setImmediate","setTimeout","noop","raise","showArg","typeError","TypeError","invalidArgument","it","at","expected","actual","invalidArgumentOf","invalidFuture","desc","m","id","invalidVersion","invalidFutureArgument","assignUnenumerable","prop","defineProperty","writable","configurable","wrapException","caught","callingFuture","origin","_","ensureError","zs","cat","future","reason","withExtraContext","contextToStackTrace","isFunction","isObject","hasMethod","method","isFunctor","isApply","Next","done","Done","getArgs","args","arity","i","arg","any","pred","error","func","isFuture","positiveInteger","application","prev","captureApplicationContext","charAt","toUpperCase","invalidArity","application1","Future","computation","arguments","Computation","createInterpreter","interpret","Interpreter","$1","$2","$3","create","_interpret","step","init","_transform","ChainTransformation","chainRec$recur","pipe","Future$FL$ap","other","ApTransformation","Future$FL$map","mapper","MapTransformation","Future$FL$bimap","lmapper","rmapper","BimapTransformation","Future$FL$chain","Future$FL$alt","AltTransformation","extractLeft","extractRight","transformation","Transformer","isTransformer","$","kind","rec","rej","res","open","cancel","cont","Never","_isNever","never","Crash","Reject","Resolve","settled","cold","hot","async","nextHot","nextCold","settle","exception","rejected","resolved","warmupActions","drain","early","terminator","Sequence$cancel","run","reduce","str","action","BaseTransformation","wrapHandler","handler","createTransformation","Transformation","After","clearTimeout","alternative","left","context1","alt","right","context2","AndTransformation","apply","mx","ap","mf","EncaseP","p","Promise","then","invalidPromise","encaseP","attemptP","undefined","Encase","r","encase","attempt","bifunctor","bimap","g","context3","Eager","_this","crashed","earlyCrash","earlyReject","createParallelTransformation","ParallelTransformation","assign","eager","Parallel$early","PairTransformation","BothTransformation","both","Queued","Cache","_state","_addToQueue","_value","_queue","_cancel","_queued","reset","_drainQueue","queue","state","crash","reject","resolve","monad","chain","CoalesceTransformation","coalesce","fork","invalidState","iterator","timing","next","resource","_acquire","_dispose","_consume","cancelConsume","Hook$done","Hook$rec","Hook$dispose","disposal","Hook$cancelDisposal","Hook$disposalRejected","Hook$cancelConsumption","Hook$consumptionException","Hook$consumptionRejected","Hook$consumptionResolved","cancelAcquire","consumption","invalidConsumption","MapRejTransformation","mapRej","functor","err","val","ParallelApTransformation","futureArray","isArray","Parallel","futures","max","Math","min","cancels","out","cursor","running","blocked","Parallel$cancel","Parallel$run","idx","Parallel$drain","emptyArray","RaceTransformation","race","ConcurrentFuture","sequential","Par","zeroInstance","Par$FL$map","Par$FL$ap","Par$FL$alt","RejectAfter","identity","flow","ab","bc","cd","de","ef","fg","gh","hi","ij","jk","kl","lm","mn","no","op","pq","qr","rs","st","isLeft","ma","_tag","fa","URI","of","fab","fea","mapLeft","fx","chainRec","recur","onLeft","onRight","throwError","fromTask","fromIO","I","contramap","isContravariant","mapWithIndex","isFunctorWithIndex","apFirst","fb","apSecond","chainFirst","flatten","mma","extend","isExtend","wa","duplicate","isFoldable","foldMap","M","foldMapM","reduceRight","reduceWithIndex","isFoldableWithIndex","foldMapWithIndex","reduceRightWithIndex","that","compact","isCompactable","separate","isFilterable","predicate","filterMap","partition","partitionMap","filterWithIndex","isFilterableWithIndex","predicateWithIndex","filterMapWithIndex","partitionWithIndex","partitionMapWithIndex","promap","isProfunctor","compose","isSemigroupoid","isMonadThrow","fromOption","onNone","fromEither","fromPredicate","onFalse","filterOrElse","pipeable","zipWith","fc","len","reduceWithIndex_","l","rLen","start","j","as","zip","bs","__read","Symbol","ar","__spread","__values","isHTMLElement","element","HTMLElement","isHTMLOrSVGElement","SVGElement","defaultNaN","defaultTo","getScrolledElements","$target","querySelectorAll","$el","scrollTop","scrollLeft","container","$clone","e_5","_a","cloneId","dataset","$original","parentWindow","document","querySelector","style","position","overflow","width","offsetWidth","height","offsetHeight","$clonedChildren","children","$originalChildren","lastChild","$$zippedChildren","scrollTopRemaining","scrollLeftRemaining","$$zippedChildren_1","$$zippedChildren_1_1","_b","$originalChild","$clonedChild","originalChildStyles","getComputedStyle","lastChildBoundingRect","getBoundingClientRect","top","parseInt","zIndex","e_5_1","return","console","warn","cloneBody","ignoredSelectors","e_1","_c","random","substring","e_1_1","attachCloneID","html","tree","className","cssText","svg","fontSize","selectors","$clonedBody","body","cloneNode","$node","Element","forEach","selector","e_7","remove","e_7_1","appendChild","e_4","_loop_2","$clonedInputOrTextarea","$originalInputOrTextarea","find","HTMLInputElement","checked","setAttribute","HTMLTextAreaElement","contents","createTextNode","innerHTML","e_4_1","cloneInputs","e_3","_loop_1","$clonedCanvas","$originalCanvas","$replacementImg","createElement","src","toDataURL","parent_1","parentNode","replaceChild","e_3_1","cloneCanvases","e_6","$cloned","e_6_1","transform","cloneScrolls","HTMLBodyElement","margin","e_2","$element","removeAttribute","e_2_1","removeCloneID","$document","tagName","properties","windowInfo","innerWidth","innerHeight","h","options","createElementNS","$iframe","$svg","backgroundColor","$window","getBackgroundColor","$foreignObject","y","$newHtml","$newHead","$head","$body","$html","HTMLHtmlElement","ErrorStack$","errors","fromError","fromErrors","serializeSVGToDataURL","encodeURIComponent","XMLSerializer","serializeToString","$canvas","toBlob","maybeBlob","ms","scalingRatio","devicePixelRatio","ctx","getContext","fl","timeout","$img","Image","onerror","onload","setTransform","drawImage","dataURL","fetch","blob","catch","URL","createObjectURL","url","cache","response","ok","status","statusText","text","reader","FileReader","onloadend","result","readAsDataURL","abort","downloadErrorToDetailedError","downloadError","parallelAll","parallel","isCSSStyleSheet","sheet","CSSStyleSheet","baseURL","styleSheetText","$stylesheetStyle","implementation","createHTMLDocument","cssRules","URL_REGEX","replaceAllAsync","regex","replaceFn","input","global","sticky","theWholeMatch","firstGroup","index","middleF","endF","middle","end","absoluteURL","rule","CSSStyleRule","ruleName","ruleStyle","CSSFontFaceRule","CSSMediaRule","matchMedia","media","mediaText","matches","CSSImportRule","href","CSSPageRule","foldValueFn","initValue","stacks","styleSheets","styleSheet","$image","eithers","location","styleContents","$style","secondStack","defaults","ignore","partialOptions","objectURL","BugBattle","sdkKey","activation","localStorage","getItem","Date","instance","msg","lineNo","columnNo","addLog","startCrashFlow","crashDetectorEnabled","bugReportingRunning","crashDetected","startBugReporting","priority","log","logArray","date","origConsole","originalConsoleLog","info","v","previousBodyOverflow","elem","sendButton","onclick","hide","createBugReportingDialog","mainColor","privacyPolicyContainer","privacyPolicyInputLabel","privacyPolicyInput","privacyPolicyCheckEnabled","display","privacyPolicyUrl","poweredByContainer","poweredByHidden","cancelButton","emailField","textArea","oninput","scrollHeight","email","description","setItem","toggleLoading","alert","preScreenshotCleanup","scrollTo","snapshotPosition","screen","screenshot","prepareScreenshot","showError","exp","item","editorContainer","dialogContainer","feedbackBtn","enableScroll","overwriteConsoleLog","startCrashDetection","readyState","checkForInitType","addEventListener","event","FEEDBACK_BUTTON","injectFeedbackButton","loading","header","loader","success","dataURI","byteString","atob","mimeString","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","imageObj","pixelRatio","canvas","editorDot","editorRectangle","beginPath","arc","offsetLeft","offsetTop","PI","fillStyle","fill","closePath","lineWidth","strokeStyle","stroke","strokeRect","uploadScreenshot","http","XMLHttpRequest","apiUrl","setRequestHeader","onreadystatechange","DONE","responseText","fileUrl","screenshotURL","sendBugReportToServer","file","dataURItoBlob","formData","FormData","append","send","showSuccessMessage","bugReportData","reportedBy","severity","screenshotUrl","customData","metaData","getMetaData","consoleLog","nameOffset","verOffset","ix","nAgt","navigator","userAgent","browserName","appName","fullVersion","parseFloat","appVersion","majorVersion","lastIndexOf","toLowerCase","OSName","sessionDuration","getTime","sessionStart","browser","systemName","buildVersionNumber","appBuildNumber","releaseVersionNumber","appVersionCode","screenWidth","screenHeight","currentUrl","language","userLanguage","bugReportingEditor","addedMarker","clickStartX","clickStartY","setStartPoint","setMouseMove","dragInfo","heightAbs","widthAbs","mouseUpEventHandler","pageX","documentElement","pageY","touches","preventDefault","enabled","data","color","colorStyleSheet","node","disableScroll","scrollX","scrollY","askForCrashReport","showBugReportEditor"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"BugBattle\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BugBattle\"] = factory();\n\telse\n\t\troot[\"BugBattle\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","/*\n        @@@@@@@            @@@@@@@         @@\n      @@       @@        @@       @@      @@@\n    @@   @@@ @@  @@    @@   @@@ @@  @@   @@@@@@ @@   @@@  @@ @@@      @@@@\n   @@  @@   @@@   @@  @@  @@   @@@   @@   @@@   @@   @@@  @@@   @@  @@@   @@\n   @@  @@   @@@   @@  @@  @@   @@@   @@   @@@   @@   @@@  @@@   @@  @@@@@@@@\n   @@  @@   @@@  @@   @@  @@   @@@  @@    @@@   @@   @@@  @@@   @@  @@@\n    @@   @@@ @@@@@     @@   @@@ @@@@@      @@@    @@@ @@  @@@@@@      @@@@@\n      @@                 @@                           @@  @@\n        @@@@@@@            @@@@@@@               @@@@@    @@\n                                                          */\n//. # sanctuary-type-identifiers\n//.\n//. A type is a set of values. Boolean, for example, is the type comprising\n//. `true` and `false`. A value may be a member of multiple types (`42` is a\n//. member of Number, PositiveNumber, Integer, and many other types).\n//.\n//. In certain situations it is useful to divide JavaScript values into\n//. non-overlapping types. The language provides two constructs for this\n//. purpose: the [`typeof`][1] operator and [`Object.prototype.toString`][2].\n//. Each has pros and cons, but neither supports user-defined types.\n//.\n//. sanctuary-type-identifiers comprises:\n//.\n//.   - an npm and browser -compatible package for deriving the\n//.     _type identifier_ of a JavaScript value; and\n//.   - a specification which authors may follow to specify type\n//.     identifiers for their types.\n//.\n//. ### Specification\n//.\n//. For a type to be compatible with the algorithm:\n//.\n//.   - every member of the type MUST have a `@@type` property\n//.     (the _type identifier_); and\n//.\n//.   - the type identifier MUST be a string primitive and SHOULD have\n//.     format `'<namespace>/<name>[@<version>]'`, where:\n//.\n//.       - `<namespace>` MUST consist of one or more characters, and\n//.         SHOULD equal the name of the npm package which defines the\n//.         type (including [scope][3] where appropriate);\n//.\n//.       - `<name>` MUST consist of one or more characters, and SHOULD\n//.         be the unique name of the type; and\n//.\n//.       - `<version>` MUST consist of one or more digits, and SHOULD\n//.         represent the version of the type.\n//.\n//. If the type identifier does not conform to the format specified above,\n//. it is assumed that the entire string represents the _name_ of the type;\n//. _namespace_ will be `null` and _version_ will be `0`.\n//.\n//. If the _version_ is not given, it is assumed to be `0`.\n(function (f) {\n  'use strict';\n  /* istanbul ignore else */\n\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = f();\n  } else if (typeof define === 'function' && define.amd != null) {\n    define([], f);\n  } else {\n    self.sanctuaryTypeIdentifiers = f();\n  }\n})(function () {\n  'use strict'; //  $$type :: String\n\n  var $$type = '@@type'; //  pattern :: RegExp\n\n  var pattern = new RegExp('^' + '([\\\\s\\\\S]+)' //  <namespace>\n  + '/' //  SOLIDUS (U+002F)\n  + '([\\\\s\\\\S]+?)' //  <name>\n  + '(?:' //  optional non-capturing group {\n  + '@' //    COMMERCIAL AT (U+0040)\n  + '([0-9]+)' //    <version>\n  + ')?' //  }\n  + '$'); //. ### Usage\n  //.\n  //. ```javascript\n  //. const type = require ('sanctuary-type-identifiers');\n  //. ```\n  //.\n  //. ```javascript\n  //. > const Identity$prototype = {\n  //. .   '@@type': 'my-package/Identity@1',\n  //. .   '@@show': function() {\n  //. .     return 'Identity (' + show (this.value) + ')';\n  //. .   }\n  //. . }\n  //.\n  //. > const Identity = value =>\n  //. .   Object.assign (Object.create (Identity$prototype), {value})\n  //.\n  //. > type (Identity (0))\n  //. 'my-package/Identity@1'\n  //.\n  //. > type.parse (type (Identity (0)))\n  //. {namespace: 'my-package', name: 'Identity', version: 1}\n  //. ```\n  //.\n  //. ### API\n  //.\n  //# type :: Any -> String\n  //.\n  //. Takes any value and returns a string which identifies its type. If the\n  //. value conforms to the [specification][4], the custom type identifier is\n  //. returned.\n  //.\n  //. ```javascript\n  //. > type (null)\n  //. 'Null'\n  //.\n  //. > type (true)\n  //. 'Boolean'\n  //.\n  //. > type (Identity (0))\n  //. 'my-package/Identity@1'\n  //. ```\n\n  function type(x) {\n    return x != null && x.constructor != null && x.constructor.prototype !== x && typeof x[$$type] === 'string' ? x[$$type] : Object.prototype.toString.call(x).slice('[object '.length, -']'.length);\n  } //# type.parse :: String -> { namespace :: Nullable String, name :: String, version :: Number }\n  //.\n  //. Takes any string and parses it according to the [specification][4],\n  //. returning an object with `namespace`, `name`, and `version` fields.\n  //.\n  //. ```javascript\n  //. > type.parse ('my-package/List@2')\n  //. {namespace: 'my-package', name: 'List', version: 2}\n  //.\n  //. > type.parse ('nonsense!')\n  //. {namespace: null, name: 'nonsense!', version: 0}\n  //.\n  //. > type.parse (type (Identity (0)))\n  //. {namespace: 'my-package', name: 'Identity', version: 1}\n  //. ```\n\n\n  type.parse = function parse(s) {\n    var namespace = null;\n    var name = s;\n    var version = 0;\n    var groups = pattern.exec(s);\n\n    if (groups != null) {\n      namespace = groups[1];\n      name = groups[2];\n      if (groups[3] != null) version = Number(groups[3]);\n    }\n\n    return {\n      namespace: namespace,\n      name: name,\n      version: version\n    };\n  };\n\n  return type;\n}); //. [1]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof\n//. [2]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n//. [3]: https://docs.npmjs.com/misc/scope\n//. [4]: #specification","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","//. # sanctuary-show\n//.\n//. Haskell has a `show` function which can be applied to a compatible value to\n//. produce a descriptive string representation of that value. The idea is that\n//. the string representation should, if possible, be an expression which would\n//. produce the original value if evaluated.\n//.\n//. This library provides a similar [`show`](#show) function.\n//.\n//. In general, this property should hold: `eval (show (x)) = x`. In some cases\n//. parens are necessary to ensure correct interpretation (`{}`, for example,\n//. is an empty block rather than an empty object in some contexts). Thus the\n//. property is more accurately stated `eval ('(' + show (x) + ')') = x`.\n//.\n//. One can make values of a custom type compatible with [`show`](#show) by\n//. defining a `@@show` method. For example:\n//.\n//. ```javascript\n//. //# Maybe#@@show :: Maybe a ~> () -> String\n//. //.\n//. //. ```javascript\n//. //. > show (Nothing)\n//. //. 'Nothing'\n//. //.\n//. //. > show (Just (['foo', 'bar', 'baz']))\n//. //. 'Just ([\"foo\", \"bar\", \"baz\"])'\n//. //. ```\n//. Maybe.prototype['@@show'] = function() {\n//.   return this.isNothing ? 'Nothing' : 'Just (' + show (this.value) + ')';\n//. };\n//. ```\n(function (f) {\n  'use strict';\n  /* istanbul ignore else */\n\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = f();\n  } else if (typeof define === 'function' && define.amd != null) {\n    define([], f);\n  } else {\n    self.sanctuaryShow = f();\n  }\n})(function () {\n  'use strict'; //  $$show :: String\n\n  var $$show = '@@show'; //  seen :: Array Any\n\n  var seen = []; //  entry :: Object -> String -> String\n\n  function entry(o) {\n    return function (k) {\n      return show(k) + ': ' + show(o[k]);\n    };\n  } //  sortedKeys :: Object -> Array String\n\n\n  function sortedKeys(o) {\n    return Object.keys(o).sort();\n  } //# show :: Showable a => a -> String\n  //.\n  //. Returns a useful string representation of the given value.\n  //.\n  //. Dispatches to the value's `@@show` method if present.\n  //.\n  //. Where practical, `show (eval ('(' + show (x) + ')')) = show (x)`.\n  //.\n  //. ```javascript\n  //. > show (null)\n  //. 'null'\n  //.\n  //. > show (undefined)\n  //. 'undefined'\n  //.\n  //. > show (true)\n  //. 'true'\n  //.\n  //. > show (new Boolean (false))\n  //. 'new Boolean (false)'\n  //.\n  //. > show (-0)\n  //. '-0'\n  //.\n  //. > show (NaN)\n  //. 'NaN'\n  //.\n  //. > show (new Number (Infinity))\n  //. 'new Number (Infinity)'\n  //.\n  //. > show ('foo\\n\"bar\"\\nbaz\\n')\n  //. '\"foo\\\\n\\\\\"bar\\\\\"\\\\nbaz\\\\n\"'\n  //.\n  //. > show (new String (''))\n  //. 'new String (\"\")'\n  //.\n  //. > show (['foo', 'bar', 'baz'])\n  //. '[\"foo\", \"bar\", \"baz\"]'\n  //.\n  //. > show ([[[[[0]]]]])\n  //. '[[[[[0]]]]]'\n  //.\n  //. > show ({x: [1, 2], y: [3, 4], z: [5, 6]})\n  //. '{\"x\": [1, 2], \"y\": [3, 4], \"z\": [5, 6]}'\n  //. ```\n\n\n  function show(x) {\n    if (seen.indexOf(x) >= 0) return '<Circular>';\n\n    switch (Object.prototype.toString.call(x)) {\n      case '[object Boolean]':\n        return typeof x === 'object' ? 'new Boolean (' + show(x.valueOf()) + ')' : x.toString();\n\n      case '[object Number]':\n        return typeof x === 'object' ? 'new Number (' + show(x.valueOf()) + ')' : 1 / x === -Infinity ? '-0' : x.toString(10);\n\n      case '[object String]':\n        return typeof x === 'object' ? 'new String (' + show(x.valueOf()) + ')' : JSON.stringify(x);\n\n      case '[object Date]':\n        return 'new Date (' + show(isNaN(x.valueOf()) ? NaN : x.toISOString()) + ')';\n\n      case '[object Error]':\n        return 'new ' + x.name + ' (' + show(x.message) + ')';\n\n      case '[object Arguments]':\n        return 'function () { return arguments; } (' + Array.prototype.map.call(x, show).join(', ') + ')';\n\n      case '[object Array]':\n        seen.push(x);\n\n        try {\n          return '[' + x.map(show).concat(sortedKeys(x).filter(function (k) {\n            return !/^\\d+$/.test(k);\n          }).map(entry(x))).join(', ') + ']';\n        } finally {\n          seen.pop();\n        }\n\n      case '[object Object]':\n        seen.push(x);\n\n        try {\n          return $$show in x && (x.constructor == null || x.constructor.prototype !== x) ? x[$$show]() : '{' + sortedKeys(x).map(entry(x)).join(', ') + '}';\n        } finally {\n          seen.pop();\n        }\n\n      case '[object Set]':\n        seen.push(x);\n\n        try {\n          return 'new Set (' + show(Array.from(x.values())) + ')';\n        } finally {\n          seen.pop();\n        }\n\n      case '[object Map]':\n        seen.push(x);\n\n        try {\n          return 'new Map (' + show(Array.from(x.entries())) + ')';\n        } finally {\n          seen.pop();\n        }\n\n      default:\n        return String(x);\n    }\n  }\n\n  return show;\n});","export var FL = {\n  alt: 'fantasy-land/alt',\n  ap: 'fantasy-land/ap',\n  bimap: 'fantasy-land/bimap',\n  chain: 'fantasy-land/chain',\n  chainRec: 'fantasy-land/chainRec',\n  map: 'fantasy-land/map',\n  of: 'fantasy-land/of',\n  zero: 'fantasy-land/zero'\n};\nexport var ordinal = ['first', 'second', 'third', 'fourth', 'fifth'];\nexport var namespace = 'fluture';\nexport var name = 'Future';\nexport var version = 5;\nexport var $$type = namespace + '/' + name + '@' + version;","export function List(head, tail) {\n  this.head = head;\n  this.tail = tail;\n}\n\nList.prototype.toJSON = function () {\n  return toArray(this);\n};\n\nexport var nil = new List(null, null);\nnil.tail = nil;\nexport function isNil(list) {\n  return list.tail === list;\n} // cons :: (a, List a) -> List a\n//      -- O(1) append operation\n\nexport function cons(head, tail) {\n  return new List(head, tail);\n} // reverse :: List a -> List a\n//         -- O(n) list reversal\n\nexport function reverse(xs) {\n  var ys = nil,\n      tail = xs;\n\n  while (!isNil(tail)) {\n    ys = cons(tail.head, ys);\n    tail = tail.tail;\n  }\n\n  return ys;\n} // cat :: (List a, List a) -> List a\n//     -- O(n) list concatenation\n\nexport function cat(xs, ys) {\n  var zs = ys,\n      tail = reverse(xs);\n\n  while (!isNil(tail)) {\n    zs = cons(tail.head, zs);\n    tail = tail.tail;\n  }\n\n  return zs;\n} // toArray :: List a -> Array a\n//         -- O(n) list to Array\n\nexport function toArray(xs) {\n  var tail = xs,\n      arr = [];\n\n  while (!isNil(tail)) {\n    arr.push(tail.head);\n    tail = tail.tail;\n  }\n\n  return arr;\n}","import { ordinal } from './const.js';\nimport { cons } from './list.js';\n/* c8 ignore next */\n\nvar captureStackTrace = Error.captureStackTrace || captureStackTraceFallback;\nvar _debug = debugHandleNone;\nexport { captureStackTrace };\nexport function debugMode(debug) {\n  _debug = debug ? debugHandleAll : debugHandleNone;\n}\nexport function debugHandleNone(x) {\n  return x;\n}\nexport function debugHandleAll(x, fn, a, b, c) {\n  return fn(a, b, c);\n}\nexport function debug(x, fn, a, b, c) {\n  return _debug(x, fn, a, b, c);\n}\nexport function captureContext(previous, tag, fn) {\n  return debug(previous, debugCaptureContext, previous, tag, fn);\n}\nexport function debugCaptureContext(previous, tag, fn) {\n  var context = {\n    tag: tag,\n    name: ' from ' + tag + ':'\n  };\n  captureStackTrace(context, fn);\n  return cons(context, previous);\n}\nexport function captureApplicationContext(context, n, f) {\n  return debug(context, debugCaptureApplicationContext, context, n, f);\n}\nexport function debugCaptureApplicationContext(context, n, f) {\n  return debugCaptureContext(context, ordinal[n - 1] + ' application of ' + f.name, f);\n}\nexport function captureStackTraceFallback(x) {\n  var e = new Error();\n\n  if (typeof e.stack === 'string') {\n    x.stack = x.name + '\\n' + e.stack.split('\\n').slice(1).join('\\n');\n    /* c8 ignore next 3 */\n  } else {\n    x.stack = x.name;\n  }\n}","export { default as show } from 'sanctuary-show';\n/* c8 ignore next */\n\nvar setImmediate = typeof setImmediate === 'undefined' ? setImmediateFallback : setImmediate;\nexport function noop() {}\nexport function moop() {\n  return this;\n}\nexport function call(f, x) {\n  return f(x);\n}\nexport function setImmediateFallback(f, x) {\n  return setTimeout(f, 0, x);\n}\nexport function raise(x) {\n  setImmediate(function rethrowErrorDelayedToEscapePromiseCatch() {\n    throw x;\n  });\n}","import { show } from './utils.js';\nimport { ordinal, namespace, name, version } from './const.js';\nimport type from 'sanctuary-type-identifiers';\nimport { nil, cat } from './list.js';\nimport { captureStackTrace } from './debug.js';\n\nfunction showArg(x) {\n  return show(x) + ' :: ' + type.parse(type(x)).name;\n}\n\nexport function error(message) {\n  return new Error(message);\n}\nexport function typeError(message) {\n  return new TypeError(message);\n}\nexport function invalidArgument(it, at, expected, actual) {\n  return typeError(it + '() expects its ' + ordinal[at] + ' argument to ' + expected + '.' + '\\n  Actual: ' + showArg(actual));\n}\nexport function invalidArgumentOf(expected) {\n  return function (it, at, actual) {\n    return invalidArgument(it, at, expected, actual);\n  };\n}\nexport function invalidContext(it, actual) {\n  return typeError(it + '() was invoked outside the context of a Future. You might want to use' + ' a dispatcher instead\\n  Called on: ' + show(actual));\n}\nexport function invalidArity(f, args) {\n  return new TypeError(f.name + '() expects to be called with a single argument per invocation\\n' + '  Saw: ' + args.length + ' arguments' + Array.prototype.slice.call(args).map(function (arg, i) {\n    return '\\n  ' + (ordinal[i] ? ordinal[i].charAt(0).toUpperCase() + ordinal[i].slice(1) : 'Argument ' + String(i + 1)) + ': ' + showArg(arg);\n  }).join(''));\n}\n\nfunction invalidNamespace(m, x) {\n  return 'The Future was not created by ' + namespace + '. ' + 'Make sure you transform other Futures to ' + namespace + ' Futures. ' + 'Got ' + (x ? 'a Future from ' + x : 'an unscoped Future') + '.' + '\\n  See: https://github.com/fluture-js/Fluture#casting-futures';\n}\n\nfunction invalidVersion(m, x) {\n  return 'The Future was created by ' + (x < version ? 'an older' : 'a newer') + ' version of ' + namespace + '. ' + 'This means that one of the sources which creates Futures is outdated. ' + 'Update this source, or transform its created Futures to be compatible.' + '\\n  See: https://github.com/fluture-js/Fluture#casting-futures';\n}\n\nexport function invalidFuture(desc, m, s) {\n  var id = type.parse(type(m));\n  var info = id.name === name ? '\\n' + (id.namespace !== namespace ? invalidNamespace(m, id.namespace) : id.version !== version ? invalidVersion(m, id.version) : 'Nothing seems wrong. Contact the Fluture maintainers.') : '';\n  return typeError(desc + ' to be a valid Future.' + info + '\\n' + '  Actual: ' + show(m) + ' :: ' + id.name + (s || ''));\n}\nexport function invalidFutureArgument(it, at, m, s) {\n  return invalidFuture(it + '() expects its ' + ordinal[at] + ' argument', m, s);\n}\nexport function ensureError(value, fn) {\n  var message;\n\n  try {\n    if (value instanceof Error) return value;\n    message = 'A Non-Error was thrown from a Future: ' + show(value);\n  } catch (_) {\n    message = 'Something was thrown from a Future, but it could not be converted to String';\n  }\n\n  var e = error(message);\n  captureStackTrace(e, fn);\n  return e;\n}\nexport function assignUnenumerable(o, prop, value) {\n  Object.defineProperty(o, prop, {\n    value: value,\n    writable: true,\n    configurable: true\n  });\n}\nexport function wrapException(caught, callingFuture) {\n  var origin = ensureError(caught, wrapException);\n  var context = cat(origin.context || nil, callingFuture.context);\n  var e = error(origin.message);\n  assignUnenumerable(e, 'future', origin.future || callingFuture);\n  assignUnenumerable(e, 'reason', origin.reason || origin);\n  assignUnenumerable(e, 'stack', e.reason.stack);\n  return withExtraContext(e, context);\n}\nexport function withExtraContext(e, context) {\n  assignUnenumerable(e, 'context', context);\n  assignUnenumerable(e, 'stack', e.stack + contextToStackTrace(context));\n  return e;\n}\nexport function contextToStackTrace(context) {\n  var stack = '',\n      tail = context;\n\n  while (tail !== nil) {\n    stack = stack + '\\n' + tail.head.stack;\n    tail = tail.tail;\n  }\n\n  return stack;\n}","import { FL } from './const.js';\nexport function isFunction(f) {\n  return typeof f === 'function';\n}\nexport function isThenable(m) {\n  return m instanceof Promise || m != null && isFunction(m.then);\n}\nexport function isBoolean(f) {\n  return typeof f === 'boolean';\n}\nexport function isNumber(f) {\n  return typeof f === 'number';\n}\nexport function isUnsigned(n) {\n  return n === Infinity || isNumber(n) && n > 0 && n % 1 === 0;\n}\nexport function isObject(o) {\n  return o !== null && typeof o === 'object';\n}\nexport function isIterator(i) {\n  return isObject(i) && isFunction(i.next);\n}\nexport function isArray(x) {\n  return Array.isArray(x);\n}\nexport function hasMethod(method, x) {\n  return x != null && isFunction(x[method]);\n}\nexport function isFunctor(x) {\n  return hasMethod(FL.map, x);\n}\nexport function isAlt(x) {\n  return isFunctor(x) && hasMethod(FL.alt, x);\n}\nexport function isApply(x) {\n  return isFunctor(x) && hasMethod(FL.ap, x);\n}\nexport function isBifunctor(x) {\n  return isFunctor(x) && hasMethod(FL.bimap, x);\n}\nexport function isChain(x) {\n  return isApply(x) && hasMethod(FL.chain, x);\n}","import { isObject, isBoolean } from './predicates.js';\nexport function Next(x) {\n  return {\n    done: false,\n    value: x\n  };\n}\nexport function Done(x) {\n  return {\n    done: true,\n    value: x\n  };\n}\nexport function isIteration(x) {\n  return isObject(x) && isBoolean(x.done);\n}","/*eslint no-cond-assign:0, no-constant-condition:0 */\nimport type from 'sanctuary-type-identifiers';\nimport { FL, $$type } from './internal/const.js';\nimport { captureContext, captureApplicationContext, captureStackTrace } from './internal/debug.js';\nimport { invalidArgument, invalidArgumentOf, invalidArity, invalidFuture, invalidFutureArgument, typeError, withExtraContext, wrapException } from './internal/error.js';\nimport { Next, Done } from './internal/iteration.js';\nimport { nil, cons, isNil, reverse, toArray } from './internal/list.js';\nimport { isFunction, isUnsigned } from './internal/predicates.js';\nimport { show, noop, call, moop } from './internal/utils.js';\n\nfunction alwaysTrue() {\n  return true;\n}\n\nfunction getArgs(it) {\n  var args = new Array(it.arity);\n\n  for (var i = 1; i <= it.arity; i++) {\n    args[i - 1] = it['$' + String(i)];\n  }\n\n  return args;\n}\n\nfunction showArg(arg) {\n  return ' (' + show(arg) + ')';\n}\n\nexport var any = {\n  pred: alwaysTrue,\n  error: invalidArgumentOf('be anything')\n};\nexport var func = {\n  pred: isFunction,\n  error: invalidArgumentOf('be a Function')\n};\nexport var future = {\n  pred: isFuture,\n  error: invalidFutureArgument\n};\nexport var positiveInteger = {\n  pred: isUnsigned,\n  error: invalidArgumentOf('be a positive Integer')\n};\nexport function application(n, f, type, args, prev) {\n  if (args.length < 2 && type.pred(args[0])) return captureApplicationContext(prev, n, f);\n  var e = args.length > 1 ? invalidArity(f, args) : type.error(f.name, n - 1, args[0]);\n  captureStackTrace(e, f);\n  throw withExtraContext(e, prev);\n}\nexport function application1(f, type, args) {\n  return application(1, f, type, args, nil);\n}\nexport function Future(computation) {\n  var context = application1(Future, func, arguments);\n  return new Computation(context, computation);\n}\nexport function isFuture(x) {\n  return x instanceof Future || type(x) === $$type;\n} // Compliance with sanctuary-type-identifiers versions 1 and 2.\n// To prevent sanctuary-type-identifiers version 3 from identifying 'Future'\n// as being of the type denoted by $$type, we ensure that\n// Future.constructor.prototype is equal to Future.\n\nFuture['@@type'] = $$type;\nFuture.constructor = {\n  prototype: Future\n};\nFuture[FL.of] = resolve;\nFuture[FL.chainRec] = chainRec;\nFuture.prototype['@@type'] = $$type;\n\nFuture.prototype['@@show'] = function Future$show() {\n  return this.toString();\n};\n\nFuture.prototype.pipe = function Future$pipe(f) {\n  if (!isFunction(f)) throw invalidArgument('Future#pipe', 0, 'be a Function', f);\n  return f(this);\n};\n\nFuture.prototype[FL.ap] = function Future$FL$ap(other) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to ap', Future$FL$ap);\n  return other._transform(new ApTransformation(context, this));\n};\n\nFuture.prototype[FL.map] = function Future$FL$map(mapper) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to map', Future$FL$map);\n  return this._transform(new MapTransformation(context, mapper));\n};\n\nFuture.prototype[FL.bimap] = function Future$FL$bimap(lmapper, rmapper) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to bimap', Future$FL$bimap);\n  return this._transform(new BimapTransformation(context, lmapper, rmapper));\n};\n\nFuture.prototype[FL.chain] = function Future$FL$chain(mapper) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to chain', Future$FL$chain);\n  return this._transform(new ChainTransformation(context, mapper));\n};\n\nFuture.prototype[FL.alt] = function Future$FL$alt(other) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to alt', Future$FL$alt);\n  return this._transform(new AltTransformation(context, other));\n};\n\nFuture.prototype.extractLeft = function Future$extractLeft() {\n  return [];\n};\n\nFuture.prototype.extractRight = function Future$extractRight() {\n  return [];\n};\n\nFuture.prototype._transform = function Future$transform(transformation) {\n  return new Transformer(transformation.context, this, cons(transformation, nil));\n};\n\nFuture.prototype.isTransformer = false;\nFuture.prototype.context = nil;\nFuture.prototype.arity = 0;\nFuture.prototype.name = 'future';\n\nFuture.prototype.toString = function Future$toString() {\n  return this.name + getArgs(this).map(showArg).join('');\n};\n\nFuture.prototype.toJSON = function Future$toJSON() {\n  return {\n    $: $$type,\n    kind: 'interpreter',\n    type: this.name,\n    args: getArgs(this)\n  };\n};\n\nexport function createInterpreter(arity, name, interpret) {\n  var Interpreter = function Interpreter(context, $1, $2, $3) {\n    this.context = context;\n    this.$1 = $1;\n    this.$2 = $2;\n    this.$3 = $3;\n  };\n\n  Interpreter.prototype = Object.create(Future.prototype);\n  Interpreter.prototype.arity = arity;\n  Interpreter.prototype.name = name;\n  Interpreter.prototype._interpret = interpret;\n  return Interpreter;\n}\nexport var Computation = createInterpreter(1, 'Future', function Computation$interpret(rec, rej, res) {\n  var computation = this.$1,\n      open = false,\n      cancel = noop,\n      cont = function cont() {\n    open = true;\n  };\n\n  try {\n    cancel = computation(function Computation$rej(x) {\n      cont = function Computation$rej$cont() {\n        open = false;\n        rej(x);\n      };\n\n      if (open) {\n        cont();\n      }\n    }, function Computation$res(x) {\n      cont = function Computation$res$cont() {\n        open = false;\n        res(x);\n      };\n\n      if (open) {\n        cont();\n      }\n    });\n  } catch (e) {\n    rec(wrapException(e, this));\n    return noop;\n  }\n\n  if (!(isFunction(cancel) && cancel.length === 0)) {\n    rec(wrapException(typeError('The computation was expected to return a nullary cancellation function\\n' + '  Actual: ' + show(cancel)), this));\n    return noop;\n  }\n\n  cont();\n  return function Computation$cancel() {\n    if (open) {\n      open = false;\n      cancel && cancel();\n    }\n  };\n});\nexport var Never = createInterpreter(0, 'never', function Never$interpret() {\n  return noop;\n});\nNever.prototype._isNever = true;\nexport var never = new Never(nil);\nexport function isNever(x) {\n  return isFuture(x) && x._isNever === true;\n}\nexport var Crash = createInterpreter(1, 'crash', function Crash$interpret(rec) {\n  rec(this.$1);\n  return noop;\n});\nexport function crash(x) {\n  return new Crash(application1(crash, any, arguments), x);\n}\nexport var Reject = createInterpreter(1, 'reject', function Reject$interpret(rec, rej) {\n  rej(this.$1);\n  return noop;\n});\n\nReject.prototype.extractLeft = function Reject$extractLeft() {\n  return [this.$1];\n};\n\nexport function reject(x) {\n  return new Reject(application1(reject, any, arguments), x);\n}\nexport var Resolve = createInterpreter(1, 'resolve', function Resolve$interpret(rec, rej, res) {\n  res(this.$1);\n  return noop;\n});\n\nResolve.prototype.extractRight = function Resolve$extractRight() {\n  return [this.$1];\n};\n\nexport function resolve(x) {\n  return new Resolve(application1(resolve, any, arguments), x);\n} //Note: This function is not curried because it's only used to satisfy the\n//      Fantasy Land ChainRec specification.\n\nexport function chainRec(step, init) {\n  return resolve(Next(init))._transform(new ChainTransformation(nil, function chainRec$recur(o) {\n    return o.done ? resolve(o.value) : step(Next, Done, o.value)._transform(new ChainTransformation(nil, chainRec$recur));\n  }));\n}\nexport var Transformer = createInterpreter(2, 'transform', function Transformer$interpret(rec, rej, res) {\n  //These are the cold, and hot, transformation stacks. The cold actions are those that\n  //have yet to run parallel computations, and hot are those that have.\n  var cold = nil,\n      hot = nil; //These combined variables define our current state.\n  // future         = the future we are currently forking\n  // transformation = the transformation to be informed when the future settles\n  // cancel         = the cancel function of the current future\n  // settled        = a boolean indicating whether a new tick should start\n  // async          = a boolean indicating whether we are awaiting a result asynchronously\n\n  var future,\n      transformation,\n      cancel = noop,\n      settled,\n      async = true,\n      it; //Takes a transformation from the top of the hot stack and returns it.\n\n  function nextHot() {\n    var x = hot.head;\n    hot = hot.tail;\n    return x;\n  } //Takes a transformation from the top of the cold stack and returns it.\n\n\n  function nextCold() {\n    var x = cold.head;\n    cold = cold.tail;\n    return x;\n  } //This function is called with a future to use in the next tick.\n  //Here we \"flatten\" the actions of another Sequence into our own actions,\n  //this is the magic that allows for infinitely stack safe recursion because\n  //actions like ChainAction will return a new Sequence.\n  //If we settled asynchronously, we call drain() directly to run the next tick.\n\n\n  function settle(m) {\n    settled = true;\n    future = m;\n\n    if (future.isTransformer) {\n      var tail = future.$2;\n\n      while (!isNil(tail)) {\n        cold = cons(tail.head, cold);\n        tail = tail.tail;\n      }\n\n      future = future.$1;\n    }\n\n    if (async) drain();\n  } //This function serves as a rejection handler for our current future.\n  //It will tell the current transformation that the future rejected, and it will\n  //settle the current tick with the transformation's answer to that.\n\n\n  function rejected(x) {\n    settle(transformation.rejected(x));\n  } //This function serves as a resolution handler for our current future.\n  //It will tell the current transformation that the future resolved, and it will\n  //settle the current tick with the transformation's answer to that.\n\n\n  function resolved(x) {\n    settle(transformation.resolved(x));\n  } //This function is passed into actions when they are \"warmed up\".\n  //If the transformation decides that it has its result, without the need to await\n  //anything else, then it can call this function to force \"early termination\".\n  //When early termination occurs, all actions which were stacked prior to the\n  //terminator will be skipped. If they were already hot, they will also be\n  //sent a cancel signal so they can cancel their own concurrent computations,\n  //as their results are no longer needed.\n\n\n  function early(m, terminator) {\n    cancel();\n    cold = nil;\n\n    if (async && transformation !== terminator) {\n      transformation.cancel();\n\n      while ((it = nextHot()) && it !== terminator) {\n        it.cancel();\n      }\n    }\n\n    settle(m);\n  } //This will cancel the current Future, the current transformation, and all stacked hot actions.\n\n\n  function Sequence$cancel() {\n    cancel();\n    transformation && transformation.cancel();\n\n    while (it = nextHot()) {\n      it.cancel();\n    }\n  } //This function is called when an exception is caught.\n\n\n  function exception(e) {\n    Sequence$cancel();\n    settled = true;\n    cold = hot = nil;\n    var error = wrapException(e, future);\n    future = never;\n    rec(error);\n  } //This function serves to kickstart concurrent computations.\n  //Takes all actions from the cold stack in reverse order, and calls run() on\n  //each of them, passing them the \"early\" function. If any of them settles (by\n  //calling early()), we abort. After warming up all actions in the cold queue,\n  //we warm up the current transformation as well.\n\n\n  function warmupActions() {\n    cold = reverse(cold);\n\n    while (cold !== nil) {\n      it = cold.head.run(early);\n      if (settled) return;\n      hot = cons(it, hot);\n      cold = cold.tail;\n    }\n\n    transformation = transformation.run(early);\n  } //This function represents our main execution loop. By \"tick\", we've been\n  //referring to the execution of one iteration in the while-loop below.\n\n\n  function drain() {\n    async = false;\n\n    while (true) {\n      settled = false;\n\n      if (transformation = nextCold()) {\n        cancel = future._interpret(exception, rejected, resolved);\n        if (!settled) warmupActions();\n      } else if (transformation = nextHot()) {\n        cancel = future._interpret(exception, rejected, resolved);\n      } else break;\n\n      if (settled) continue;\n      async = true;\n      return;\n    }\n\n    cancel = future._interpret(exception, rej, res);\n  } //Start the execution loop.\n\n\n  settle(this); //Return the cancellation function.\n\n  return Sequence$cancel;\n});\nTransformer.prototype.isTransformer = true;\n\nTransformer.prototype._transform = function Transformer$_transform(transformation) {\n  return new Transformer(transformation.context, this.$1, cons(transformation, this.$2));\n};\n\nTransformer.prototype.toString = function Transformer$toString() {\n  return toArray(reverse(this.$2)).reduce(function (str, action) {\n    return action.name + getArgs(action).map(showArg).join('') + ' (' + str + ')';\n  }, this.$1.toString());\n};\n\nfunction BaseTransformation$rejected(x) {\n  this.cancel();\n  return new Reject(this.context, x);\n}\n\nfunction BaseTransformation$resolved(x) {\n  this.cancel();\n  return new Resolve(this.context, x);\n}\n\nfunction BaseTransformation$toJSON() {\n  return {\n    $: $$type,\n    kind: 'transformation',\n    type: this.name,\n    args: getArgs(this)\n  };\n}\n\nexport var BaseTransformation = {\n  rejected: BaseTransformation$rejected,\n  resolved: BaseTransformation$resolved,\n  run: moop,\n  cancel: noop,\n  context: nil,\n  arity: 0,\n  name: 'transform',\n  toJSON: BaseTransformation$toJSON\n};\n\nfunction wrapHandler(handler) {\n  return function transformationHandler(x) {\n    var m;\n\n    try {\n      m = handler.call(this, x);\n    } catch (e) {\n      return new Crash(this.context, e);\n    }\n\n    if (isFuture(m)) {\n      return m;\n    }\n\n    return new Crash(this.context, invalidFuture(this.name + ' expects the return value from the function it\\'s given', m, '\\n  When called with: ' + show(x)));\n  };\n}\n\nexport function createTransformation(arity, name, prototype) {\n  var Transformation = function Transformation(context, $1, $2) {\n    this.context = context;\n    this.$1 = $1;\n    this.$2 = $2;\n  };\n\n  Transformation.prototype = Object.create(BaseTransformation);\n  Transformation.prototype.arity = arity;\n  Transformation.prototype.name = name;\n\n  if (typeof prototype.rejected === 'function') {\n    Transformation.prototype.rejected = wrapHandler(prototype.rejected);\n  }\n\n  if (typeof prototype.resolved === 'function') {\n    Transformation.prototype.resolved = wrapHandler(prototype.resolved);\n  }\n\n  if (typeof prototype.run === 'function') {\n    Transformation.prototype.run = prototype.run;\n  }\n\n  return Transformation;\n}\nexport var ApTransformation = createTransformation(1, 'ap', {\n  resolved: function ApTransformation$resolved(f) {\n    if (isFunction(f)) return this.$1._transform(new MapTransformation(this.context, f));\n    throw typeError('ap expects the second Future to resolve to a Function\\n' + '  Actual: ' + show(f));\n  }\n});\nexport var AltTransformation = createTransformation(1, 'alt', {\n  rejected: function AltTransformation$rejected() {\n    return this.$1;\n  }\n});\nexport var MapTransformation = createTransformation(1, 'map', {\n  resolved: function MapTransformation$resolved(x) {\n    return new Resolve(this.context, call(this.$1, x));\n  }\n});\nexport var BimapTransformation = createTransformation(2, 'bimap', {\n  rejected: function BimapTransformation$rejected(x) {\n    return new Reject(this.context, call(this.$1, x));\n  },\n  resolved: function BimapTransformation$resolved(x) {\n    return new Resolve(this.context, call(this.$2, x));\n  }\n});\nexport var ChainTransformation = createTransformation(1, 'chain', {\n  resolved: function ChainTransformation$resolved(x) {\n    return call(this.$1, x);\n  }\n});","import { any, application, application1, createInterpreter, never, positiveInteger } from './future.js';\nexport var After = createInterpreter(2, 'after', function After$interpret(rec, rej, res) {\n  var id = setTimeout(res, this.$1, this.$2);\n  return function After$cancel() {\n    clearTimeout(id);\n  };\n});\n\nAfter.prototype.extractRight = function After$extractRight() {\n  return [this.$2];\n};\n\nfunction alwaysNever(_) {\n  return never;\n}\n\nexport function after(time) {\n  var context1 = application1(after, positiveInteger, arguments);\n  return time === Infinity ? alwaysNever : function after(value) {\n    var context2 = application(2, after, any, arguments, context1);\n    return new After(context2, time, value);\n  };\n}","import { FL } from './internal/const.js';\nimport { invalidArgumentOf } from './internal/error.js';\nimport { isAlt } from './internal/predicates.js';\nimport { AltTransformation, application, application1, future, isFuture } from './future.js';\nexport var alternative = {\n  pred: isAlt,\n  error: invalidArgumentOf('have Alt implemented')\n};\nexport function alt(left) {\n  if (isFuture(left)) {\n    var context1 = application1(alt, future, arguments);\n    return function alt(right) {\n      var context2 = application(2, alt, future, arguments, context1);\n      return right._transform(new AltTransformation(context2, left));\n    };\n  }\n\n  var context = application1(alt, alternative, arguments);\n  return function alt(right) {\n    application(2, alt, alternative, arguments, context);\n    return left[FL.alt](right);\n  };\n}","import { createTransformation, application1, application, future } from './future.js';\nexport var AndTransformation = createTransformation(1, 'and', {\n  resolved: function AndTransformation$resolved() {\n    return this.$1;\n  }\n});\nexport function and(left) {\n  var context1 = application1(and, future, arguments);\n  return function and(right) {\n    var context2 = application(2, and, future, arguments, context1);\n    return right._transform(new AndTransformation(context2, left));\n  };\n}","import { FL } from './internal/const.js';\nimport { invalidArgumentOf } from './internal/error.js';\nimport { isApply } from './internal/predicates.js';\nimport { isFuture, ApTransformation, application1, application, future } from './future.js';\nexport var apply = {\n  pred: isApply,\n  error: invalidArgumentOf('have Apply implemented')\n};\nexport function ap(mx) {\n  if (isFuture(mx)) {\n    var context1 = application1(ap, future, arguments);\n    return function ap(mf) {\n      var context2 = application(2, ap, future, arguments, context1);\n      return mf._transform(new ApTransformation(context2, mx));\n    };\n  }\n\n  var context = application1(ap, apply, arguments);\n  return function ap(mf) {\n    application(2, ap, apply, arguments, context);\n    return mx[FL.ap](mf);\n  };\n}","import { wrapException, typeError } from './internal/error.js';\nimport { isThenable } from './internal/predicates.js';\nimport { noop, show } from './internal/utils.js';\nimport { createInterpreter, application1, application, func, any } from './future.js';\n\nfunction invalidPromise(p, f, a) {\n  return typeError('encaseP() expects the function it\\'s given to return a Promise/Thenable' + '\\n  Actual: ' + show(p) + '\\n  From calling: ' + show(f) + '\\n  With: ' + show(a));\n}\n\nexport var EncaseP = createInterpreter(2, 'encaseP', function EncaseP$interpret(rec, rej, res) {\n  var open = true,\n      fn = this.$1,\n      arg = this.$2,\n      p;\n\n  try {\n    p = fn(arg);\n  } catch (e) {\n    rec(wrapException(e, this));\n    return noop;\n  }\n\n  if (!isThenable(p)) {\n    rec(wrapException(invalidPromise(p, fn, arg), this));\n    return noop;\n  }\n\n  p.then(function EncaseP$res(x) {\n    if (open) {\n      open = false;\n      res(x);\n    }\n  }, function EncaseP$rej(x) {\n    if (open) {\n      open = false;\n      rej(x);\n    }\n  });\n  return function EncaseP$cancel() {\n    open = false;\n  };\n});\nexport function encaseP(f) {\n  var context1 = application1(encaseP, func, arguments);\n  return function encaseP(x) {\n    var context2 = application(2, encaseP, any, arguments, context1);\n    return new EncaseP(context2, f, x);\n  };\n}","import { encaseP } from './encase-p.js';\nexport function attemptP(_) {\n  return encaseP.apply(this, arguments)(undefined);\n}","import { noop } from './internal/utils.js';\nimport { createInterpreter, application1, application, func, any } from './future.js';\nexport var Encase = createInterpreter(2, 'encase', function Encase$interpret(rec, rej, res) {\n  var fn = this.$1,\n      r;\n\n  try {\n    r = fn(this.$2);\n  } catch (e) {\n    rej(e);\n    return noop;\n  }\n\n  res(r);\n  return noop;\n});\nexport function encase(f) {\n  var context1 = application1(encase, func, arguments);\n  return function encase(x) {\n    var context2 = application(2, encase, any, arguments, context1);\n    return new Encase(context2, f, x);\n  };\n}","import { encase } from './encase.js';\nexport function attempt(_) {\n  return encase.apply(this, arguments)(undefined);\n}","import { FL } from './internal/const.js';\nimport { invalidArgumentOf } from './internal/error.js';\nimport { isBifunctor } from './internal/predicates.js';\nimport { isFuture, BimapTransformation, application1, application, func } from './future.js';\nexport var bifunctor = {\n  pred: isBifunctor,\n  error: invalidArgumentOf('have Bifunctor implemented')\n};\nexport function bimap(f) {\n  var context1 = application1(bimap, func, arguments);\n  return function bimap(g) {\n    var context2 = application(2, bimap, func, arguments, context1);\n    return function bimap(m) {\n      var context3 = application(3, bimap, bifunctor, arguments, context2);\n      return isFuture(m) ? m._transform(new BimapTransformation(context3, f, g)) : m[FL.bimap](f, g);\n    };\n  };\n}","import { createTransformation, future, application1, application, func } from './future.js';\nimport { call } from './internal/utils.js';\nexport var BichainTransformation = createTransformation(2, 'bichain', {\n  rejected: function BichainTransformation$rejected(x) {\n    return call(this.$1, x);\n  },\n  resolved: function BichainTransformation$resolved(x) {\n    return call(this.$2, x);\n  }\n});\nexport function bichain(f) {\n  var context1 = application1(bichain, func, arguments);\n  return function bichain(g) {\n    var context2 = application(2, bichain, func, arguments, context1);\n    return function bichain(m) {\n      var context3 = application(3, bichain, future, arguments, context2);\n      return m._transform(new BichainTransformation(context3, f, g));\n    };\n  };\n}","import { noop } from './utils.js';\nimport { createTransformation, Future, crash, reject, resolve } from '../future.js';\n\nfunction Eager(future) {\n  var _this = this;\n\n  _this.rec = noop;\n  _this.rej = noop;\n  _this.res = noop;\n  _this.crashed = false;\n  _this.rejected = false;\n  _this.resolved = false;\n  _this.value = null;\n  _this.cancel = future._interpret(function Eager$crash(x) {\n    _this.value = x;\n    _this.crashed = true;\n    _this.cancel = noop;\n\n    _this.rec(x);\n  }, function Eager$reject(x) {\n    _this.value = x;\n    _this.rejected = true;\n    _this.cancel = noop;\n\n    _this.rej(x);\n  }, function Eager$resolve(x) {\n    _this.value = x;\n    _this.resolved = true;\n    _this.cancel = noop;\n\n    _this.res(x);\n  });\n}\n\nEager.prototype = Object.create(Future.prototype);\n\nEager.prototype._interpret = function Eager$interpret(rec, rej, res) {\n  if (this.crashed) rec(this.value);else if (this.rejected) rej(this.value);else if (this.resolved) res(this.value);else {\n    this.rec = rec;\n    this.rej = rej;\n    this.res = res;\n  }\n  return this.cancel;\n};\n\nexport function earlyCrash(early, x) {\n  early(crash(x));\n}\nexport function earlyReject(early, x) {\n  early(reject(x));\n}\nexport function earlyResolve(early, x) {\n  early(resolve(x));\n}\nexport function createParallelTransformation(name, rec, rej, res, prototype) {\n  var ParallelTransformation = createTransformation(1, name, Object.assign({\n    run: function Parallel$run(early) {\n      var eager = new Eager(this.$1);\n      var transformation = new ParallelTransformation(this.context, eager);\n\n      function Parallel$early(m) {\n        early(m, transformation);\n      }\n\n      transformation.cancel = eager._interpret(function Parallel$rec(x) {\n        rec(Parallel$early, x);\n      }, function Parallel$rej(x) {\n        rej(Parallel$early, x);\n      }, function Parallel$res(x) {\n        res(Parallel$early, x);\n      });\n      return transformation;\n    }\n  }, prototype));\n  return ParallelTransformation;\n}","import { createParallelTransformation, earlyCrash, earlyReject } from './internal/parallel.js';\nimport { noop } from './internal/utils.js';\nimport { createTransformation, Resolve, application1, application, future } from './future.js';\nexport var PairTransformation = createTransformation(1, 'pair', {\n  resolved: function PairTransformation$resolved(x) {\n    return new Resolve(this.context, [x, this.$1]);\n  }\n});\nexport var BothTransformation = createParallelTransformation('both', earlyCrash, earlyReject, noop, {\n  resolved: function BothTransformation$resolved(x) {\n    return this.$1._transform(new PairTransformation(this.context, x));\n  }\n});\nexport function both(left) {\n  var context1 = application1(both, future, arguments);\n  return function both(right) {\n    var context2 = application(2, both, future, arguments, context1);\n    return right._transform(new BothTransformation(context2, left));\n  };\n}","import { noop } from './internal/utils.js';\nimport { createInterpreter, application1, future } from './future.js';\nexport var Cold = 0;\nexport var Pending = 1;\nexport var Crashed = 2;\nexport var Rejected = 3;\nexport var Resolved = 4;\nexport function Queued(rec, rej, res) {\n  this[Crashed] = rec;\n  this[Rejected] = rej;\n  this[Resolved] = res;\n}\nexport var Cache = createInterpreter(1, 'cache', function Cache$interpret(rec, rej, res) {\n  var cancel = noop;\n\n  switch (this._state) {\n    /* c8 ignore next 4 */\n    case Pending:\n      cancel = this._addToQueue(rec, rej, res);\n      break;\n\n    case Crashed:\n      rec(this._value);\n      break;\n\n    case Rejected:\n      rej(this._value);\n      break;\n\n    case Resolved:\n      res(this._value);\n      break;\n\n    default:\n      this._queue = [];\n      cancel = this._addToQueue(rec, rej, res);\n      this.run();\n  }\n\n  return cancel;\n});\nCache.prototype._cancel = noop;\nCache.prototype._queue = null;\nCache.prototype._queued = 0;\nCache.prototype._value = undefined;\nCache.prototype._state = Cold;\n\nCache.prototype.extractLeft = function Cache$extractLeft() {\n  return this._state === Rejected ? [this._value] : [];\n};\n\nCache.prototype.extractRight = function Cache$extractRight() {\n  return this._state === Resolved ? [this._value] : [];\n};\n\nCache.prototype._addToQueue = function Cache$addToQueue(rec, rej, res) {\n  var _this = this;\n\n  if (_this._state > Pending) return noop;\n  var i = _this._queue.push(new Queued(rec, rej, res)) - 1;\n  _this._queued = _this._queued + 1;\n  return function Cache$removeFromQueue() {\n    if (_this._state > Pending) return;\n    _this._queue[i] = undefined;\n    _this._queued = _this._queued - 1;\n    if (_this._queued === 0) _this.reset();\n  };\n};\n\nCache.prototype._drainQueue = function Cache$drainQueue() {\n  if (this._state <= Pending) return;\n  if (this._queued === 0) return;\n  var queue = this._queue;\n  var length = queue.length;\n  var state = this._state;\n  var value = this._value;\n\n  for (var i = 0; i < length; i++) {\n    queue[i] && queue[i][state](value);\n    queue[i] = undefined;\n  }\n\n  this._queue = undefined;\n  this._queued = 0;\n};\n\nCache.prototype.crash = function Cache$crash(error) {\n  if (this._state > Pending) return;\n  this._value = error;\n  this._state = Crashed;\n\n  this._drainQueue();\n};\n\nCache.prototype.reject = function Cache$reject(reason) {\n  if (this._state > Pending) return;\n  this._value = reason;\n  this._state = Rejected;\n\n  this._drainQueue();\n};\n\nCache.prototype.resolve = function Cache$resolve(value) {\n  if (this._state > Pending) return;\n  this._value = value;\n  this._state = Resolved;\n\n  this._drainQueue();\n};\n\nCache.prototype.run = function Cache$run() {\n  var _this = this;\n\n  if (_this._state > Cold) return;\n  _this._state = Pending;\n  _this._cancel = _this.$1._interpret(function Cache$fork$rec(x) {\n    _this.crash(x);\n  }, function Cache$fork$rej(x) {\n    _this.reject(x);\n  }, function Cache$fork$res(x) {\n    _this.resolve(x);\n  });\n};\n\nCache.prototype.reset = function Cache$reset() {\n  if (this._state === Cold) return;\n  if (this._state === Pending) this._cancel();\n  this._cancel = noop;\n  this._queue = [];\n  this._queued = 0;\n  this._value = undefined;\n  this._state = Cold;\n};\n\nexport function cache(m) {\n  return new Cache(application1(cache, future, arguments), m);\n}","import { call } from './internal/utils.js';\nimport { createTransformation, application1, application, future, func } from './future.js';\nexport var ChainRejTransformation = createTransformation(1, 'chainRej', {\n  rejected: function ChainRejTransformation$rejected(x) {\n    return call(this.$1, x);\n  }\n});\nexport function chainRej(f) {\n  var context1 = application1(chainRej, func, arguments);\n  return function chainRej(m) {\n    var context2 = application(2, chainRej, future, arguments, context1);\n    return m._transform(new ChainRejTransformation(context2, f));\n  };\n}","import { FL } from './internal/const.js';\nimport { invalidArgumentOf } from './internal/error.js';\nimport { isChain } from './internal/predicates.js';\nimport { isFuture, application1, application, func, ChainTransformation } from './future.js';\nexport var monad = {\n  pred: isChain,\n  error: invalidArgumentOf('have Chain implemented')\n};\nexport function chain(f) {\n  var context1 = application1(chain, func, arguments);\n  return function chain(m) {\n    var context2 = application(2, chain, monad, arguments, context1);\n    return isFuture(m) ? m._transform(new ChainTransformation(context2, f)) : m[FL.chain](f);\n  };\n}","import { call } from './internal/utils.js';\nimport { createTransformation, Resolve, application1, application, func, future } from './future.js';\nexport var CoalesceTransformation = createTransformation(2, 'coalesce', {\n  rejected: function CoalesceTransformation$rejected(x) {\n    return new Resolve(this.context, call(this.$1, x));\n  },\n  resolved: function CoalesceTransformation$resolved(x) {\n    return new Resolve(this.context, call(this.$2, x));\n  }\n});\nexport function coalesce(f) {\n  var context1 = application1(coalesce, func, arguments);\n  return function coalesce(g) {\n    var context2 = application(2, coalesce, func, arguments, context1);\n    return function coalesce(m) {\n      var context3 = application(3, coalesce, future, arguments, context2);\n      return m._transform(new CoalesceTransformation(context3, f, g));\n    };\n  };\n}","import { raise } from './internal/utils.js';\nimport { application, application1, func, future } from './future.js';\nexport function fork(f) {\n  var context1 = application1(fork, func, arguments);\n  return function fork(g) {\n    var context2 = application(2, fork, func, arguments, context1);\n    return function fork(m) {\n      application(3, fork, future, arguments, context2);\n      return m._interpret(raise, f, g);\n    };\n  };\n}","/*eslint consistent-return: 0 */\nimport { typeError, invalidFuture, invalidArgument, wrapException } from './internal/error.js';\nimport { isIteration } from './internal/iteration.js';\nimport { isIterator } from './internal/predicates.js';\nimport { Undetermined, Synchronous, Asynchronous } from './internal/timing.js';\nimport { show, noop } from './internal/utils.js';\nimport { createInterpreter, isFuture, application1, func } from './future.js';\nexport function invalidIteration(o) {\n  return typeError('The iterator did not return a valid iteration from iterator.next()\\n' + '  Actual: ' + show(o));\n}\nexport function invalidState(x) {\n  return invalidFuture('go() expects the value produced by the iterator', x, '\\n  Tip: If you\\'re using a generator, make sure you always yield a Future');\n}\nexport var Go = createInterpreter(1, 'go', function Go$interpret(rec, rej, res) {\n  var _this = this,\n      timing = Undetermined,\n      cancel = noop,\n      state,\n      value,\n      iterator;\n\n  function crash(e) {\n    rec(wrapException(e, _this));\n  }\n\n  try {\n    iterator = _this.$1();\n  } catch (e) {\n    crash(e);\n    return noop;\n  }\n\n  if (!isIterator(iterator)) {\n    crash(invalidArgument('go', 0, 'return an iterator, maybe you forgot the \"*\"', iterator));\n    return noop;\n  }\n\n  function resolved(x) {\n    value = x;\n    if (timing === Asynchronous) return drain();\n    timing = Synchronous;\n  }\n\n  function drain() {\n    //eslint-disable-next-line no-constant-condition\n    while (true) {\n      try {\n        state = iterator.next(value);\n      } catch (e) {\n        return crash(e);\n      }\n\n      if (!isIteration(state)) return crash(invalidIteration(state));\n      if (state.done) break;\n\n      if (!isFuture(state.value)) {\n        return crash(invalidState(state.value));\n      }\n\n      timing = Undetermined;\n      cancel = state.value._interpret(crash, rej, resolved);\n      if (timing === Undetermined) return timing = Asynchronous;\n    }\n\n    res(state.value);\n  }\n\n  drain();\n  return function Go$cancel() {\n    cancel();\n  };\n});\nexport function go(generator) {\n  return new Go(application1(go, func, arguments), generator);\n}","export var Undetermined = 0;\nexport var Synchronous = 1;\nexport var Asynchronous = 2;","import { noop, show, raise } from './internal/utils.js';\nimport { invalidFuture, wrapException } from './internal/error.js';\nimport { createInterpreter, isFuture, application1, application, func, future } from './future.js';\n\nfunction invalidDisposal(m, f, x) {\n  return invalidFuture('hook() expects the return value from the first function it\\'s given', m, '\\n  From calling: ' + show(f) + '\\n  With: ' + show(x));\n}\n\nfunction invalidConsumption(m, f, x) {\n  return invalidFuture('hook() expects the return value from the second function it\\'s given', m, '\\n  From calling: ' + show(f) + '\\n  With: ' + show(x));\n}\n\nexport var Hook = createInterpreter(3, 'hook', function Hook$interpret(rec, rej, res) {\n  var _this = this,\n      _acquire = this.$1,\n      _dispose = this.$2,\n      _consume = this.$3;\n\n  var cancel,\n      cancelConsume = noop,\n      resource,\n      value,\n      cont = noop;\n\n  function Hook$done() {\n    cont(value);\n  }\n\n  function Hook$rec(x) {\n    rec(wrapException(x, _this));\n  }\n\n  function Hook$dispose() {\n    var disposal;\n\n    try {\n      disposal = _dispose(resource);\n    } catch (e) {\n      return Hook$rec(e);\n    }\n\n    if (!isFuture(disposal)) {\n      return Hook$rec(invalidDisposal(disposal, _dispose, resource));\n    }\n\n    cancel = Hook$cancelDisposal;\n\n    disposal._interpret(Hook$rec, Hook$disposalRejected, Hook$done);\n  }\n\n  function Hook$cancelConsumption() {\n    cancelConsume();\n    Hook$dispose();\n    Hook$cancelDisposal();\n  }\n\n  function Hook$cancelDisposal() {\n    cont = noop;\n  }\n\n  function Hook$disposalRejected(x) {\n    Hook$rec(new Error('The disposal Future rejected with ' + show(x)));\n  }\n\n  function Hook$consumptionException(x) {\n    cont = Hook$rec;\n    value = x;\n    Hook$dispose();\n  }\n\n  function Hook$consumptionRejected(x) {\n    cont = rej;\n    value = x;\n    Hook$dispose();\n  }\n\n  function Hook$consumptionResolved(x) {\n    cont = res;\n    value = x;\n    Hook$dispose();\n  }\n\n  function Hook$consume(x) {\n    resource = x;\n    var consumption;\n\n    try {\n      consumption = _consume(resource);\n    } catch (e) {\n      return Hook$consumptionException(e);\n    }\n\n    if (!isFuture(consumption)) {\n      return Hook$consumptionException(invalidConsumption(consumption, _consume, resource));\n    }\n\n    cancel = Hook$cancelConsumption;\n    cancelConsume = consumption._interpret(Hook$consumptionException, Hook$consumptionRejected, Hook$consumptionResolved);\n  }\n\n  var cancelAcquire = _acquire._interpret(Hook$rec, rej, Hook$consume);\n\n  cancel = cancel || cancelAcquire;\n  return function Hook$fork$cancel() {\n    rec = raise;\n    cancel();\n  };\n});\nexport function hook(acquire) {\n  var context1 = application1(hook, future, arguments);\n  return function hook(dispose) {\n    var context2 = application(2, hook, func, arguments, context1);\n    return function hook(consume) {\n      var context3 = application(3, hook, func, arguments, context2);\n      return new Hook(context3, acquire, dispose, consume);\n    };\n  };\n}","import { AndTransformation } from './and.js';\nimport { application, application1, createTransformation, future, Reject, Resolve } from './future.js';\nexport var LastlyTransformation = createTransformation(1, 'lastly', {\n  rejected: function LastlyAction$rejected(x) {\n    return this.$1._transform(new AndTransformation(this.context, new Reject(this.context, x)));\n  },\n  resolved: function LastlyAction$resolved(x) {\n    return this.$1._transform(new AndTransformation(this.context, new Resolve(this.context, x)));\n  }\n});\nexport function lastly(cleanup) {\n  var context1 = application1(lastly, future, arguments);\n  return function lastly(program) {\n    var context2 = application(2, lastly, future, arguments, context1);\n    return program._transform(new LastlyTransformation(context2, cleanup));\n  };\n}","import { call } from './internal/utils.js';\nimport { createTransformation, Reject, application1, application, future, func } from './future.js';\nexport var MapRejTransformation = createTransformation(1, 'mapRej', {\n  rejected: function MapRejTransformation$rejected(x) {\n    return new Reject(this.context, call(this.$1, x));\n  }\n});\nexport function mapRej(f) {\n  var context1 = application1(mapRej, func, arguments);\n  return function mapRej(m) {\n    var context2 = application(2, mapRej, future, arguments, context1);\n    return m._transform(new MapRejTransformation(context2, f));\n  };\n}","import { FL } from './internal/const.js';\nimport { invalidArgumentOf } from './internal/error.js';\nimport { isFunctor } from './internal/predicates.js';\nimport { isFuture, MapTransformation, application1, application, func } from './future.js';\nexport var functor = {\n  pred: isFunctor,\n  error: invalidArgumentOf('have Functor implemented')\n};\nexport function map(f) {\n  var context1 = application1(map, func, arguments);\n  return function map(m) {\n    var context2 = application(2, map, functor, arguments, context1);\n    return isFuture(m) ? m._transform(new MapTransformation(context2, f)) : m[FL.map](f);\n  };\n}","import { wrapException } from './internal/error.js';\nimport { noop, call } from './internal/utils.js';\nimport { createInterpreter, application1, func } from './future.js';\nexport var Node = createInterpreter(1, 'node', function Node$interpret(rec, rej, res) {\n  function Node$done(err, val) {\n    cont = err ? function EncaseN3$rej() {\n      open = false;\n      rej(err);\n    } : function EncaseN3$res() {\n      open = false;\n      res(val);\n    };\n\n    if (open) {\n      cont();\n    }\n  }\n\n  var open = false,\n      cont = function cont() {\n    open = true;\n  };\n\n  try {\n    call(this.$1, Node$done);\n  } catch (e) {\n    rec(wrapException(e, this));\n    open = false;\n    return noop;\n  }\n\n  cont();\n  return function Node$cancel() {\n    open = false;\n  };\n});\nexport function node(f) {\n  return new Node(application1(node, func, arguments), f);\n}","import { createParallelTransformation, earlyCrash, earlyReject } from './internal/parallel.js';\nimport { noop } from './internal/utils.js';\nimport { typeError } from './internal/error.js';\nimport { isFunction } from './internal/predicates.js';\nimport { show } from './internal/utils.js';\nimport { MapTransformation, application1, application, future } from './future.js';\nexport var ParallelApTransformation = createParallelTransformation('pap', earlyCrash, earlyReject, noop, {\n  resolved: function ParallelApTransformation$resolved(f) {\n    if (isFunction(f)) return this.$1._transform(new MapTransformation(this.context, f));\n    throw typeError('pap expects the second Future to resolve to a Function\\n' + '  Actual: ' + show(f));\n  }\n});\nexport function pap(mx) {\n  var context1 = application1(pap, future, arguments);\n  return function pap(mf) {\n    var context2 = application(2, pap, future, arguments, context1);\n    return mf._transform(new ParallelApTransformation(context2, mx));\n  };\n}","import { wrapException, invalidArgumentOf } from './internal/error.js';\nimport { isArray } from './internal/predicates.js';\nimport { noop } from './internal/utils.js';\nimport { createInterpreter, isFuture, resolve, application1, positiveInteger, application } from './future.js';\n\nfunction isFutureArray(xs) {\n  if (!isArray(xs)) return false;\n\n  for (var i = 0; i < xs.length; i++) {\n    if (!isFuture(xs[i])) return false;\n  }\n\n  return true;\n}\n\nexport var futureArray = {\n  pred: isFutureArray,\n  error: invalidArgumentOf('be an Array of valid Futures')\n};\nexport var Parallel = createInterpreter(2, 'parallel', function Parallel$interpret(rec, rej, res) {\n  var _this = this,\n      futures = this.$2,\n      length = futures.length;\n\n  var max = Math.min(this.$1, length),\n      cancels = new Array(length),\n      out = new Array(length);\n  var cursor = 0,\n      running = 0,\n      blocked = false,\n      cont = noop;\n\n  function Parallel$cancel() {\n    rec = noop;\n    rej = noop;\n    res = noop;\n    cursor = length;\n\n    for (var n = 0; n < length; n++) {\n      cancels[n] && cancels[n]();\n    }\n  }\n\n  function Parallel$run(idx) {\n    running++;\n    cancels[idx] = futures[idx]._interpret(function Parallel$rec(e) {\n      cont = rec;\n      cancels[idx] = noop;\n      Parallel$cancel();\n      cont(wrapException(e, _this));\n    }, function Parallel$rej(reason) {\n      cont = rej;\n      cancels[idx] = noop;\n      Parallel$cancel();\n      cont(reason);\n    }, function Parallel$res(value) {\n      cancels[idx] = noop;\n      out[idx] = value;\n      running--;\n      if (cursor === length && running === 0) res(out);else if (blocked) Parallel$drain();\n    });\n  }\n\n  function Parallel$drain() {\n    blocked = false;\n\n    while (cursor < length && running < max) {\n      Parallel$run(cursor++);\n    }\n\n    blocked = true;\n  }\n\n  Parallel$drain();\n  return Parallel$cancel;\n});\nvar emptyArray = resolve([]);\nexport function parallel(max) {\n  var context1 = application1(parallel, positiveInteger, arguments);\n  return function parallel(ms) {\n    var context2 = application(2, parallel, futureArray, arguments, context1);\n    return ms.length === 0 ? emptyArray : new Parallel(context2, max, ms);\n  };\n}","import { createParallelTransformation, earlyCrash, earlyReject, earlyResolve } from './internal/parallel.js';\nimport { application1, application, future } from './future.js';\nexport var RaceTransformation = createParallelTransformation('race', earlyCrash, earlyReject, earlyResolve, {});\nexport function race(left) {\n  var context1 = application1(race, future, arguments);\n  return function race(right) {\n    var context2 = application(2, race, future, arguments, context1);\n    return right._transform(new RaceTransformation(context2, left));\n  };\n}","import type from 'sanctuary-type-identifiers';\nimport { FL, namespace, version } from './internal/const.js';\nimport { invalidFutureArgument } from './internal/error.js';\nimport { captureContext } from './internal/debug.js';\nimport { nil } from './internal/list.js';\nimport { never, resolve, isFuture, MapTransformation } from './future.js';\nimport { ParallelApTransformation } from './pap.js';\nimport { RaceTransformation } from './race.js';\nexport function ConcurrentFuture(sequential) {\n  this.sequential = sequential;\n}\nConcurrentFuture.prototype = Object.create(Par.prototype);\nexport function Par(sequential) {\n  if (!isFuture(sequential)) throw invalidFutureArgument(Par.name, 0, sequential);\n  return new ConcurrentFuture(sequential);\n}\nvar $$type = namespace + '/ConcurrentFuture@' + version;\nvar zeroInstance = new ConcurrentFuture(never); // Compliance with sanctuary-type-identifiers versions 1 and 2.\n// To prevent sanctuary-type-identifiers version 3 from identifying\n// 'Par' as being of the type denoted by $$type, we ensure that\n// Par.constructor.prototype is equal to Par.\n\nPar['@@type'] = $$type;\nPar.constructor = {\n  prototype: Par\n};\n\nPar[FL.of] = function Par$of(x) {\n  return new ConcurrentFuture(resolve(x));\n};\n\nPar[FL.zero] = function Par$zero() {\n  return zeroInstance;\n};\n\nPar.prototype['@@type'] = $$type;\n\nPar.prototype['@@show'] = function Par$show() {\n  return this.toString();\n};\n\nPar.prototype.toString = function Par$toString() {\n  return 'Par (' + this.sequential.toString() + ')';\n};\n\nPar.prototype[FL.map] = function Par$FL$map(f) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to map via ConcurrentFuture', Par$FL$map);\n  return new ConcurrentFuture(this.sequential._transform(new MapTransformation(context, f)));\n};\n\nPar.prototype[FL.ap] = function Par$FL$ap(other) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to ap via ConcurrentFuture', Par$FL$ap);\n  return new ConcurrentFuture(other.sequential._transform(new ParallelApTransformation(context, this.sequential)));\n};\n\nPar.prototype[FL.alt] = function Par$FL$alt(other) {\n  var context = captureContext(nil, 'a Fantasy Land dispatch to alt via ConcurrentFuture', Par$FL$alt);\n  return new ConcurrentFuture(other.sequential._transform(new RaceTransformation(context, this.sequential)));\n};\n\nexport function isParallel(x) {\n  return x instanceof ConcurrentFuture || type(x) === $$type;\n}","import { any, application, application1, createInterpreter, never, positiveInteger } from './future.js';\nexport var RejectAfter = createInterpreter(2, 'rejectAfter', function RejectAfter$interpret(rec, rej) {\n  var id = setTimeout(rej, this.$1, this.$2);\n  return function RejectAfter$cancel() {\n    clearTimeout(id);\n  };\n});\n\nRejectAfter.prototype.extractLeft = function RejectAfter$extractLeft() {\n  return [this.$2];\n};\n\nfunction alwaysNever(_) {\n  return never;\n}\n\nexport function rejectAfter(time) {\n  var context1 = application1(rejectAfter, positiveInteger, arguments);\n  return time === Infinity ? alwaysNever : function rejectAfter(value) {\n    var context2 = application(2, rejectAfter, any, arguments, context1);\n    return new RejectAfter(context2, time, value);\n  };\n}","import { invalidArgumentOf } from './internal/error.js';\nimport { application1 } from './future.js';\nimport { isParallel } from './par.js';\nvar parallel = {\n  pred: isParallel,\n  error: invalidArgumentOf('be a ConcurrentFuture')\n};\nexport function seq(par) {\n  application1(seq, parallel, arguments);\n  return par.sequential;\n}","import { createTransformation, Reject, Resolve, application1, future } from './future.js';\nexport var SwapTransformation = createTransformation(0, 'swap', {\n  resolved: function SwapTransformation$resolved(x) {\n    return new Reject(this.context, x);\n  },\n  rejected: function SwapTransformation$rejected(x) {\n    return new Resolve(this.context, x);\n  }\n});\nexport function swap(m) {\n  var context = application1(swap, future, arguments);\n  return m._transform(new SwapTransformation(context));\n}","/**\n * @since 2.0.0\n */\n\n/**\n * @since 2.0.0\n */\nexport function identity(a) {\n  return a;\n}\n/**\n * @since 2.0.0\n */\n\nexport var unsafeCoerce = identity;\n/**\n * @since 2.0.0\n */\n\nexport function not(predicate) {\n  return function (a) {\n    return !predicate(a);\n  };\n}\n/**\n * @since 2.0.0\n */\n\nexport function constant(a) {\n  return function () {\n    return a;\n  };\n}\n/**\n * A thunk that returns always `true`.\n *\n * @since 2.0.0\n */\n\nexport var constTrue =\n/*#__PURE__*/\nconstant(true);\n/**\n * A thunk that returns always `false`.\n *\n * @since 2.0.0\n */\n\nexport var constFalse =\n/*#__PURE__*/\nconstant(false);\n/**\n * A thunk that returns always `null`.\n *\n * @since 2.0.0\n */\n\nexport var constNull =\n/*#__PURE__*/\nconstant(null);\n/**\n * A thunk that returns always `undefined`.\n *\n * @since 2.0.0\n */\n\nexport var constUndefined =\n/*#__PURE__*/\nconstant(undefined);\n/**\n * A thunk that returns always `void`.\n *\n * @since 2.0.0\n */\n\nexport var constVoid = constUndefined; // TODO: remove in v3\n\n/**\n * Flips the order of the arguments of a function of two arguments.\n *\n * @since 2.0.0\n */\n\nexport function flip(f) {\n  return function (b, a) {\n    return f(a, b);\n  };\n}\nexport function flow(ab, bc, cd, de, ef, fg, gh, hi, ij) {\n  switch (arguments.length) {\n    case 1:\n      return ab;\n\n    case 2:\n      return function () {\n        return bc(ab.apply(this, arguments));\n      };\n\n    case 3:\n      return function () {\n        return cd(bc(ab.apply(this, arguments)));\n      };\n\n    case 4:\n      return function () {\n        return de(cd(bc(ab.apply(this, arguments))));\n      };\n\n    case 5:\n      return function () {\n        return ef(de(cd(bc(ab.apply(this, arguments)))));\n      };\n\n    case 6:\n      return function () {\n        return fg(ef(de(cd(bc(ab.apply(this, arguments))))));\n      };\n\n    case 7:\n      return function () {\n        return gh(fg(ef(de(cd(bc(ab.apply(this, arguments)))))));\n      };\n\n    case 8:\n      return function () {\n        return hi(gh(fg(ef(de(cd(bc(ab.apply(this, arguments))))))));\n      };\n\n    case 9:\n      return function () {\n        return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this, arguments)))))))));\n      };\n  }\n\n  return;\n}\n/**\n * @since 2.0.0\n */\n\nexport function tuple() {\n  var t = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    t[_i] = arguments[_i];\n  }\n\n  return t;\n}\n/**\n * @since 2.0.0\n */\n\nexport function increment(n) {\n  return n + 1;\n}\n/**\n * @since 2.0.0\n */\n\nexport function decrement(n) {\n  return n - 1;\n}\n/**\n * @since 2.0.0\n */\n\nexport function absurd(_) {\n  throw new Error('Called `absurd` function which should be uncallable');\n}\n/**\n * Creates a tupled version of this function: instead of `n` arguments, it accepts a single tuple argument.\n *\n * @example\n * import { tupled } from 'fp-ts/function'\n *\n * const add = tupled((x: number, y: number): number => x + y)\n *\n * assert.strictEqual(add([1, 2]), 3)\n *\n * @since 2.4.0\n */\n\nexport function tupled(f) {\n  return function (a) {\n    return f.apply(void 0, a);\n  };\n}\n/**\n * Inverse function of `tupled`\n *\n * @since 2.4.0\n */\n\nexport function untupled(f) {\n  return function () {\n    var a = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      a[_i] = arguments[_i];\n    }\n\n    return f(a);\n  };\n}\nexport function pipe(a, ab, bc, cd, de, ef, fg, gh, hi, ij, jk, kl, lm, mn, no, op, pq, qr, rs, st) {\n  switch (arguments.length) {\n    case 1:\n      return a;\n\n    case 2:\n      return ab(a);\n\n    case 3:\n      return bc(ab(a));\n\n    case 4:\n      return cd(bc(ab(a)));\n\n    case 5:\n      return de(cd(bc(ab(a))));\n\n    case 6:\n      return ef(de(cd(bc(ab(a)))));\n\n    case 7:\n      return fg(ef(de(cd(bc(ab(a))))));\n\n    case 8:\n      return gh(fg(ef(de(cd(bc(ab(a)))))));\n\n    case 9:\n      return hi(gh(fg(ef(de(cd(bc(ab(a))))))));\n\n    case 10:\n      return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));\n\n    case 11:\n      return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));\n\n    case 12:\n      return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));\n\n    case 13:\n      return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));\n\n    case 14:\n      return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));\n\n    case 15:\n      return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));\n\n    case 16:\n      return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));\n\n    case 17:\n      return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));\n\n    case 18:\n      return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));\n\n    case 19:\n      return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));\n\n    case 20:\n      return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))));\n  }\n\n  return;\n}\n/**\n * Type hole simulation\n *\n * @since 2.7.0\n */\n\nexport var hole = absurd;\n/**\n * @internal\n */\n\nexport var bind_ = function bind_(a, name, b) {\n  var _a;\n\n  return Object.assign({}, a, (_a = {}, _a[name] = b, _a));\n};\n/**\n * @internal\n */\n\nexport var bindTo_ = function bindTo_(name) {\n  return function (b) {\n    var _a;\n\n    return _a = {}, _a[name] = b, _a;\n  };\n};","import { tailRec } from './ChainRec';\nimport { identity, pipe, bind_, bindTo_, flow } from './function'; // -------------------------------------------------------------------------------------\n// guards\n// -------------------------------------------------------------------------------------\n\n/**\n * Returns `true` if the either is an instance of `Left`, `false` otherwise.\n *\n * @category guards\n * @since 2.0.0\n */\n\nexport var isLeft = function isLeft(ma) {\n  return ma._tag === 'Left';\n};\n/**\n * Returns `true` if the either is an instance of `Right`, `false` otherwise.\n *\n * @category guards\n * @since 2.0.0\n */\n\nexport var isRight = function isRight(ma) {\n  return ma._tag === 'Right';\n}; // -------------------------------------------------------------------------------------\n// constructors\n// -------------------------------------------------------------------------------------\n\n/**\n * Constructs a new `Either` holding a `Left` value. This usually represents a failure, due to the right-bias of this\n * structure.\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var left = function left(e) {\n  return {\n    _tag: 'Left',\n    left: e\n  };\n};\n/**\n * Constructs a new `Either` holding a `Right` value. This usually represents a successful value due to the right bias\n * of this structure.\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var right = function right(a) {\n  return {\n    _tag: 'Right',\n    right: a\n  };\n}; // TODO: make lazy in v3\n\n/**\n * Takes a default and a nullable value, if the value is not nully, turn it into a `Right`, if the value is nully use\n * the provided default as a `Left`.\n *\n * @example\n * import { fromNullable, left, right } from 'fp-ts/Either'\n *\n * const parse = fromNullable('nully')\n *\n * assert.deepStrictEqual(parse(1), right(1))\n * assert.deepStrictEqual(parse(null), left('nully'))\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport function fromNullable(e) {\n  return function (a) {\n    return a == null ? left(e) : right(a);\n  };\n} // TODO: `onError => Lazy<A> => Either` in v3\n\n/**\n * Constructs a new `Either` from a function that might throw.\n *\n * @example\n * import { Either, left, right, tryCatch } from 'fp-ts/Either'\n *\n * const unsafeHead = <A>(as: Array<A>): A => {\n *   if (as.length > 0) {\n *     return as[0]\n *   } else {\n *     throw new Error('empty array')\n *   }\n * }\n *\n * const head = <A>(as: Array<A>): Either<Error, A> => {\n *   return tryCatch(() => unsafeHead(as), e => (e instanceof Error ? e : new Error('unknown error')))\n * }\n *\n * assert.deepStrictEqual(head([]), left(new Error('empty array')))\n * assert.deepStrictEqual(head([1, 2, 3]), right(1))\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport function tryCatch(f, onError) {\n  try {\n    return right(f());\n  } catch (e) {\n    return left(onError(e));\n  }\n} // TODO curry in v3\n\n/**\n * Converts a JavaScript Object Notation (JSON) string into an object.\n *\n * @example\n * import { parseJSON, toError, right, left } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(parseJSON('{\"a\":1}', toError), right({ a: 1 }))\n * assert.deepStrictEqual(parseJSON('{\"a\":}', toError), left(new SyntaxError('Unexpected token } in JSON at position 5')))\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport function parseJSON(s, onError) {\n  return tryCatch(function () {\n    return JSON.parse(s);\n  }, onError);\n} // TODO curry in v3\n\n/**\n * Converts a JavaScript value to a JavaScript Object Notation (JSON) string.\n *\n * @example\n * import * as E from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(E.stringifyJSON({ a: 1 }, E.toError), E.right('{\"a\":1}'))\n * const circular: any = { ref: null }\n * circular.ref = circular\n * assert.deepStrictEqual(\n *   pipe(\n *     E.stringifyJSON(circular, E.toError),\n *     E.mapLeft(e => e.message.includes('Converting circular structure to JSON'))\n *   ),\n *   E.left(true)\n * )\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport function stringifyJSON(u, onError) {\n  return tryCatch(function () {\n    return JSON.stringify(u);\n  }, onError);\n}\n/**\n * Derivable from `MonadThrow`.\n *\n * @example\n * import { fromOption, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import { none, some } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     some(1),\n *     fromOption(() => 'error')\n *   ),\n *   right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     none,\n *     fromOption(() => 'error')\n *   ),\n *   left('error')\n * )\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var fromOption = function fromOption(onNone) {\n  return function (ma) {\n    return ma._tag === 'None' ? left(onNone()) : right(ma.value);\n  };\n};\n/**\n * Derivable from `MonadThrow`.\n *\n * @example\n * import { fromPredicate, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     1,\n *     fromPredicate(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     -1,\n *     fromPredicate(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   left('error')\n * )\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var fromPredicate = function fromPredicate(predicate, onFalse) {\n  return function (a) {\n    return predicate(a) ? right(a) : left(onFalse(a));\n  };\n}; // -------------------------------------------------------------------------------------\n// destructors\n// -------------------------------------------------------------------------------------\n\n/**\n * Takes two functions and an `Either` value, if the value is a `Left` the inner value is applied to the first function,\n * if the value is a `Right` the inner value is applied to the second function.\n *\n * @example\n * import { fold, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * function onLeft(errors: Array<string>): string {\n *   return `Errors: ${errors.join(', ')}`\n * }\n *\n * function onRight(value: number): string {\n *   return `Ok: ${value}`\n * }\n *\n * assert.strictEqual(\n *   pipe(\n *     right(1),\n *     fold(onLeft, onRight)\n *   ),\n *   'Ok: 1'\n * )\n * assert.strictEqual(\n *   pipe(\n *     left(['error 1', 'error 2']),\n *     fold(onLeft, onRight)\n *   ),\n *   'Errors: error 1, error 2'\n * )\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport function fold(onLeft, onRight) {\n  return function (ma) {\n    return isLeft(ma) ? onLeft(ma.left) : onRight(ma.right);\n  };\n}\n/**\n * Less strict version of [`getOrElse`](#getOrElse).\n *\n * @category destructors\n * @since 2.6.0\n */\n\nexport var getOrElseW = function getOrElseW(onLeft) {\n  return function (ma) {\n    return isLeft(ma) ? onLeft(ma.left) : ma.right;\n  };\n};\n/**\n * Returns the wrapped value if it's a `Right` or a default value if is a `Left`.\n *\n * @example\n * import { getOrElse, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     right(1),\n *     getOrElse(() => 0)\n *   ),\n *   1\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     left('error'),\n *     getOrElse(() => 0)\n *   ),\n *   0\n * )\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var getOrElse = getOrElseW; // -------------------------------------------------------------------------------------\n// combinators\n// -------------------------------------------------------------------------------------\n\n/**\n * @category combinators\n * @since 2.9.0\n */\n\nexport function fromNullableK(e) {\n  var from = fromNullable(e);\n  return function (f) {\n    return function () {\n      var a = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        a[_i] = arguments[_i];\n      }\n\n      return from(f.apply(void 0, a));\n    };\n  };\n}\n/**\n * @category combinators\n * @since 2.9.0\n */\n\nexport function chainNullableK(e) {\n  var from = fromNullableK(e);\n  return function (f) {\n    return chain(from(f));\n  };\n}\n/**\n * Returns a `Right` if is a `Left` (and vice versa).\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport function swap(ma) {\n  return isLeft(ma) ? right(ma.left) : left(ma.right);\n}\n/**\n * Useful for recovering from errors.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport function orElse(onLeft) {\n  return function (ma) {\n    return isLeft(ma) ? onLeft(ma.left) : ma;\n  };\n}\n/**\n * Less strict version of [`filterOrElse`](#filterOrElse).\n *\n * @since 2.9.0\n */\n\nexport var filterOrElseW = function filterOrElseW(predicate, onFalse) {\n  return chainW(function (a) {\n    return predicate(a) ? right(a) : left(onFalse(a));\n  });\n};\n/**\n * Derivable from `MonadThrow`.\n *\n * @example\n * import { filterOrElse, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(\n *   pipe(\n *     right(1),\n *     filterOrElse(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   right(1)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     right(-1),\n *     filterOrElse(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   left('error')\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     left('a'),\n *     filterOrElse(\n *       (n) => n > 0,\n *       () => 'error'\n *     )\n *   ),\n *   left('a')\n * )\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var filterOrElse = filterOrElseW; // -------------------------------------------------------------------------------------\n// non-pipeables\n// -------------------------------------------------------------------------------------\n\nvar map_ = function map_(fa, f) {\n  return pipe(fa, map(f));\n};\n\nvar ap_ = function ap_(fab, fa) {\n  return pipe(fab, ap(fa));\n};\n/* istanbul ignore next */\n\n\nvar chain_ = function chain_(ma, f) {\n  return pipe(ma, chain(f));\n};\n/* istanbul ignore next */\n\n\nvar reduce_ = function reduce_(fa, b, f) {\n  return pipe(fa, reduce(b, f));\n};\n/* istanbul ignore next */\n\n\nvar foldMap_ = function foldMap_(M) {\n  return function (fa, f) {\n    var foldMapM = foldMap(M);\n    return pipe(fa, foldMapM(f));\n  };\n};\n/* istanbul ignore next */\n\n\nvar reduceRight_ = function reduceRight_(fa, b, f) {\n  return pipe(fa, reduceRight(b, f));\n};\n\nvar traverse_ = function traverse_(F) {\n  var traverseF = traverse(F);\n  return function (ta, f) {\n    return pipe(ta, traverseF(f));\n  };\n};\n\nvar bimap_ = function bimap_(fa, f, g) {\n  return pipe(fa, bimap(f, g));\n};\n\nvar mapLeft_ = function mapLeft_(fa, f) {\n  return pipe(fa, mapLeft(f));\n};\n/* istanbul ignore next */\n\n\nvar alt_ = function alt_(fa, that) {\n  return pipe(fa, alt(that));\n};\n/* istanbul ignore next */\n\n\nvar extend_ = function extend_(wa, f) {\n  return pipe(wa, extend(f));\n};\n\nvar chainRec_ = function chainRec_(a, f) {\n  return tailRec(f(a), function (e) {\n    return isLeft(e) ? right(left(e.left)) : isLeft(e.right) ? left(f(e.right.left)) : right(right(e.right.right));\n  });\n}; // -------------------------------------------------------------------------------------\n// pipeables\n// -------------------------------------------------------------------------------------\n\n/**\n * `map` can be used to turn functions `(a: A) => B` into functions `(fa: F<A>) => F<B>` whose argument and return types\n * use the type constructor `F` to represent some computational context.\n *\n * @category Functor\n * @since 2.0.0\n */\n\n\nexport var map = function map(f) {\n  return function (fa) {\n    return isLeft(fa) ? fa : right(f(fa.right));\n  };\n};\n/**\n * Map a pair of functions over the two type arguments of the bifunctor.\n *\n * @category Bifunctor\n * @since 2.0.0\n */\n\nexport var bimap = function bimap(f, g) {\n  return function (fa) {\n    return isLeft(fa) ? left(f(fa.left)) : right(g(fa.right));\n  };\n};\n/**\n * Map a function over the first type argument of a bifunctor.\n *\n * @category Bifunctor\n * @since 2.0.0\n */\n\nexport var mapLeft = function mapLeft(f) {\n  return function (fa) {\n    return isLeft(fa) ? left(f(fa.left)) : fa;\n  };\n};\n/**\n * Less strict version of [`ap`](#ap).\n *\n * @category Apply\n * @since 2.8.0\n */\n\nexport var apW = function apW(fa) {\n  return function (fab) {\n    return isLeft(fab) ? fab : isLeft(fa) ? fa : right(fab.right(fa.right));\n  };\n};\n/**\n * Apply a function to an argument under a type constructor.\n *\n * @category Apply\n * @since 2.0.0\n */\n\nexport var ap = apW;\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * Derivable from `Apply`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var apFirst = function apFirst(fb) {\n  return flow(map(function (a) {\n    return function () {\n      return a;\n    };\n  }), ap(fb));\n};\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * Derivable from `Apply`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var apSecond = function apSecond(fb) {\n  return flow(map(function () {\n    return function (b) {\n      return b;\n    };\n  }), ap(fb));\n};\n/**\n * Wrap a value into the type constructor.\n *\n * Equivalent to [`right`](#right).\n *\n * @example\n * import * as E from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(E.of('a'), E.right('a'))\n *\n * @category Applicative\n * @since 2.7.0\n */\n\nexport var of = right;\n/**\n * Less strict version of [`chain`](#chain).\n *\n * @category Monad\n * @since 2.6.0\n */\n\nexport var chainW = function chainW(f) {\n  return function (ma) {\n    return isLeft(ma) ? ma : f(ma.right);\n  };\n};\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation.\n *\n * @category Monad\n * @since 2.0.0\n */\n\nexport var chain = chainW;\n/**\n * Less strict version of [`chainFirst`](#chainFirst)\n *\n * Derivable from `Monad`.\n *\n * @category combinators\n * @since 2.8.0\n */\n\nexport var chainFirstW = function chainFirstW(f) {\n  return function (ma) {\n    return pipe(ma, chainW(function (a) {\n      return pipe(f(a), map(function () {\n        return a;\n      }));\n    }));\n  };\n};\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * Derivable from `Monad`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var chainFirst = chainFirstW;\n/**\n * The `flatten` function is the conventional monad join operator. It is used to remove one level of monadic structure, projecting its bound argument into the outer level.\n *\n * Derivable from `Monad`.\n *\n * @example\n * import * as E from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(E.flatten(E.right(E.right('a'))), E.right('a'))\n * assert.deepStrictEqual(E.flatten(E.right(E.left('e'))), E.left('e'))\n * assert.deepStrictEqual(E.flatten(E.left('e')), E.left('e'))\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var flatten =\n/*#__PURE__*/\nchain(identity);\n/**\n * Less strict version of [`alt`](#alt).\n *\n * @category Alt\n * @since 2.9.0\n */\n\nexport var altW = function altW(that) {\n  return function (fa) {\n    return isLeft(fa) ? that() : fa;\n  };\n};\n/**\n * Identifies an associative operation on a type constructor. It is similar to `Semigroup`, except that it applies to\n * types of kind `* -> *`.\n *\n * @category Alt\n * @since 2.0.0\n */\n\nexport var alt = altW;\n/**\n * @category Extend\n * @since 2.0.0\n */\n\nexport var extend = function extend(f) {\n  return function (wa) {\n    return isLeft(wa) ? wa : right(f(wa));\n  };\n};\n/**\n * Derivable from `Extend`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var duplicate =\n/*#__PURE__*/\nextend(identity);\n/**\n * Left-associative fold of a structure.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n *\n * const startWith = 'prefix'\n * const concat = (a: string, b: string) => `${a}:${b}`\n *\n * assert.deepStrictEqual(\n *   pipe(E.right('a'), E.reduce(startWith, concat)),\n *   'prefix:a',\n * )\n *\n * assert.deepStrictEqual(\n *   pipe(E.left('e'), E.reduce(startWith, concat)),\n *   'prefix',\n * )\n *\n * @category Foldable\n * @since 2.0.0\n */\n\nexport var reduce = function reduce(b, f) {\n  return function (fa) {\n    return isLeft(fa) ? b : f(b, fa.right);\n  };\n};\n/**\n * Map each element of the structure to a monoid, and combine the results.\n *\n * @example\n * import { pipe } from 'fp-ts/function';\n * import * as E from 'fp-ts/Either'\n * import { monoidString } from 'fp-ts/Monoid'\n *\n * const yell = (a: string) => `${a}!`\n *\n * assert.deepStrictEqual(\n *   pipe(E.right('a'), E.foldMap(monoidString)(yell)),\n *   'a!',\n * )\n *\n * assert.deepStrictEqual(\n *   pipe(E.left('e'), E.foldMap(monoidString)(yell)),\n *   monoidString.empty,\n * )\n *\n * @category Foldable\n * @since 2.0.0\n */\n\nexport var foldMap = function foldMap(M) {\n  return function (f) {\n    return function (fa) {\n      return isLeft(fa) ? M.empty : f(fa.right);\n    };\n  };\n};\n/**\n * Right-associative fold of a structure.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n *\n * const startWith = 'postfix'\n * const concat = (a: string, b: string) => `${a}:${b}`\n *\n * assert.deepStrictEqual(\n *   pipe(E.right('a'), E.reduceRight(startWith, concat)),\n *   'a:postfix',\n * )\n *\n * assert.deepStrictEqual(\n *   pipe(E.left('e'), E.reduceRight(startWith, concat)),\n *   'postfix',\n * )\n *\n * @category Foldable\n * @since 2.0.0\n */\n\nexport var reduceRight = function reduceRight(b, f) {\n  return function (fa) {\n    return isLeft(fa) ? b : f(fa.right, b);\n  };\n};\n/**\n * Map each element of a structure to an action, evaluate these actions from left to right, and collect the results.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as A from 'fp-ts/Array'\n * import * as E from 'fp-ts/Either'\n * import * as O from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   pipe(E.right(['a']), E.traverse(O.option)(A.head)),\n *   O.some(E.right('a')),\n *  )\n *\n * assert.deepStrictEqual(\n *   pipe(E.right([]), E.traverse(O.option)(A.head)),\n *   O.none,\n * )\n *\n * @category Traversable\n * @since 2.6.3\n */\n\nexport var traverse = function traverse(F) {\n  return function (f) {\n    return function (ta) {\n      return isLeft(ta) ? F.of(left(ta.left)) : F.map(f(ta.right), right);\n    };\n  };\n};\n/**\n * Evaluate each monadic action in the structure from left to right, and collect the results.\n *\n * @example\n * import { pipe } from 'fp-ts/function'\n * import * as E from 'fp-ts/Either'\n * import * as O from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(\n *   pipe(E.right(O.some('a')), E.sequence(O.option)),\n *   O.some(E.right('a')),\n *  )\n *\n * assert.deepStrictEqual(\n *   pipe(E.right(O.none), E.sequence(O.option)),\n *   O.none\n * )\n *\n * @category Traversable\n * @since 2.6.3\n */\n\nexport var sequence = function sequence(F) {\n  return function (ma) {\n    return isLeft(ma) ? F.of(left(ma.left)) : F.map(ma.right, right);\n  };\n};\n/**\n * @category MonadThrow\n * @since 2.6.3\n */\n\nexport var throwError = left; // -------------------------------------------------------------------------------------\n// instances\n// -------------------------------------------------------------------------------------\n\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport var URI = 'Either';\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport function getShow(SE, SA) {\n  return {\n    show: function show(ma) {\n      return isLeft(ma) ? \"left(\" + SE.show(ma.left) + \")\" : \"right(\" + SA.show(ma.right) + \")\";\n    }\n  };\n}\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport function getEq(EL, EA) {\n  return {\n    equals: function equals(x, y) {\n      return x === y || (isLeft(x) ? isLeft(y) && EL.equals(x.left, y.left) : isRight(y) && EA.equals(x.right, y.right));\n    }\n  };\n}\n/**\n * Semigroup returning the left-most non-`Left` value. If both operands are `Right`s then the inner values are\n * concatenated using the provided `Semigroup`\n *\n * @example\n * import { getSemigroup, left, right } from 'fp-ts/Either'\n * import { semigroupSum } from 'fp-ts/Semigroup'\n *\n * const S = getSemigroup<string, number>(semigroupSum)\n * assert.deepStrictEqual(S.concat(left('a'), left('b')), left('a'))\n * assert.deepStrictEqual(S.concat(left('a'), right(2)), right(2))\n * assert.deepStrictEqual(S.concat(right(1), left('b')), right(1))\n * assert.deepStrictEqual(S.concat(right(1), right(2)), right(3))\n *\n * @category instances\n * @since 2.0.0\n */\n\nexport function getSemigroup(S) {\n  return {\n    concat: function concat(x, y) {\n      return isLeft(y) ? x : isLeft(x) ? y : right(S.concat(x.right, y.right));\n    }\n  };\n}\n/**\n * Semigroup returning the left-most `Left` value. If both operands are `Right`s then the inner values\n * are concatenated using the provided `Semigroup`\n *\n * @example\n * import { getApplySemigroup, left, right } from 'fp-ts/Either'\n * import { semigroupSum } from 'fp-ts/Semigroup'\n *\n * const S = getApplySemigroup<string, number>(semigroupSum)\n * assert.deepStrictEqual(S.concat(left('a'), left('b')), left('a'))\n * assert.deepStrictEqual(S.concat(left('a'), right(2)), left('a'))\n * assert.deepStrictEqual(S.concat(right(1), left('b')), left('b'))\n * assert.deepStrictEqual(S.concat(right(1), right(2)), right(3))\n *\n * @category instances\n * @since 2.0.0\n */\n\nexport function getApplySemigroup(S) {\n  return {\n    concat: function concat(x, y) {\n      return isLeft(x) ? x : isLeft(y) ? y : right(S.concat(x.right, y.right));\n    }\n  };\n}\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport function getApplyMonoid(M) {\n  return {\n    concat: getApplySemigroup(M).concat,\n    empty: right(M.empty)\n  };\n}\n/**\n * Builds a `Filterable` instance for `Either` given `Monoid` for the left side\n *\n * @category instances\n * @since 3.0.0\n */\n\nexport function getFilterable(M) {\n  var empty = left(M.empty);\n\n  var compact = function compact(ma) {\n    return isLeft(ma) ? ma : ma.right._tag === 'None' ? empty : right(ma.right.value);\n  };\n\n  var separate = function separate(ma) {\n    return isLeft(ma) ? {\n      left: ma,\n      right: ma\n    } : isLeft(ma.right) ? {\n      left: right(ma.right.left),\n      right: empty\n    } : {\n      left: empty,\n      right: right(ma.right.right)\n    };\n  };\n\n  var partitionMap = function partitionMap(ma, f) {\n    if (isLeft(ma)) {\n      return {\n        left: ma,\n        right: ma\n      };\n    }\n\n    var e = f(ma.right);\n    return isLeft(e) ? {\n      left: right(e.left),\n      right: empty\n    } : {\n      left: empty,\n      right: right(e.right)\n    };\n  };\n\n  var partition = function partition(ma, p) {\n    return isLeft(ma) ? {\n      left: ma,\n      right: ma\n    } : p(ma.right) ? {\n      left: empty,\n      right: right(ma.right)\n    } : {\n      left: right(ma.right),\n      right: empty\n    };\n  };\n\n  var filterMap = function filterMap(ma, f) {\n    if (isLeft(ma)) {\n      return ma;\n    }\n\n    var ob = f(ma.right);\n    return ob._tag === 'None' ? empty : right(ob.value);\n  };\n\n  var filter = function filter(ma, predicate) {\n    return isLeft(ma) ? ma : predicate(ma.right) ? ma : empty;\n  };\n\n  return {\n    URI: URI,\n    _E: undefined,\n    map: map_,\n    compact: compact,\n    separate: separate,\n    filter: filter,\n    filterMap: filterMap,\n    partition: partition,\n    partitionMap: partitionMap\n  };\n}\n/**\n * Builds `Witherable` instance for `Either` given `Monoid` for the left side\n *\n * @category instances\n * @since 2.0.0\n */\n\nexport function getWitherable(M) {\n  var F_ = getFilterable(M);\n\n  var wither = function wither(F) {\n    var traverseF = traverse_(F);\n    return function (ma, f) {\n      return F.map(traverseF(ma, f), F_.compact);\n    };\n  };\n\n  var wilt = function wilt(F) {\n    var traverseF = traverse_(F);\n    return function (ma, f) {\n      return F.map(traverseF(ma, f), F_.separate);\n    };\n  };\n\n  return {\n    URI: URI,\n    _E: undefined,\n    map: map_,\n    compact: F_.compact,\n    separate: F_.separate,\n    filter: F_.filter,\n    filterMap: F_.filterMap,\n    partition: F_.partition,\n    partitionMap: F_.partitionMap,\n    traverse: traverse_,\n    sequence: sequence,\n    reduce: reduce_,\n    foldMap: foldMap_,\n    reduceRight: reduceRight_,\n    wither: wither,\n    wilt: wilt\n  };\n}\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport function getApplicativeValidation(SE) {\n  return {\n    URI: URI,\n    _E: undefined,\n    map: map_,\n    ap: function ap(fab, fa) {\n      return isLeft(fab) ? isLeft(fa) ? left(SE.concat(fab.left, fa.left)) : fab : isLeft(fa) ? fa : right(fab.right(fa.right));\n    },\n    of: of\n  };\n}\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport function getAltValidation(SE) {\n  return {\n    URI: URI,\n    _E: undefined,\n    map: map_,\n    alt: function alt(me, that) {\n      if (isRight(me)) {\n        return me;\n      }\n\n      var ea = that();\n      return isLeft(ea) ? left(SE.concat(me.left, ea.left)) : ea;\n    }\n  };\n} // TODO: remove in v3\n\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport function getValidation(SE) {\n  var applicativeValidation = getApplicativeValidation(SE);\n  var altValidation = getAltValidation(SE);\n  return {\n    URI: URI,\n    _E: undefined,\n    map: map_,\n    of: of,\n    chain: chain_,\n    bimap: bimap_,\n    mapLeft: mapLeft_,\n    reduce: reduce_,\n    foldMap: foldMap_,\n    reduceRight: reduceRight_,\n    extend: extend_,\n    traverse: traverse_,\n    sequence: sequence,\n    chainRec: chainRec_,\n    throwError: throwError,\n    ap: applicativeValidation.ap,\n    alt: altValidation.alt\n  };\n}\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport function getValidationSemigroup(SE, SA) {\n  return {\n    concat: function concat(x, y) {\n      return isLeft(x) ? isLeft(y) ? left(SE.concat(x.left, y.left)) : x : isLeft(y) ? y : right(SA.concat(x.right, y.right));\n    }\n  };\n}\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Functor = {\n  URI: URI,\n  map: map_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Applicative = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Monad = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of,\n  chain: chain_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Foldable = {\n  URI: URI,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Traversable = {\n  URI: URI,\n  map: map_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Bifunctor = {\n  URI: URI,\n  bimap: bimap_,\n  mapLeft: mapLeft_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Alt = {\n  URI: URI,\n  map: map_,\n  alt: alt_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Extend = {\n  URI: URI,\n  map: map_,\n  extend: extend_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var ChainRec = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  chain: chain_,\n  chainRec: chainRec_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var MonadThrow = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of,\n  chain: chain_,\n  throwError: throwError\n};\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport function getValidationMonoid(SE, SA) {\n  return {\n    concat: getValidationSemigroup(SE, SA).concat,\n    empty: right(SA.empty)\n  };\n}\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport var either = {\n  URI: URI,\n  map: map_,\n  of: of,\n  ap: ap_,\n  chain: chain_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence,\n  bimap: bimap_,\n  mapLeft: mapLeft_,\n  alt: alt_,\n  extend: extend_,\n  chainRec: chainRec_,\n  throwError: throwError\n}; // -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n\n/**\n * Default value for the `onError` argument of `tryCatch`\n *\n * @since 2.0.0\n */\n\nexport function toError(e) {\n  return e instanceof Error ? e : new Error(String(e));\n}\n/**\n * @since 2.0.0\n */\n\nexport function elem(E) {\n  return function (a, ma) {\n    return isLeft(ma) ? false : E.equals(a, ma.right);\n  };\n}\n/**\n * Returns `false` if `Left` or returns the result of the application of the given predicate to the `Right` value.\n *\n * @example\n * import { exists, left, right } from 'fp-ts/Either'\n *\n * const gt2 = exists((n: number) => n > 2)\n *\n * assert.strictEqual(gt2(left('a')), false)\n * assert.strictEqual(gt2(right(1)), false)\n * assert.strictEqual(gt2(right(3)), true)\n *\n * @since 2.0.0\n */\n\nexport function exists(predicate) {\n  return function (ma) {\n    return isLeft(ma) ? false : predicate(ma.right);\n  };\n} // -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n\n/**\n * @since 2.9.0\n */\n\nexport var Do =\n/*#__PURE__*/\nof({});\n/**\n * @since 2.8.0\n */\n\nexport var bindTo = function bindTo(name) {\n  return map(bindTo_(name));\n};\n/**\n * @since 2.8.0\n */\n\nexport var bindW = function bindW(name, f) {\n  return chainW(function (a) {\n    return pipe(f(a), map(function (b) {\n      return bind_(a, name, b);\n    }));\n  });\n};\n/**\n * @since 2.8.0\n */\n\nexport var bind = bindW; // -------------------------------------------------------------------------------------\n// pipeable sequence S\n// -------------------------------------------------------------------------------------\n\n/**\n * @since 2.8.0\n */\n\nexport var apSW = function apSW(name, fb) {\n  return flow(map(function (a) {\n    return function (b) {\n      return bind_(a, name, b);\n    };\n  }), apW(fb));\n};\n/**\n * @since 2.8.0\n */\n\nexport var apS = apSW; // -------------------------------------------------------------------------------------\n// array utils\n// -------------------------------------------------------------------------------------\n\n/**\n *\n * @since 2.9.0\n */\n\nexport var traverseArrayWithIndex = function traverseArrayWithIndex(f) {\n  return function (arr) {\n    // tslint:disable-next-line: readonly-array\n    var result = [];\n\n    for (var i = 0; i < arr.length; i++) {\n      var e = f(i, arr[i]);\n\n      if (e._tag === 'Left') {\n        return e;\n      }\n\n      result.push(e.right);\n    }\n\n    return right(result);\n  };\n};\n/**\n * map an array using provided function to Either then transform to Either of the array\n * this function have the same behavior of `A.traverse(E.either)` but it's optimized and perform better\n *\n * @example\n *\n *\n * import { traverseArray, left, right, fromPredicate } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as A from 'fp-ts/Array'\n *\n * const arr = A.range(0, 10)\n * assert.deepStrictEqual(\n *   pipe(\n *     arr,\n *     traverseArray((x) => right(x))\n *   ),\n *   right(arr)\n * )\n * assert.deepStrictEqual(\n *   pipe(\n *     arr,\n *     traverseArray(\n *       fromPredicate(\n *         (x) => x > 5,\n *         () => 'a'\n *       )\n *     )\n *   ),\n *   left('a')\n * )\n * @since 2.9.0\n */\n\nexport var traverseArray = function traverseArray(f) {\n  return traverseArrayWithIndex(function (_, a) {\n    return f(a);\n  });\n};\n/**\n * convert an array of either to an either of array\n * this function have the same behavior of `A.sequence(E.either)` but it's optimized and perform better\n *\n * @example\n *\n * import { sequenceArray, left, right } from 'fp-ts/Either'\n * import { pipe } from 'fp-ts/function'\n * import * as A from 'fp-ts/Array'\n *\n * const arr = A.range(0, 10)\n * assert.deepStrictEqual(pipe(arr, A.map(right), sequenceArray), right(arr))\n * assert.deepStrictEqual(pipe(arr, A.map(right), A.cons(left('Error')), sequenceArray), left('Error'))\n *\n * @since 2.9.0\n */\n\nexport var sequenceArray =\n/*#__PURE__*/\ntraverseArray(identity);","import { identity, pipe as pipeFromFunctionModule } from './function'; // TODO: remove module in v3\n\n/**\n * Use [`pipe`](https://gcanti.github.io/fp-ts/modules/function.ts.html#flow) from `function` module instead.\n *\n * @since 2.0.0\n */\n\nexport var pipe = pipeFromFunctionModule;\n\nvar isFunctor = function isFunctor(I) {\n  return typeof I.map === 'function';\n};\n\nvar isContravariant = function isContravariant(I) {\n  return typeof I.contramap === 'function';\n};\n\nvar isFunctorWithIndex = function isFunctorWithIndex(I) {\n  return typeof I.mapWithIndex === 'function';\n};\n\nvar isApply = function isApply(I) {\n  return typeof I.ap === 'function';\n};\n\nvar isChain = function isChain(I) {\n  return typeof I.chain === 'function';\n};\n\nvar isBifunctor = function isBifunctor(I) {\n  return typeof I.bimap === 'function';\n};\n\nvar isExtend = function isExtend(I) {\n  return typeof I.extend === 'function';\n};\n\nvar isFoldable = function isFoldable(I) {\n  return typeof I.reduce === 'function';\n};\n\nvar isFoldableWithIndex = function isFoldableWithIndex(I) {\n  return typeof I.reduceWithIndex === 'function';\n};\n\nvar isAlt = function isAlt(I) {\n  return typeof I.alt === 'function';\n};\n\nvar isCompactable = function isCompactable(I) {\n  return typeof I.compact === 'function';\n};\n\nvar isFilterable = function isFilterable(I) {\n  return typeof I.filter === 'function';\n};\n\nvar isFilterableWithIndex = function isFilterableWithIndex(I) {\n  return typeof I.filterWithIndex === 'function';\n};\n\nvar isProfunctor = function isProfunctor(I) {\n  return typeof I.promap === 'function';\n};\n\nvar isSemigroupoid = function isSemigroupoid(I) {\n  return typeof I.compose === 'function';\n};\n\nvar isMonadThrow = function isMonadThrow(I) {\n  return typeof I.throwError === 'function';\n};\n\nexport function pipeable(I) {\n  var r = {};\n\n  if (isFunctor(I)) {\n    var map = function map(f) {\n      return function (fa) {\n        return I.map(fa, f);\n      };\n    };\n\n    r.map = map;\n  }\n\n  if (isContravariant(I)) {\n    var contramap = function contramap(f) {\n      return function (fa) {\n        return I.contramap(fa, f);\n      };\n    };\n\n    r.contramap = contramap;\n  }\n\n  if (isFunctorWithIndex(I)) {\n    var mapWithIndex = function mapWithIndex(f) {\n      return function (fa) {\n        return I.mapWithIndex(fa, f);\n      };\n    };\n\n    r.mapWithIndex = mapWithIndex;\n  }\n\n  if (isApply(I)) {\n    var ap = function ap(fa) {\n      return function (fab) {\n        return I.ap(fab, fa);\n      };\n    };\n\n    var apFirst = function apFirst(fb) {\n      return function (fa) {\n        return I.ap(I.map(fa, function (a) {\n          return function () {\n            return a;\n          };\n        }), fb);\n      };\n    };\n\n    r.ap = ap;\n    r.apFirst = apFirst;\n\n    r.apSecond = function (fb) {\n      return function (fa) {\n        return I.ap(I.map(fa, function () {\n          return function (b) {\n            return b;\n          };\n        }), fb);\n      };\n    };\n  }\n\n  if (isChain(I)) {\n    var chain = function chain(f) {\n      return function (ma) {\n        return I.chain(ma, f);\n      };\n    };\n\n    var chainFirst = function chainFirst(f) {\n      return function (ma) {\n        return I.chain(ma, function (a) {\n          return I.map(f(a), function () {\n            return a;\n          });\n        });\n      };\n    };\n\n    var flatten = function flatten(mma) {\n      return I.chain(mma, identity);\n    };\n\n    r.chain = chain;\n    r.chainFirst = chainFirst;\n    r.flatten = flatten;\n  }\n\n  if (isBifunctor(I)) {\n    var bimap = function bimap(f, g) {\n      return function (fa) {\n        return I.bimap(fa, f, g);\n      };\n    };\n\n    var mapLeft = function mapLeft(f) {\n      return function (fa) {\n        return I.mapLeft(fa, f);\n      };\n    };\n\n    r.bimap = bimap;\n    r.mapLeft = mapLeft;\n  }\n\n  if (isExtend(I)) {\n    var extend = function extend(f) {\n      return function (wa) {\n        return I.extend(wa, f);\n      };\n    };\n\n    var duplicate = function duplicate(wa) {\n      return I.extend(wa, identity);\n    };\n\n    r.extend = extend;\n    r.duplicate = duplicate;\n  }\n\n  if (isFoldable(I)) {\n    var reduce = function reduce(b, f) {\n      return function (fa) {\n        return I.reduce(fa, b, f);\n      };\n    };\n\n    var foldMap = function foldMap(M) {\n      var foldMapM = I.foldMap(M);\n      return function (f) {\n        return function (fa) {\n          return foldMapM(fa, f);\n        };\n      };\n    };\n\n    var reduceRight = function reduceRight(b, f) {\n      return function (fa) {\n        return I.reduceRight(fa, b, f);\n      };\n    };\n\n    r.reduce = reduce;\n    r.foldMap = foldMap;\n    r.reduceRight = reduceRight;\n  }\n\n  if (isFoldableWithIndex(I)) {\n    var reduceWithIndex = function reduceWithIndex(b, f) {\n      return function (fa) {\n        return I.reduceWithIndex(fa, b, f);\n      };\n    };\n\n    var foldMapWithIndex = function foldMapWithIndex(M) {\n      var foldMapM = I.foldMapWithIndex(M);\n      return function (f) {\n        return function (fa) {\n          return foldMapM(fa, f);\n        };\n      };\n    };\n\n    var reduceRightWithIndex = function reduceRightWithIndex(b, f) {\n      return function (fa) {\n        return I.reduceRightWithIndex(fa, b, f);\n      };\n    };\n\n    r.reduceWithIndex = reduceWithIndex;\n    r.foldMapWithIndex = foldMapWithIndex;\n    r.reduceRightWithIndex = reduceRightWithIndex;\n  }\n\n  if (isAlt(I)) {\n    var alt = function alt(that) {\n      return function (fa) {\n        return I.alt(fa, that);\n      };\n    };\n\n    r.alt = alt;\n  }\n\n  if (isCompactable(I)) {\n    r.compact = I.compact;\n    r.separate = I.separate;\n  }\n\n  if (isFilterable(I)) {\n    var filter = function filter(predicate) {\n      return function (fa) {\n        return I.filter(fa, predicate);\n      };\n    };\n\n    var filterMap = function filterMap(f) {\n      return function (fa) {\n        return I.filterMap(fa, f);\n      };\n    };\n\n    var partition = function partition(predicate) {\n      return function (fa) {\n        return I.partition(fa, predicate);\n      };\n    };\n\n    var partitionMap = function partitionMap(f) {\n      return function (fa) {\n        return I.partitionMap(fa, f);\n      };\n    };\n\n    r.filter = filter;\n    r.filterMap = filterMap;\n    r.partition = partition;\n    r.partitionMap = partitionMap;\n  }\n\n  if (isFilterableWithIndex(I)) {\n    var filterWithIndex = function filterWithIndex(predicateWithIndex) {\n      return function (fa) {\n        return I.filterWithIndex(fa, predicateWithIndex);\n      };\n    };\n\n    var filterMapWithIndex = function filterMapWithIndex(f) {\n      return function (fa) {\n        return I.filterMapWithIndex(fa, f);\n      };\n    };\n\n    var partitionWithIndex = function partitionWithIndex(predicateWithIndex) {\n      return function (fa) {\n        return I.partitionWithIndex(fa, predicateWithIndex);\n      };\n    };\n\n    var partitionMapWithIndex = function partitionMapWithIndex(f) {\n      return function (fa) {\n        return I.partitionMapWithIndex(fa, f);\n      };\n    };\n\n    r.filterWithIndex = filterWithIndex;\n    r.filterMapWithIndex = filterMapWithIndex;\n    r.partitionWithIndex = partitionWithIndex;\n    r.partitionMapWithIndex = partitionMapWithIndex;\n  }\n\n  if (isProfunctor(I)) {\n    var promap = function promap(f, g) {\n      return function (fa) {\n        return I.promap(fa, f, g);\n      };\n    };\n\n    r.promap = promap;\n  }\n\n  if (isSemigroupoid(I)) {\n    var compose = function compose(that) {\n      return function (fa) {\n        return I.compose(fa, that);\n      };\n    };\n\n    r.compose = compose;\n  }\n\n  if (isMonadThrow(I)) {\n    var fromOption = function fromOption(onNone) {\n      return function (ma) {\n        return ma._tag === 'None' ? I.throwError(onNone()) : I.of(ma.value);\n      };\n    };\n\n    var fromEither = function fromEither(ma) {\n      return ma._tag === 'Left' ? I.throwError(ma.left) : I.of(ma.right);\n    };\n\n    var fromPredicate = function fromPredicate(predicate, onFalse) {\n      return function (a) {\n        return predicate(a) ? I.of(a) : I.throwError(onFalse(a));\n      };\n    };\n\n    var filterOrElse = function filterOrElse(predicate, onFalse) {\n      return function (ma) {\n        return I.chain(ma, function (a) {\n          return predicate(a) ? I.of(a) : I.throwError(onFalse(a));\n        });\n      };\n    };\n\n    r.fromOption = fromOption;\n    r.fromEither = fromEither;\n    r.fromPredicate = fromPredicate;\n    r.filterOrElse = filterOrElse;\n  }\n\n  return r;\n}","/**\n * @since 0.5.0\n */\nimport * as F from 'fluture';\nimport * as E from 'fp-ts/es6/Either';\nimport { pipeable } from 'fp-ts/es6/pipeable';\n/**\n * @since 0.5.0\n */\n\nexport var URI = 'Fluture/Future';\n/**\n * @since 0.6.4\n */\n\nexport var left = F.reject;\n/**\n * @since 0.6.4\n */\n\nexport var right = F.resolve;\n/**\n * @since 0.6.4\n */\n\nexport function leftIO(ma) {\n  return F.swap(F.attempt(ma));\n}\n/**\n * @since 0.6.4\n */\n\nexport var rightIO = F.attempt;\n/**\n * @since 0.6.4\n */\n\nexport function leftTask(ma) {\n  return F.swap(F.attemptP(ma));\n}\n/**\n * @since 0.6.4\n */\n\nexport var rightTask = F.attemptP;\n/**\n * @since 0.6.4\n */\n\nexport function orElse(onLeft) {\n  return F.chainRej(onLeft);\n}\n/**\n * @since 0.6.4\n */\n\nexport function fold(onLeft, onRight) {\n  return function (ma) {\n    return function () {\n      return F.promise(F.coalesce(onLeft)(onRight)(ma)).then(function (mb) {\n        return mb();\n      });\n    };\n  };\n}\n/**\n * @since 0.6.4\n */\n\nexport var swap = F.swap;\nexport function futurify(f) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    return F.node(function (done) {\n      var cbResolver = function cbResolver(e, r) {\n        return e != null ? done(e) : done(null, r);\n      };\n\n      f.apply(null, args.concat(cbResolver));\n    });\n  };\n}\n/**\n * @since 0.5.0\n */\n\nexport var future = {\n  URI: URI,\n  map: function map(fa, f) {\n    return F.map(f)(fa);\n  },\n  of: F.resolve,\n  ap: function ap(fab, fa) {\n    return F.ap(fa)(fab);\n  },\n  chain: function chain(fa, f) {\n    return F.chain(f)(fa);\n  },\n  bimap: function bimap(fea, f, g) {\n    return F.bimap(f)(g)(fea);\n  },\n  mapLeft: function mapLeft(fea, f) {\n    return F.mapRej(f)(fea);\n  },\n  alt: function alt(fx, f) {\n    return F.alt(f())(fx);\n  },\n  chainRec: function chainRec(a, f) {\n    return function recur(a) {\n      return future.chain(f(a), E.fold(recur, F.resolve));\n    }(a);\n  },\n  throwError: left,\n  fromTask: F.attemptP,\n  fromIO: F.attempt\n};\n/**\n * @since 0.6.4\n */\n\nexport function delay(millis) {\n  return chain(F.after(millis));\n}\n\nvar _a = pipeable(future),\n    alt = _a.alt,\n    ap = _a.ap,\n    apFirst = _a.apFirst,\n    apSecond = _a.apSecond,\n    bimap = _a.bimap,\n    chain = _a.chain,\n    chainFirst = _a.chainFirst,\n    flatten = _a.flatten,\n    map = _a.map,\n    mapLeft = _a.mapLeft,\n    fromEither = _a.fromEither,\n    fromOption = _a.fromOption,\n    fromPredicate = _a.fromPredicate;\n\nexport {\n/**\n * @since 0.6.4\n */\nalt,\n/**\n * @since 0.6.4\n */\nap,\n/**\n * @since 0.6.4\n */\napFirst,\n/**\n * @since 0.6.4\n */\napSecond,\n/**\n * @since 0.6.4\n */\nbimap,\n/**\n * @since 0.6.4\n */\nchain,\n/**\n * @since 0.6.4\n */\nchainFirst,\n/**\n * @since 0.6.4\n */\nflatten,\n/**\n * @since 0.6.4\n */\nmap,\n/**\n * @since 0.6.4\n */\nmapLeft,\n/**\n * @since 0.6.4\n */\nfromEither,\n/**\n * @since 0.6.4\n */\nfromOption,\n/**\n * @since 0.6.4\n */\nfromPredicate };","import { identity, pipe, bind_, bindTo_, flow } from './function';\nimport * as O from './Option';\nimport { fromCompare, getMonoid as getOrdMonoid, ordNumber } from './Ord'; // -------------------------------------------------------------------------------------\n// model\n// -------------------------------------------------------------------------------------\n\n/**\n * @category constructors\n * @since 2.5.0\n */\n// tslint:disable-next-line: readonly-array\n\nexport function fromArray(as) {\n  var l = as.length;\n\n  if (l === 0) {\n    return empty;\n  }\n\n  var ras = Array(l);\n\n  for (var i = 0; i < l; i++) {\n    ras[i] = as[i];\n  }\n\n  return ras;\n}\n/**\n * @category destructors\n * @since 2.5.0\n */\n// tslint:disable-next-line: readonly-array\n\nexport function toArray(ras) {\n  var l = ras.length;\n  var as = Array(l);\n\n  for (var i = 0; i < l; i++) {\n    as[i] = ras[i];\n  }\n\n  return as;\n}\n/**\n * @category instances\n * @since 2.5.0\n */\n\nexport function getShow(S) {\n  return {\n    show: function show(as) {\n      return \"[\" + as.map(S.show).join(', ') + \"]\";\n    }\n  };\n}\n\nvar concat = function concat(x, y) {\n  var lenx = x.length;\n\n  if (lenx === 0) {\n    return y;\n  }\n\n  var leny = y.length;\n\n  if (leny === 0) {\n    return x;\n  }\n\n  var r = Array(lenx + leny);\n\n  for (var i = 0; i < lenx; i++) {\n    r[i] = x[i];\n  }\n\n  for (var i = 0; i < leny; i++) {\n    r[i + lenx] = y[i];\n  }\n\n  return r;\n};\n/**\n * Returns a `Monoid` for `ReadonlyArray<A>`\n *\n * @example\n * import { getMonoid } from 'fp-ts/ReadonlyArray'\n *\n * const M = getMonoid<number>()\n * assert.deepStrictEqual(M.concat([1, 2], [3, 4]), [1, 2, 3, 4])\n *\n * @category instances\n * @since 2.5.0\n */\n\n\nexport function getMonoid() {\n  return {\n    concat: concat,\n    empty: empty\n  };\n}\n/**\n * Derives an `Eq` over the `ReadonlyArray` of a given element type from the `Eq` of that type. The derived `Eq` defines two\n * arrays as equal if all elements of both arrays are compared equal pairwise with the given `E`. In case of arrays of\n * different lengths, the result is non equality.\n *\n * @example\n * import { eqString } from 'fp-ts/Eq'\n * import { getEq } from 'fp-ts/ReadonlyArray'\n *\n * const E = getEq(eqString)\n * assert.strictEqual(E.equals(['a', 'b'], ['a', 'b']), true)\n * assert.strictEqual(E.equals(['a'], []), false)\n *\n * @category instances\n * @since 2.5.0\n */\n\nexport function getEq(E) {\n  return {\n    equals: function equals(xs, ys) {\n      return xs === ys || xs.length === ys.length && xs.every(function (x, i) {\n        return E.equals(x, ys[i]);\n      });\n    }\n  };\n}\n/**\n * Derives an `Ord` over the `ReadonlyArray` of a given element type from the `Ord` of that type. The ordering between two such\n * arrays is equal to: the first non equal comparison of each arrays elements taken pairwise in increasing order, in\n * case of equality over all the pairwise elements; the longest array is considered the greatest, if both arrays have\n * the same length, the result is equality.\n *\n * @example\n * import { getOrd } from 'fp-ts/ReadonlyArray'\n * import { ordString } from 'fp-ts/Ord'\n *\n * const O = getOrd(ordString)\n * assert.strictEqual(O.compare(['b'], ['a']), 1)\n * assert.strictEqual(O.compare(['a'], ['a']), 0)\n * assert.strictEqual(O.compare(['a'], ['b']), -1)\n *\n *\n * @category instances\n * @since 2.5.0\n */\n\nexport function getOrd(O) {\n  return fromCompare(function (a, b) {\n    var aLen = a.length;\n    var bLen = b.length;\n    var len = Math.min(aLen, bLen);\n\n    for (var i = 0; i < len; i++) {\n      var ordering = O.compare(a[i], b[i]);\n\n      if (ordering !== 0) {\n        return ordering;\n      }\n    }\n\n    return ordNumber.compare(aLen, bLen);\n  });\n}\n/**\n * Return a list of length `n` with element `i` initialized with `f(i)`\n *\n * @example\n * import { makeBy } from 'fp-ts/ReadonlyArray'\n *\n * const double = (n: number): number => n * 2\n * assert.deepStrictEqual(makeBy(5, double), [0, 2, 4, 6, 8])\n *\n * @category constructors\n * @since 2.5.0\n */\n\nexport function makeBy(n, f) {\n  // tslint:disable-next-line: readonly-array\n  var r = [];\n\n  for (var i = 0; i < n; i++) {\n    r.push(f(i));\n  }\n\n  return r;\n}\n/**\n * Create an array containing a range of integers, including both endpoints\n *\n * @example\n * import { range } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(range(1, 5), [1, 2, 3, 4, 5])\n *\n * @category constructors\n * @since 2.5.0\n */\n\nexport function range(start, end) {\n  return makeBy(end - start + 1, function (i) {\n    return start + i;\n  });\n}\n/**\n * Create an array containing a value repeated the specified number of times\n *\n * @example\n * import { replicate } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(replicate(3, 'a'), ['a', 'a', 'a'])\n *\n * @category constructors\n * @since 2.5.0\n */\n\nexport function replicate(n, a) {\n  return makeBy(n, function () {\n    return a;\n  });\n}\n/**\n * Removes one level of nesting\n *\n * Derivable from `Monad`.\n *\n * @example\n * import { flatten } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(flatten([[1], [2], [3]]), [1, 2, 3])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function flatten(mma) {\n  var rLen = 0;\n  var len = mma.length;\n\n  for (var i = 0; i < len; i++) {\n    rLen += mma[i].length;\n  }\n\n  var r = Array(rLen);\n  var start = 0;\n\n  for (var i = 0; i < len; i++) {\n    var arr = mma[i];\n    var l = arr.length;\n\n    for (var j = 0; j < l; j++) {\n      r[j + start] = arr[j];\n    }\n\n    start += l;\n  }\n\n  return r;\n}\n/**\n * Break an array into its first element and remaining elements\n *\n * @example\n * import { foldLeft } from 'fp-ts/ReadonlyArray'\n *\n * const len: <A>(as: ReadonlyArray<A>) => number = foldLeft(() => 0, (_, tail) => 1 + len(tail))\n * assert.strictEqual(len([1, 2, 3]), 3)\n *\n * @category destructors\n * @since 2.5.0\n */\n\nexport function foldLeft(onEmpty, onCons) {\n  return function (as) {\n    return isEmpty(as) ? onEmpty() : onCons(as[0], as.slice(1));\n  };\n}\n/**\n * Break an array into its initial elements and the last element\n *\n * @category destructors\n * @since 2.5.0\n */\n\nexport function foldRight(onEmpty, onCons) {\n  return function (as) {\n    return isEmpty(as) ? onEmpty() : onCons(as.slice(0, as.length - 1), as[as.length - 1]);\n  };\n}\n/**\n * Same as `reduce` but it carries over the intermediate steps\n *\n * @example\n * import { scanLeft } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(scanLeft(10, (b, a: number) => b - a)([1, 2, 3]), [10, 9, 7, 4])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function scanLeft(b, f) {\n  return function (as) {\n    var l = as.length; // tslint:disable-next-line: readonly-array\n\n    var r = new Array(l + 1);\n    r[0] = b;\n\n    for (var i = 0; i < l; i++) {\n      r[i + 1] = f(r[i], as[i]);\n    }\n\n    return r;\n  };\n}\n/**\n * Fold an array from the right, keeping all intermediate results instead of only the final result\n *\n * @example\n * import { scanRight } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(scanRight(10, (a: number, b) => b - a)([1, 2, 3]), [4, 5, 7, 10])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function scanRight(b, f) {\n  return function (as) {\n    var l = as.length; // tslint:disable-next-line: readonly-array\n\n    var r = new Array(l + 1);\n    r[l] = b;\n\n    for (var i = l - 1; i >= 0; i--) {\n      r[i] = f(as[i], r[i + 1]);\n    }\n\n    return r;\n  };\n}\n/**\n * Test whether an array is empty\n *\n * @example\n * import { isEmpty } from 'fp-ts/ReadonlyArray'\n *\n * assert.strictEqual(isEmpty([]), true)\n *\n * @since 2.5.0\n */\n\nexport function isEmpty(as) {\n  return as.length === 0;\n}\n/**\n * Test whether an array is non empty narrowing down the type to `NonEmptyReadonlyArray<A>`\n *\n * @category guards\n * @since 2.5.0\n */\n\nexport function isNonEmpty(as) {\n  return as.length > 0;\n}\n/**\n * Test whether an array contains a particular index\n *\n * @since 2.5.0\n */\n\nexport function isOutOfBound(i, as) {\n  return i < 0 || i >= as.length;\n}\nexport function lookup(i, as) {\n  return as === undefined ? function (as) {\n    return lookup(i, as);\n  } : isOutOfBound(i, as) ? O.none : O.some(as[i]);\n}\nexport function cons(head, tail) {\n  if (tail === undefined) {\n    return function (tail) {\n      return cons(head, tail);\n    };\n  }\n\n  var len = tail.length;\n  var r = Array(len + 1);\n\n  for (var i = 0; i < len; i++) {\n    r[i + 1] = tail[i];\n  }\n\n  r[0] = head;\n  return r;\n} // TODO: curry and make data-last in v3\n\n/**\n * Append an element to the end of an array, creating a new non empty array\n *\n * @example\n * import { snoc } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(snoc([1, 2, 3], 4), [1, 2, 3, 4])\n *\n * @category constructors\n * @since 2.5.0\n */\n\nexport function snoc(init, end) {\n  var len = init.length;\n  var r = Array(len + 1);\n\n  for (var i = 0; i < len; i++) {\n    r[i] = init[i];\n  }\n\n  r[len] = end;\n  return r;\n}\n/**\n * Get the first element in an array, or `None` if the array is empty\n *\n * @example\n * import { head } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(head([1, 2, 3]), some(1))\n * assert.deepStrictEqual(head([]), none)\n *\n * @since 2.5.0\n */\n\nexport function head(as) {\n  return isEmpty(as) ? O.none : O.some(as[0]);\n}\n/**\n * Get the last element in an array, or `None` if the array is empty\n *\n * @example\n * import { last } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(last([1, 2, 3]), some(3))\n * assert.deepStrictEqual(last([]), none)\n *\n * @since 2.5.0\n */\n\nexport function last(as) {\n  return lookup(as.length - 1, as);\n}\n/**\n * Get all but the first element of an array, creating a new array, or `None` if the array is empty\n *\n * @example\n * import { tail } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(tail([1, 2, 3]), some([2, 3]))\n * assert.deepStrictEqual(tail([]), none)\n *\n * @since 2.5.0\n */\n\nexport function tail(as) {\n  return isEmpty(as) ? O.none : O.some(as.slice(1));\n}\n/**\n * Get all but the last element of an array, creating a new array, or `None` if the array is empty\n *\n * @example\n * import { init } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(init([1, 2, 3]), some([1, 2]))\n * assert.deepStrictEqual(init([]), none)\n *\n * @since 2.5.0\n */\n\nexport function init(as) {\n  var len = as.length;\n  return len === 0 ? O.none : O.some(as.slice(0, len - 1));\n}\n/**\n * Keep only a number of elements from the start of an array, creating a new array.\n * `n` must be a natural number\n *\n * @example\n * import { takeLeft } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(takeLeft(2)([1, 2, 3]), [1, 2])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function takeLeft(n) {\n  return function (as) {\n    return as.slice(0, n);\n  };\n}\n/**\n * Keep only a number of elements from the end of an array, creating a new array.\n * `n` must be a natural number\n *\n * @example\n * import { takeRight } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(takeRight(2)([1, 2, 3, 4, 5]), [4, 5])\n *\n * @since 2.5.0\n */\n\nexport function takeRight(n) {\n  return function (as) {\n    return n === 0 ? empty : as.slice(-n);\n  };\n}\nexport function takeLeftWhile(predicate) {\n  return function (as) {\n    var i = spanIndexUncurry(as, predicate);\n    var init = Array(i);\n\n    for (var j = 0; j < i; j++) {\n      init[j] = as[j];\n    }\n\n    return init;\n  };\n}\n\nvar spanIndexUncurry = function spanIndexUncurry(as, predicate) {\n  var l = as.length;\n  var i = 0;\n\n  for (; i < l; i++) {\n    if (!predicate(as[i])) {\n      break;\n    }\n  }\n\n  return i;\n};\n\nexport function spanLeft(predicate) {\n  return function (as) {\n    var i = spanIndexUncurry(as, predicate);\n    var init = Array(i);\n\n    for (var j = 0; j < i; j++) {\n      init[j] = as[j];\n    }\n\n    var l = as.length;\n    var rest = Array(l - i);\n\n    for (var j = i; j < l; j++) {\n      rest[j - i] = as[j];\n    }\n\n    return {\n      init: init,\n      rest: rest\n    };\n  };\n}\n/**\n * Drop a number of elements from the start of an array, creating a new array\n *\n * @example\n * import { dropLeft } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(dropLeft(2)([1, 2, 3]), [3])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function dropLeft(n) {\n  return function (as) {\n    return as.slice(n, as.length);\n  };\n}\n/**\n * Drop a number of elements from the end of an array, creating a new array\n *\n * @example\n * import { dropRight } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(dropRight(2)([1, 2, 3, 4, 5]), [1, 2, 3])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function dropRight(n) {\n  return function (as) {\n    return as.slice(0, as.length - n);\n  };\n}\n/**\n * Remove the longest initial subarray for which all element satisfy the specified predicate, creating a new array\n *\n * @example\n * import { dropLeftWhile } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(dropLeftWhile((n: number) => n % 2 === 1)([1, 3, 2, 4, 5]), [2, 4, 5])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function dropLeftWhile(predicate) {\n  return function (as) {\n    var i = spanIndexUncurry(as, predicate);\n    var l = as.length;\n    var rest = Array(l - i);\n\n    for (var j = i; j < l; j++) {\n      rest[j - i] = as[j];\n    }\n\n    return rest;\n  };\n}\n/**\n * Find the first index for which a predicate holds\n *\n * @example\n * import { findIndex } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(findIndex((n: number) => n === 2)([1, 2, 3]), some(1))\n * assert.deepStrictEqual(findIndex((n: number) => n === 2)([]), none)\n *\n * @since 2.5.0\n */\n\nexport function findIndex(predicate) {\n  return function (as) {\n    var len = as.length;\n\n    for (var i = 0; i < len; i++) {\n      if (predicate(as[i])) {\n        return O.some(i);\n      }\n    }\n\n    return O.none;\n  };\n}\nexport function findFirst(predicate) {\n  return function (as) {\n    var len = as.length;\n\n    for (var i = 0; i < len; i++) {\n      if (predicate(as[i])) {\n        return O.some(as[i]);\n      }\n    }\n\n    return O.none;\n  };\n}\n/**\n * Find the first element returned by an option based selector function\n *\n * @example\n * import { findFirstMap } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * interface Person {\n *   name: string\n *   age?: number\n * }\n *\n * const persons: ReadonlyArray<Person> = [{ name: 'John' }, { name: 'Mary', age: 45 }, { name: 'Joey', age: 28 }]\n *\n * // returns the name of the first person that has an age\n * assert.deepStrictEqual(findFirstMap((p: Person) => (p.age === undefined ? none : some(p.name)))(persons), some('Mary'))\n *\n * @since 2.5.0\n */\n\nexport function findFirstMap(f) {\n  return function (as) {\n    var len = as.length;\n\n    for (var i = 0; i < len; i++) {\n      var v = f(as[i]);\n\n      if (O.isSome(v)) {\n        return v;\n      }\n    }\n\n    return O.none;\n  };\n}\nexport function findLast(predicate) {\n  return function (as) {\n    var len = as.length;\n\n    for (var i = len - 1; i >= 0; i--) {\n      if (predicate(as[i])) {\n        return O.some(as[i]);\n      }\n    }\n\n    return O.none;\n  };\n}\n/**\n * Find the last element returned by an option based selector function\n *\n * @example\n * import { findLastMap } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * interface Person {\n *   name: string\n *   age?: number\n * }\n *\n * const persons: ReadonlyArray<Person> = [{ name: 'John' }, { name: 'Mary', age: 45 }, { name: 'Joey', age: 28 }]\n *\n * // returns the name of the last person that has an age\n * assert.deepStrictEqual(findLastMap((p: Person) => (p.age === undefined ? none : some(p.name)))(persons), some('Joey'))\n *\n * @since 2.5.0\n */\n\nexport function findLastMap(f) {\n  return function (as) {\n    var len = as.length;\n\n    for (var i = len - 1; i >= 0; i--) {\n      var v = f(as[i]);\n\n      if (O.isSome(v)) {\n        return v;\n      }\n    }\n\n    return O.none;\n  };\n}\n/**\n * Returns the index of the last element of the list which matches the predicate\n *\n * @example\n * import { findLastIndex } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * interface X {\n *   a: number\n *   b: number\n * }\n * const xs: ReadonlyArray<X> = [{ a: 1, b: 0 }, { a: 1, b: 1 }]\n * assert.deepStrictEqual(findLastIndex((x: { a: number }) => x.a === 1)(xs), some(1))\n * assert.deepStrictEqual(findLastIndex((x: { a: number }) => x.a === 4)(xs), none)\n *\n *\n * @since 2.5.0\n */\n\nexport function findLastIndex(predicate) {\n  return function (as) {\n    var len = as.length;\n\n    for (var i = len - 1; i >= 0; i--) {\n      if (predicate(as[i])) {\n        return O.some(i);\n      }\n    }\n\n    return O.none;\n  };\n}\n/**\n * Insert an element at the specified index, creating a new array, or returning `None` if the index is out of bounds\n *\n * @example\n * import { insertAt } from 'fp-ts/ReadonlyArray'\n * import { some } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(insertAt(2, 5)([1, 2, 3, 4]), some([1, 2, 5, 3, 4]))\n *\n * @since 2.5.0\n */\n\nexport function insertAt(i, a) {\n  return function (as) {\n    return i < 0 || i > as.length ? O.none : O.some(unsafeInsertAt(i, a, as));\n  };\n}\n/**\n * Change the element at the specified index, creating a new array, or returning `None` if the index is out of bounds\n *\n * @example\n * import { updateAt } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(updateAt(1, 1)([1, 2, 3]), some([1, 1, 3]))\n * assert.deepStrictEqual(updateAt(1, 1)([]), none)\n *\n * @since 2.5.0\n */\n\nexport function updateAt(i, a) {\n  return function (as) {\n    return isOutOfBound(i, as) ? O.none : O.some(unsafeUpdateAt(i, a, as));\n  };\n}\n/**\n * Delete the element at the specified index, creating a new array, or returning `None` if the index is out of bounds\n *\n * @example\n * import { deleteAt } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(deleteAt(0)([1, 2, 3]), some([2, 3]))\n * assert.deepStrictEqual(deleteAt(1)([]), none)\n *\n * @since 2.5.0\n */\n\nexport function deleteAt(i) {\n  return function (as) {\n    return isOutOfBound(i, as) ? O.none : O.some(unsafeDeleteAt(i, as));\n  };\n}\n/**\n * Apply a function to the element at the specified index, creating a new array, or returning `None` if the index is out\n * of bounds\n *\n * @example\n * import { modifyAt } from 'fp-ts/ReadonlyArray'\n * import { some, none } from 'fp-ts/Option'\n *\n * const double = (x: number): number => x * 2\n * assert.deepStrictEqual(modifyAt(1, double)([1, 2, 3]), some([1, 4, 3]))\n * assert.deepStrictEqual(modifyAt(1, double)([]), none)\n *\n * @since 2.5.0\n */\n\nexport function modifyAt(i, f) {\n  return function (as) {\n    return isOutOfBound(i, as) ? O.none : O.some(unsafeUpdateAt(i, f(as[i]), as));\n  };\n}\n/**\n * Reverse an array, creating a new array\n *\n * @example\n * import { reverse } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(reverse([1, 2, 3]), [3, 2, 1])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function reverse(as) {\n  if (isEmpty(as)) {\n    return as;\n  }\n\n  return as.slice().reverse();\n}\n/**\n * Extracts from an array of `Either` all the `Right` elements. All the `Right` elements are extracted in order\n *\n * @example\n * import { rights } from 'fp-ts/ReadonlyArray'\n * import { right, left } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(rights([right(1), left('foo'), right(2)]), [1, 2])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function rights(as) {\n  // tslint:disable-next-line: readonly-array\n  var r = [];\n  var len = as.length;\n\n  for (var i = 0; i < len; i++) {\n    var a = as[i];\n\n    if (a._tag === 'Right') {\n      r.push(a.right);\n    }\n  }\n\n  return r;\n}\n/**\n * Extracts from an array of `Either` all the `Left` elements. All the `Left` elements are extracted in order\n *\n * @example\n * import { lefts } from 'fp-ts/ReadonlyArray'\n * import { left, right } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(lefts([right(1), left('foo'), right(2)]), ['foo'])\n *\n * @since 2.5.0\n */\n\nexport function lefts(as) {\n  // tslint:disable-next-line: readonly-array\n  var r = [];\n  var len = as.length;\n\n  for (var i = 0; i < len; i++) {\n    var a = as[i];\n\n    if (a._tag === 'Left') {\n      r.push(a.left);\n    }\n  }\n\n  return r;\n}\n/**\n * Sort the elements of an array in increasing order, creating a new array\n *\n * @example\n * import { sort } from 'fp-ts/ReadonlyArray'\n * import { ordNumber } from 'fp-ts/Ord'\n *\n * assert.deepStrictEqual(sort(ordNumber)([3, 2, 1]), [1, 2, 3])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport var sort = function sort(O) {\n  return function (as) {\n    return as.length <= 1 ? as : as.slice().sort(O.compare);\n  };\n}; // TODO: curry and make data-last in v3\n\n/**\n * Apply a function to pairs of elements at the same index in two arrays, collecting the results in a new array. If one\n * input array is short, excess elements of the longer array are discarded.\n *\n * @example\n * import { zipWith } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(zipWith([1, 2, 3], ['a', 'b', 'c', 'd'], (n, s) => s + n), ['a1', 'b2', 'c3'])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function zipWith(fa, fb, f) {\n  // tslint:disable-next-line: readonly-array\n  var fc = [];\n  var len = Math.min(fa.length, fb.length);\n\n  for (var i = 0; i < len; i++) {\n    fc[i] = f(fa[i], fb[i]);\n  }\n\n  return fc;\n}\nexport function zip(as, bs) {\n  if (bs === undefined) {\n    return function (bs) {\n      return zip(bs, as);\n    };\n  }\n\n  return zipWith(as, bs, function (a, b) {\n    return [a, b];\n  });\n}\n/**\n * The function is reverse of `zip`. Takes an array of pairs and return two corresponding arrays\n *\n * @example\n * import { unzip } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(unzip([[1, 'a'], [2, 'b'], [3, 'c']]), [[1, 2, 3], ['a', 'b', 'c']])\n *\n * @since 2.5.0\n */\n\nexport function unzip(as) {\n  // tslint:disable-next-line: readonly-array\n  var fa = []; // tslint:disable-next-line: readonly-array\n\n  var fb = [];\n\n  for (var i = 0; i < as.length; i++) {\n    fa[i] = as[i][0];\n    fb[i] = as[i][1];\n  }\n\n  return [fa, fb];\n}\n/**\n * Prepend an element to every member of an array\n *\n * @example\n * import { prependToAll } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(prependToAll(9)([1, 2, 3, 4]), [9, 1, 9, 2, 9, 3, 9, 4])\n *\n * @category combinators\n * @since 2.9.0\n */\n\nexport var prependToAll = function prependToAll(e) {\n  return function (xs) {\n    // tslint:disable-next-line: readonly-array\n    var ys = [];\n\n    for (var _i = 0, xs_1 = xs; _i < xs_1.length; _i++) {\n      var x = xs_1[_i];\n      ys.push(e, x);\n    }\n\n    return ys;\n  };\n};\n/**\n * Places an element in between members of an array\n *\n * @example\n * import { intersperse } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(intersperse(9)([1, 2, 3, 4]), [1, 9, 2, 9, 3, 9, 4])\n *\n * @category combinators\n * @since 2.9.0\n */\n\nexport function intersperse(e) {\n  return function (as) {\n    var length = as.length;\n\n    if (length === 0) {\n      return as;\n    }\n\n    return cons(as[0], prependToAll(e)(as.slice(1, as.length)));\n  };\n}\n/**\n * Rotate an array to the right by `n` steps\n *\n * @example\n * import { rotate } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(rotate(2)([1, 2, 3, 4, 5]), [4, 5, 1, 2, 3])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function rotate(n) {\n  return function (as) {\n    var len = as.length;\n\n    if (n === 0 || len <= 1 || len === Math.abs(n)) {\n      return as;\n    } else if (n < 0) {\n      return rotate(len + n)(as);\n    } else {\n      return as.slice(-n).concat(as.slice(0, len - n));\n    }\n  };\n}\nexport function elem(E) {\n  return function (a, as) {\n    if (as === undefined) {\n      var elemE_1 = elem(E);\n      return function (as) {\n        return elemE_1(a, as);\n      };\n    }\n\n    var predicate = function predicate(element) {\n      return E.equals(element, a);\n    };\n\n    var i = 0;\n    var len = as.length;\n\n    for (; i < len; i++) {\n      if (predicate(as[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n}\n/**\n * Remove duplicates from an array, keeping the first occurrence of an element.\n *\n * @example\n * import { uniq } from 'fp-ts/ReadonlyArray'\n * import { eqNumber } from 'fp-ts/Eq'\n *\n * assert.deepStrictEqual(uniq(eqNumber)([1, 2, 1]), [1, 2])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function uniq(E) {\n  var elemS = elem(E);\n  return function (as) {\n    var len = as.length;\n\n    if (len <= 1) {\n      return as;\n    } // tslint:disable-next-line: readonly-array\n\n\n    var r = [];\n    var i = 0;\n\n    for (; i < len; i++) {\n      var a = as[i];\n\n      if (!elemS(a, r)) {\n        r.push(a);\n      }\n    }\n\n    return len === r.length ? as : r;\n  };\n}\n/**\n * Sort the elements of an array in increasing order, where elements are compared using first `ords[0]`, then `ords[1]`,\n * etc...\n *\n * @example\n * import { sortBy } from 'fp-ts/ReadonlyArray'\n * import { ord, ordString, ordNumber } from 'fp-ts/Ord'\n *\n * interface Person {\n *   name: string\n *   age: number\n * }\n * const byName = ord.contramap(ordString, (p: Person) => p.name)\n * const byAge = ord.contramap(ordNumber, (p: Person) => p.age)\n *\n * const sortByNameByAge = sortBy([byName, byAge])\n *\n * const persons = [{ name: 'a', age: 1 }, { name: 'b', age: 3 }, { name: 'c', age: 2 }, { name: 'b', age: 2 }]\n * assert.deepStrictEqual(sortByNameByAge(persons), [\n *   { name: 'a', age: 1 },\n *   { name: 'b', age: 2 },\n *   { name: 'b', age: 3 },\n *   { name: 'c', age: 2 }\n * ])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport function sortBy(ords) {\n  var M = getOrdMonoid();\n  return sort(ords.reduce(M.concat, M.empty));\n}\n/**\n * A useful recursion pattern for processing an array to produce a new array, often used for \"chopping\" up the input\n * array. Typically chop is called with some function that will consume an initial prefix of the array and produce a\n * value and the rest of the array.\n *\n * @example\n * import { Eq, eqNumber } from 'fp-ts/Eq'\n * import { chop, spanLeft } from 'fp-ts/ReadonlyArray'\n *\n * const group = <A>(S: Eq<A>): ((as: ReadonlyArray<A>) => ReadonlyArray<ReadonlyArray<A>>) => {\n *   return chop(as => {\n *     const { init, rest } = spanLeft((a: A) => S.equals(a, as[0]))(as)\n *     return [init, rest]\n *   })\n * }\n * assert.deepStrictEqual(group(eqNumber)([1, 1, 2, 3, 3, 4]), [[1, 1], [2], [3, 3], [4]])\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport var chop = function chop(f) {\n  return function (as) {\n    // tslint:disable-next-line: readonly-array\n    var result = [];\n    var cs = as;\n\n    while (isNonEmpty(cs)) {\n      var _a = f(cs),\n          b = _a[0],\n          c = _a[1];\n\n      result.push(b);\n      cs = c;\n    }\n\n    return result;\n  };\n};\n/**\n * Splits an array into two pieces, the first piece has `n` elements.\n *\n * @example\n * import { splitAt } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(splitAt(2)([1, 2, 3, 4, 5]), [[1, 2], [3, 4, 5]])\n *\n * @since 2.5.0\n */\n\nexport function splitAt(n) {\n  return function (as) {\n    return [as.slice(0, n), as.slice(n)];\n  };\n}\n/**\n * Splits an array into length-`n` pieces. The last piece will be shorter if `n` does not evenly divide the length of\n * the array. Note that `chunksOf(n)([])` is `[]`, not `[[]]`. This is intentional, and is consistent with a recursive\n * definition of `chunksOf`; it satisfies the property that\n *\n * ```ts\n * chunksOf(n)(xs).concat(chunksOf(n)(ys)) == chunksOf(n)(xs.concat(ys)))\n * ```\n *\n * whenever `n` evenly divides the length of `xs`.\n *\n * @example\n * import { chunksOf } from 'fp-ts/ReadonlyArray'\n *\n * assert.deepStrictEqual(chunksOf(2)([1, 2, 3, 4, 5]), [[1, 2], [3, 4], [5]])\n *\n *\n * @since 2.5.0\n */\n\nexport function chunksOf(n) {\n  var f = chop(splitAt(n));\n  return function (as) {\n    return as.length === 0 ? empty : isOutOfBound(n - 1, as) ? [as] : f(as);\n  };\n}\nexport function comprehension(input, f, g) {\n  if (g === void 0) {\n    g = function g() {\n      return true;\n    };\n  }\n\n  var go = function go(scope, input) {\n    if (input.length === 0) {\n      return g.apply(void 0, scope) ? [f.apply(void 0, scope)] : empty;\n    } else {\n      return chain_(input[0], function (x) {\n        return go(snoc(scope, x), input.slice(1));\n      });\n    }\n  };\n\n  return go(empty, input);\n}\nexport function union(E) {\n  var elemE = elem(E);\n  return function (xs, ys) {\n    if (ys === undefined) {\n      var unionE_1 = union(E);\n      return function (ys) {\n        return unionE_1(ys, xs);\n      };\n    }\n\n    return concat(xs, ys.filter(function (a) {\n      return !elemE(a, xs);\n    }));\n  };\n}\nexport function intersection(E) {\n  var elemE = elem(E);\n  return function (xs, ys) {\n    if (ys === undefined) {\n      var intersectionE_1 = intersection(E);\n      return function (ys) {\n        return intersectionE_1(ys, xs);\n      };\n    }\n\n    return xs.filter(function (a) {\n      return elemE(a, ys);\n    });\n  };\n}\nexport function difference(E) {\n  var elemE = elem(E);\n  return function (xs, ys) {\n    if (ys === undefined) {\n      var differenceE_1 = difference(E);\n      return function (ys) {\n        return differenceE_1(ys, xs);\n      };\n    }\n\n    return xs.filter(function (a) {\n      return !elemE(a, ys);\n    });\n  };\n}\n/**\n * Wrap a value into the type constructor.\n *\n * @category Applicative\n * @since 2.5.0\n */\n\nexport var of = function of(a) {\n  return [a];\n};\n/**\n * @category Alternative\n * @since 2.7.0\n */\n\nexport var zero = function zero() {\n  return empty;\n}; // -------------------------------------------------------------------------------------\n// non-pipeables\n// -------------------------------------------------------------------------------------\n\nvar map_ = function map_(fa, f) {\n  return pipe(fa, map(f));\n};\n\nvar mapWithIndex_ = function mapWithIndex_(fa, f) {\n  return pipe(fa, mapWithIndex(f));\n};\n\nvar ap_ = function ap_(fab, fa) {\n  return pipe(fab, ap(fa));\n};\n\nvar chain_ = function chain_(ma, f) {\n  return pipe(ma, chain(f));\n};\n\nvar filter_ = function filter_(fa, predicate) {\n  return pipe(fa, filter(predicate));\n};\n\nvar filterMap_ = function filterMap_(fa, f) {\n  return pipe(fa, filterMap(f));\n};\n\nvar partitionWithIndex_ = function partitionWithIndex_(fa, predicateWithIndex) {\n  return pipe(fa, partitionWithIndex(predicateWithIndex));\n};\n\nvar partition_ = function partition_(fa, predicate) {\n  return pipe(fa, partition(predicate));\n};\n\nvar partitionMap_ = function partitionMap_(fa, f) {\n  return pipe(fa, partitionMap(f));\n};\n\nvar partitionMapWithIndex_ = function partitionMapWithIndex_(fa, f) {\n  return pipe(fa, partitionMapWithIndex(f));\n};\n\nvar alt_ = function alt_(fa, that) {\n  return pipe(fa, alt(that));\n};\n\nvar reduce_ = function reduce_(fa, b, f) {\n  return pipe(fa, reduce(b, f));\n};\n\nvar foldMap_ = function foldMap_(M) {\n  var foldMapM = foldMap(M);\n  return function (fa, f) {\n    return pipe(fa, foldMapM(f));\n  };\n};\n\nvar reduceRight_ = function reduceRight_(fa, b, f) {\n  return pipe(fa, reduceRight(b, f));\n};\n\nvar reduceWithIndex_ = function reduceWithIndex_(fa, b, f) {\n  var l = fa.length;\n  var r = b;\n\n  for (var i = 0; i < l; i++) {\n    r = f(i, r, fa[i]);\n  }\n\n  return r;\n};\n\nvar foldMapWithIndex_ = function foldMapWithIndex_(M) {\n  return function (fa, f) {\n    return fa.reduce(function (b, a, i) {\n      return M.concat(b, f(i, a));\n    }, M.empty);\n  };\n};\n\nvar reduceRightWithIndex_ = function reduceRightWithIndex_(fa, b, f) {\n  return pipe(fa, reduceRightWithIndex(b, f));\n};\n\nvar filterMapWithIndex_ = function filterMapWithIndex_(fa, f) {\n  return pipe(fa, filterMapWithIndex(f));\n};\n\nvar filterWithIndex_ = function filterWithIndex_(fa, predicateWithIndex) {\n  return pipe(fa, filterWithIndex(predicateWithIndex));\n};\n\nvar extend_ = function extend_(fa, f) {\n  return pipe(fa, extend(f));\n};\n\nvar traverse_ = function traverse_(F) {\n  var traverseF = traverse(F);\n  return function (ta, f) {\n    return pipe(ta, traverseF(f));\n  };\n};\n/* istanbul ignore next */\n\n\nvar traverseWithIndex_ = function traverseWithIndex_(F) {\n  var traverseWithIndexF = traverseWithIndex(F);\n  return function (ta, f) {\n    return pipe(ta, traverseWithIndexF(f));\n  };\n};\n/* istanbul ignore next */\n\n\nvar wither_ = function wither_(F) {\n  var witherF = wither(F);\n  return function (fa, f) {\n    return pipe(fa, witherF(f));\n  };\n};\n/* istanbul ignore next */\n\n\nvar wilt_ = function wilt_(F) {\n  var wiltF = wilt(F);\n  return function (fa, f) {\n    return pipe(fa, wiltF(f));\n  };\n}; // -------------------------------------------------------------------------------------\n// pipeables\n// -------------------------------------------------------------------------------------\n\n/**\n * Less strict version of [`alt`](#alt).\n *\n * @category Alt\n * @since 2.9.0\n */\n\n\nexport var altW = function altW(that) {\n  return function (fa) {\n    return concat(fa, that());\n  };\n};\n/**\n * Identifies an associative operation on a type constructor. It is similar to `Semigroup`, except that it applies to\n * types of kind `* -> *`.\n *\n * @category Alt\n * @since 2.5.0\n */\n\nexport var alt = altW;\n/**\n * Apply a function to an argument under a type constructor.\n *\n * @category Apply\n * @since 2.5.0\n */\n\nexport var ap = function ap(fa) {\n  return chain(function (f) {\n    return pipe(fa, map(f));\n  });\n};\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * Derivable from `Apply`.\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport var apFirst = function apFirst(fb) {\n  return flow(map(function (a) {\n    return function () {\n      return a;\n    };\n  }), ap(fb));\n};\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * Derivable from `Apply`.\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport var apSecond = function apSecond(fb) {\n  return flow(map(function () {\n    return function (b) {\n      return b;\n    };\n  }), ap(fb));\n};\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation.\n *\n * @category Monad\n * @since 2.5.0\n */\n\nexport var chain = function chain(f) {\n  return function (ma) {\n    return pipe(ma, chainWithIndex(function (_, a) {\n      return f(a);\n    }));\n  };\n};\n/**\n * @since 2.7.0\n */\n\nexport var chainWithIndex = function chainWithIndex(f) {\n  return function (ma) {\n    var outLen = 0;\n    var l = ma.length;\n    var temp = new Array(l);\n\n    for (var i = 0; i < l; i++) {\n      var e = ma[i];\n      var arr = f(i, e);\n      outLen += arr.length;\n      temp[i] = arr;\n    }\n\n    var out = Array(outLen);\n    var start = 0;\n\n    for (var i = 0; i < l; i++) {\n      var arr = temp[i];\n      var l_1 = arr.length;\n\n      for (var j = 0; j < l_1; j++) {\n        out[j + start] = arr[j];\n      }\n\n      start += l_1;\n    }\n\n    return out;\n  };\n};\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * Derivable from `Monad`.\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport var chainFirst = function chainFirst(f) {\n  return chain(function (a) {\n    return pipe(f(a), map(function () {\n      return a;\n    }));\n  });\n};\n/**\n * `map` can be used to turn functions `(a: A) => B` into functions `(fa: F<A>) => F<B>` whose argument and return types\n * use the type constructor `F` to represent some computational context.\n *\n * @category Functor\n * @since 2.5.0\n */\n\nexport var map = function map(f) {\n  return function (fa) {\n    return fa.map(function (a) {\n      return f(a);\n    });\n  };\n};\n/**\n * @category FunctorWithIndex\n * @since 2.5.0\n */\n\nexport var mapWithIndex = function mapWithIndex(f) {\n  return function (fa) {\n    return fa.map(function (a, i) {\n      return f(i, a);\n    });\n  };\n};\n/**\n * @category Compactable\n * @since 2.5.0\n */\n\nexport var separate = function separate(fa) {\n  // tslint:disable-next-line: readonly-array\n  var left = []; // tslint:disable-next-line: readonly-array\n\n  var right = [];\n\n  for (var _i = 0, fa_1 = fa; _i < fa_1.length; _i++) {\n    var e = fa_1[_i];\n\n    if (e._tag === 'Left') {\n      left.push(e.left);\n    } else {\n      right.push(e.right);\n    }\n  }\n\n  return {\n    left: left,\n    right: right\n  };\n};\n/**\n * @category Filterable\n * @since 2.5.0\n */\n\nexport var filter = function filter(predicate) {\n  return function (fa) {\n    return fa.filter(predicate);\n  };\n};\n/**\n * @category FilterableWithIndex\n * @since 2.5.0\n */\n\nexport var filterMapWithIndex = function filterMapWithIndex(f) {\n  return function (fa) {\n    // tslint:disable-next-line: readonly-array\n    var result = [];\n\n    for (var i = 0; i < fa.length; i++) {\n      var optionB = f(i, fa[i]);\n\n      if (O.isSome(optionB)) {\n        result.push(optionB.value);\n      }\n    }\n\n    return result;\n  };\n};\n/**\n * @category Filterable\n * @since 2.5.0\n */\n\nexport var filterMap = function filterMap(f) {\n  return filterMapWithIndex(function (_, a) {\n    return f(a);\n  });\n};\n/**\n * @category Compactable\n * @since 2.5.0\n */\n\nexport var compact =\n/*#__PURE__*/\nfilterMap(identity);\n/**\n * @category Filterable\n * @since 2.5.0\n */\n\nexport var partition = function partition(predicate) {\n  return partitionWithIndex(function (_, a) {\n    return predicate(a);\n  });\n};\n/**\n * @category FilterableWithIndex\n * @since 2.5.0\n */\n\nexport var partitionWithIndex = function partitionWithIndex(predicateWithIndex) {\n  return function (fa) {\n    // tslint:disable-next-line: readonly-array\n    var left = []; // tslint:disable-next-line: readonly-array\n\n    var right = [];\n\n    for (var i = 0; i < fa.length; i++) {\n      var a = fa[i];\n\n      if (predicateWithIndex(i, a)) {\n        right.push(a);\n      } else {\n        left.push(a);\n      }\n    }\n\n    return {\n      left: left,\n      right: right\n    };\n  };\n};\n/**\n * @category Filterable\n * @since 2.5.0\n */\n\nexport var partitionMap = function partitionMap(f) {\n  return partitionMapWithIndex(function (_, a) {\n    return f(a);\n  });\n};\n/**\n * @category FilterableWithIndex\n * @since 2.5.0\n */\n\nexport var partitionMapWithIndex = function partitionMapWithIndex(f) {\n  return function (fa) {\n    // tslint:disable-next-line: readonly-array\n    var left = []; // tslint:disable-next-line: readonly-array\n\n    var right = [];\n\n    for (var i = 0; i < fa.length; i++) {\n      var e = f(i, fa[i]);\n\n      if (e._tag === 'Left') {\n        left.push(e.left);\n      } else {\n        right.push(e.right);\n      }\n    }\n\n    return {\n      left: left,\n      right: right\n    };\n  };\n};\n/**\n * @category FilterableWithIndex\n * @since 2.5.0\n */\n\nexport var filterWithIndex = function filterWithIndex(predicateWithIndex) {\n  return function (fa) {\n    return fa.filter(function (a, i) {\n      return predicateWithIndex(i, a);\n    });\n  };\n};\n/**\n * @category Extend\n * @since 2.5.0\n */\n\nexport var extend = function extend(f) {\n  return function (wa) {\n    return wa.map(function (_, i, as) {\n      return f(as.slice(i));\n    });\n  };\n};\n/**\n * Derivable from `Extend`.\n *\n * @category combinators\n * @since 2.5.0\n */\n\nexport var duplicate =\n/*#__PURE__*/\nextend(identity);\n/**\n * @category FoldableWithIndex\n * @since 2.5.0\n */\n\nexport var foldMapWithIndex = function foldMapWithIndex(M) {\n  var foldMapWithIndexM = foldMapWithIndex_(M);\n  return function (f) {\n    return function (fa) {\n      return foldMapWithIndexM(fa, f);\n    };\n  };\n};\n/**\n * @category Foldable\n * @since 2.5.0\n */\n\nexport var reduce = function reduce(b, f) {\n  return reduceWithIndex(b, function (_, b, a) {\n    return f(b, a);\n  });\n};\n/**\n * @category Foldable\n * @since 2.5.0\n */\n\nexport var foldMap = function foldMap(M) {\n  var foldMapWithIndexM = foldMapWithIndex(M);\n  return function (f) {\n    return foldMapWithIndexM(function (_, a) {\n      return f(a);\n    });\n  };\n};\n/**\n * @category FoldableWithIndex\n * @since 2.5.0\n */\n\nexport var reduceWithIndex = function reduceWithIndex(b, f) {\n  return function (fa) {\n    return reduceWithIndex_(fa, b, f);\n  };\n};\n/**\n * @category Foldable\n * @since 2.5.0\n */\n\nexport var reduceRight = function reduceRight(b, f) {\n  return reduceRightWithIndex(b, function (_, a, b) {\n    return f(a, b);\n  });\n};\n/**\n * @category FoldableWithIndex\n * @since 2.5.0\n */\n\nexport var reduceRightWithIndex = function reduceRightWithIndex(b, f) {\n  return function (fa) {\n    return fa.reduceRight(function (b, a, i) {\n      return f(i, a, b);\n    }, b);\n  };\n};\n/**\n * **for optimized and stack safe version check the data types `traverseArray` function**\n * @category Traversable\n * @since 2.6.3\n */\n\nexport var traverse = function traverse(F) {\n  var traverseWithIndexF = traverseWithIndex(F);\n  return function (f) {\n    return traverseWithIndexF(function (_, a) {\n      return f(a);\n    });\n  };\n};\n/**\n * **for optimized and stack safe version check the data types `sequenceArray` function**\n * @category Traversable\n * @since 2.6.3\n */\n\nexport var sequence = function sequence(F) {\n  return function (ta) {\n    return reduce_(ta, F.of(zero()), function (fas, fa) {\n      return F.ap(F.map(fas, function (as) {\n        return function (a) {\n          return snoc(as, a);\n        };\n      }), fa);\n    });\n  };\n};\n/**\n * **for optimized and stack safe version check the data types `traverseArrayWithIndex` function**\n * @category TraversableWithIndex\n * @since 2.6.3\n */\n\nexport var traverseWithIndex = function traverseWithIndex(F) {\n  return function (f) {\n    return reduceWithIndex(F.of(zero()), function (i, fbs, a) {\n      return F.ap(F.map(fbs, function (bs) {\n        return function (b) {\n          return snoc(bs, b);\n        };\n      }), f(i, a));\n    });\n  };\n};\n/**\n * @category Witherable\n * @since 2.6.5\n */\n\nexport var wither = function wither(F) {\n  var traverseF = traverse(F);\n  return function (f) {\n    return function (fa) {\n      return F.map(pipe(fa, traverseF(f)), compact);\n    };\n  };\n};\n/**\n * @category Witherable\n * @since 2.6.5\n */\n\nexport var wilt = function wilt(F) {\n  var traverseF = traverse(F);\n  return function (f) {\n    return function (fa) {\n      return F.map(pipe(fa, traverseF(f)), separate);\n    };\n  };\n};\n/**\n * @category Unfoldable\n * @since 2.6.6\n */\n\nexport var unfold = function unfold(b, f) {\n  // tslint:disable-next-line: readonly-array\n  var ret = [];\n  var bb = b;\n\n  while (true) {\n    var mt = f(bb);\n\n    if (O.isSome(mt)) {\n      var _a = mt.value,\n          a = _a[0],\n          b_1 = _a[1];\n      ret.push(a);\n      bb = b_1;\n    } else {\n      break;\n    }\n  }\n\n  return ret;\n}; // -------------------------------------------------------------------------------------\n// instances\n// -------------------------------------------------------------------------------------\n\n/**\n * @category instances\n * @since 2.5.0\n */\n\nexport var URI = 'ReadonlyArray';\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Functor = {\n  URI: URI,\n  map: map_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var FunctorWithIndex = {\n  URI: URI,\n  map: map_,\n  mapWithIndex: mapWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Applicative = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Monad = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of,\n  chain: chain_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Unfoldable = {\n  URI: URI,\n  unfold: unfold\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Alt = {\n  URI: URI,\n  map: map_,\n  alt: alt_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Alternative = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of,\n  alt: alt_,\n  zero: zero\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Extend = {\n  URI: URI,\n  map: map_,\n  extend: extend_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Compactable = {\n  URI: URI,\n  compact: compact,\n  separate: separate\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Filterable = {\n  URI: URI,\n  map: map_,\n  compact: compact,\n  separate: separate,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var FilterableWithIndex = {\n  URI: URI,\n  map: map_,\n  mapWithIndex: mapWithIndex_,\n  compact: compact,\n  separate: separate,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_,\n  partitionMapWithIndex: partitionMapWithIndex_,\n  partitionWithIndex: partitionWithIndex_,\n  filterMapWithIndex: filterMapWithIndex_,\n  filterWithIndex: filterWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Foldable = {\n  URI: URI,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var FoldableWithIndex = {\n  URI: URI,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  reduceWithIndex: reduceWithIndex_,\n  foldMapWithIndex: foldMapWithIndex_,\n  reduceRightWithIndex: reduceRightWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Traversable = {\n  URI: URI,\n  map: map_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var TraversableWithIndex = {\n  URI: URI,\n  map: map_,\n  mapWithIndex: mapWithIndex_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  reduceWithIndex: reduceWithIndex_,\n  foldMapWithIndex: foldMapWithIndex_,\n  reduceRightWithIndex: reduceRightWithIndex_,\n  traverse: traverse_,\n  sequence: sequence,\n  traverseWithIndex: traverseWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Witherable = {\n  URI: URI,\n  map: map_,\n  compact: compact,\n  separate: separate,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence,\n  wither: wither_,\n  wilt: wilt_\n}; // TODO: remove in v3\n\n/**\n * @category instances\n * @since 2.5.0\n */\n\nexport var readonlyArray = {\n  URI: URI,\n  compact: compact,\n  separate: separate,\n  map: map_,\n  ap: ap_,\n  of: of,\n  chain: chain_,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_,\n  mapWithIndex: mapWithIndex_,\n  partitionMapWithIndex: partitionMapWithIndex_,\n  partitionWithIndex: partitionWithIndex_,\n  filterMapWithIndex: filterMapWithIndex_,\n  filterWithIndex: filterWithIndex_,\n  alt: alt_,\n  zero: zero,\n  unfold: unfold,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence,\n  reduceWithIndex: reduceWithIndex_,\n  foldMapWithIndex: foldMapWithIndex_,\n  reduceRightWithIndex: reduceRightWithIndex_,\n  traverseWithIndex: traverseWithIndex_,\n  extend: extend_,\n  wither: wither_,\n  wilt: wilt_\n}; // -------------------------------------------------------------------------------------\n// unsafe\n// -------------------------------------------------------------------------------------\n\n/**\n * @category unsafe\n * @since 2.5.0\n */\n\nexport function unsafeInsertAt(i, a, as) {\n  var xs = as.slice();\n  xs.splice(i, 0, a);\n  return xs;\n}\n/**\n * @category unsafe\n * @since 2.5.0\n */\n\nexport function unsafeUpdateAt(i, a, as) {\n  if (as[i] === a) {\n    return as;\n  } else {\n    var xs = as.slice();\n    xs[i] = a;\n    return xs;\n  }\n}\n/**\n * @category unsafe\n * @since 2.5.0\n */\n\nexport function unsafeDeleteAt(i, as) {\n  var xs = as.slice();\n  xs.splice(i, 1);\n  return xs;\n} // -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n\n/**\n * An empty array\n *\n * @since 2.5.0\n */\n\nexport var empty = [];\n/**\n * Check if a predicate holds true for every array member.\n *\n * @example\n * import { every } from 'fp-ts/ReadonlyArray'\n * import { pipe } from 'fp-ts/function'\n *\n * const isPositive = (n: number): boolean => n > 0\n *\n * assert.deepStrictEqual(pipe([1, 2, 3], every(isPositive)), true)\n * assert.deepStrictEqual(pipe([1, 2, -3], every(isPositive)), false)\n *\n * @since 2.9.0\n */\n\nexport var every = function every(predicate) {\n  return function (as) {\n    return as.every(predicate);\n  };\n};\n/**\n * Check if a predicate holds true for any array member.\n *\n * @example\n * import { some } from 'fp-ts/ReadonlyArray'\n * import { pipe } from 'fp-ts/function'\n *\n * const isPositive = (n: number): boolean => n > 0\n *\n * assert.deepStrictEqual(pipe([-1, -2, 3], some(isPositive)), true)\n * assert.deepStrictEqual(pipe([-1, -2, -3], some(isPositive)), false)\n *\n * @since 2.9.0\n */\n\nexport var some = function some(predicate) {\n  return function (as) {\n    return as.some(predicate);\n  };\n}; // -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n\n/**\n * @since 2.9.0\n */\n\nexport var Do =\n/*#__PURE__*/\nof({});\n/**\n * @since 2.8.0\n */\n\nexport var bindTo = function bindTo(name) {\n  return map(bindTo_(name));\n};\n/**\n * @since 2.8.0\n */\n\nexport var bind = function bind(name, f) {\n  return chain(function (a) {\n    return pipe(f(a), map(function (b) {\n      return bind_(a, name, b);\n    }));\n  });\n}; // -------------------------------------------------------------------------------------\n// pipeable sequence S\n// -------------------------------------------------------------------------------------\n\n/**\n * @since 2.8.0\n */\n\nexport var apS = function apS(name, fb) {\n  return flow(map(function (a) {\n    return function (b) {\n      return bind_(a, name, b);\n    };\n  }), ap(fb));\n};","import * as RA from './ReadonlyArray'; // -------------------------------------------------------------------------------------\n// model\n// -------------------------------------------------------------------------------------\n\n/* tslint:disable:readonly-array */\n\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport var getShow = RA.getShow;\n/**\n * Returns a `Monoid` for `Array<A>`\n *\n * @example\n * import { getMonoid } from 'fp-ts/Array'\n *\n * const M = getMonoid<number>()\n * assert.deepStrictEqual(M.concat([1, 2], [3, 4]), [1, 2, 3, 4])\n *\n * @category instances\n * @since 2.0.0\n */\n\nexport var getMonoid = RA.getMonoid;\n/**\n * Derives an `Eq` over the `Array` of a given element type from the `Eq` of that type. The derived `Eq` defines two\n * arrays as equal if all elements of both arrays are compared equal pairwise with the given `E`. In case of arrays of\n * different lengths, the result is non equality.\n *\n * @example\n * import { eqString } from 'fp-ts/Eq'\n * import { getEq } from 'fp-ts/Array'\n *\n * const E = getEq(eqString)\n * assert.strictEqual(E.equals(['a', 'b'], ['a', 'b']), true)\n * assert.strictEqual(E.equals(['a'], []), false)\n *\n * @category instances\n * @since 2.0.0\n */\n\nexport var getEq = RA.getEq;\n/**\n * Derives an `Ord` over the `Array` of a given element type from the `Ord` of that type. The ordering between two such\n * arrays is equal to: the first non equal comparison of each arrays elements taken pairwise in increasing order, in\n * case of equality over all the pairwise elements; the longest array is considered the greatest, if both arrays have\n * the same length, the result is equality.\n *\n * @example\n * import { getOrd } from 'fp-ts/Array'\n * import { ordString } from 'fp-ts/Ord'\n *\n * const O = getOrd(ordString)\n * assert.strictEqual(O.compare(['b'], ['a']), 1)\n * assert.strictEqual(O.compare(['a'], ['a']), 0)\n * assert.strictEqual(O.compare(['a'], ['b']), -1)\n *\n * @category instances\n * @since 2.0.0\n */\n\nexport var getOrd = RA.getOrd; // -------------------------------------------------------------------------------------\n// constructors\n// -------------------------------------------------------------------------------------\n\n/**\n * Return a list of length `n` with element `i` initialized with `f(i)`\n *\n * @example\n * import { makeBy } from 'fp-ts/Array'\n *\n * const double = (n: number): number => n * 2\n * assert.deepStrictEqual(makeBy(5, double), [0, 2, 4, 6, 8])\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var makeBy = RA.makeBy;\n/**\n * Create an array containing a range of integers, including both endpoints\n *\n * @example\n * import { range } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(range(1, 5), [1, 2, 3, 4, 5])\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var range = RA.range;\n/**\n * Create an array containing a value repeated the specified number of times\n *\n * @example\n * import { replicate } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(replicate(3, 'a'), ['a', 'a', 'a'])\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var replicate = RA.replicate;\n/**\n * Removes one level of nesting.\n *\n * Derivable from `Monad`.\n *\n * @example\n * import { flatten } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(flatten([[1], [2], [3]]), [1, 2, 3])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var flatten = RA.flatten;\n/**\n * Break an array into its first element and remaining elements\n *\n * @example\n * import { foldLeft } from 'fp-ts/Array'\n *\n * const len: <A>(as: Array<A>) => number = foldLeft(() => 0, (_, tail) => 1 + len(tail))\n * assert.strictEqual(len([1, 2, 3]), 3)\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var foldLeft = RA.foldLeft;\n/**\n * Break an array into its initial elements and the last element\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var foldRight = RA.foldRight;\n/**\n * Same as `reduce` but it carries over the intermediate steps\n *\n * @example\n * import { scanLeft } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(scanLeft(10, (b, a: number) => b - a)([1, 2, 3]), [10, 9, 7, 4])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var scanLeft = RA.scanLeft;\n/**\n * Fold an array from the right, keeping all intermediate results instead of only the final result\n *\n * @example\n * import { scanRight } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(scanRight(10, (a: number, b) => b - a)([1, 2, 3]), [4, 5, 7, 10])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var scanRight = RA.scanRight;\n/**\n * Test whether an array is empty\n *\n * @example\n * import { isEmpty } from 'fp-ts/Array'\n *\n * assert.strictEqual(isEmpty([]), true)\n *\n * @since 2.0.0\n */\n\nexport var isEmpty = RA.isEmpty;\n/**\n * Test whether an array is non empty narrowing down the type to `NonEmptyArray<A>`\n *\n * @category guards\n * @since 2.0.0\n */\n\nexport var isNonEmpty = RA.isNonEmpty;\n/**\n * Test whether an array contains a particular index\n *\n * @since 2.0.0\n */\n\nexport var isOutOfBound = RA.isOutOfBound; // TODO: remove non-curried overloading in v3\n\n/**\n * This function provides a safe way to read a value at a particular index from an array\n *\n * @example\n * import { lookup } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(pipe([1, 2, 3], lookup(1)), some(2))\n * assert.deepStrictEqual(pipe([1, 2, 3], lookup(3)), none)\n *\n * @since 2.0.0\n */\n\nexport var lookup = RA.lookup; // TODO: remove non-curried overloading in v3\n\n/**\n * Attaches an element to the front of an array, creating a new non empty array\n *\n * @example\n * import { cons } from 'fp-ts/Array'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(pipe([1, 2, 3], cons(0)), [0, 1, 2, 3])\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var cons = RA.cons; // TODO: curry in v3\n\n/**\n * Append an element to the end of an array, creating a new non empty array\n *\n * @example\n * import { snoc } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(snoc([1, 2, 3], 4), [1, 2, 3, 4])\n *\n * @category constructors\n * @since 2.0.0\n */\n\nexport var snoc = RA.snoc;\n/**\n * Get the first element in an array, or `None` if the array is empty\n *\n * @example\n * import { head } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(head([1, 2, 3]), some(1))\n * assert.deepStrictEqual(head([]), none)\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var head = RA.head;\n/**\n * Get the last element in an array, or `None` if the array is empty\n *\n * @example\n * import { last } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(last([1, 2, 3]), some(3))\n * assert.deepStrictEqual(last([]), none)\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var last = RA.last;\n/**\n * Get all but the first element of an array, creating a new array, or `None` if the array is empty\n *\n * @example\n * import { tail } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(tail([1, 2, 3]), some([2, 3]))\n * assert.deepStrictEqual(tail([]), none)\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var tail = RA.tail;\n/**\n * Get all but the last element of an array, creating a new array, or `None` if the array is empty\n *\n * @example\n * import { init } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(init([1, 2, 3]), some([1, 2]))\n * assert.deepStrictEqual(init([]), none)\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var init = RA.init;\n/**\n * Keep only a number of elements from the start of an array, creating a new array.\n * `n` must be a natural number\n *\n * @example\n * import { takeLeft } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(takeLeft(2)([1, 2, 3]), [1, 2])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var takeLeft = RA.takeLeft;\n/**\n * Keep only a number of elements from the end of an array, creating a new array.\n * `n` must be a natural number\n *\n * @example\n * import { takeRight } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(takeRight(2)([1, 2, 3, 4, 5]), [4, 5])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var takeRight = RA.takeRight;\nexport function takeLeftWhile(predicate) {\n  return RA.takeLeftWhile(predicate);\n}\nexport function spanLeft(predicate) {\n  return RA.spanLeft(predicate);\n}\n/* tslint:enable:readonly-keyword */\n\n/**\n * Drop a number of elements from the start of an array, creating a new array\n *\n * @example\n * import { dropLeft } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(dropLeft(2)([1, 2, 3]), [3])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var dropLeft = RA.dropLeft;\n/**\n * Drop a number of elements from the end of an array, creating a new array\n *\n * @example\n * import { dropRight } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(dropRight(2)([1, 2, 3, 4, 5]), [1, 2, 3])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var dropRight = RA.dropRight;\n/**\n * Remove the longest initial subarray for which all element satisfy the specified predicate, creating a new array\n *\n * @example\n * import { dropLeftWhile } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(dropLeftWhile((n: number) => n % 2 === 1)([1, 3, 2, 4, 5]), [2, 4, 5])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var dropLeftWhile = RA.dropLeftWhile;\n/**\n * Find the first index for which a predicate holds\n *\n * @example\n * import { findIndex } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(findIndex((n: number) => n === 2)([1, 2, 3]), some(1))\n * assert.deepStrictEqual(findIndex((n: number) => n === 2)([]), none)\n *\n * @since 2.0.0\n */\n\nexport var findIndex = RA.findIndex;\nexport function findFirst(predicate) {\n  return RA.findFirst(predicate);\n}\n/**\n * Find the first element returned by an option based selector function\n *\n * @example\n * import { findFirstMap } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * interface Person {\n *   name: string\n *   age?: number\n * }\n *\n * const persons: Array<Person> = [{ name: 'John' }, { name: 'Mary', age: 45 }, { name: 'Joey', age: 28 }]\n *\n * // returns the name of the first person that has an age\n * assert.deepStrictEqual(findFirstMap((p: Person) => (p.age === undefined ? none : some(p.name)))(persons), some('Mary'))\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var findFirstMap = RA.findFirstMap;\nexport function findLast(predicate) {\n  return RA.findLast(predicate);\n}\n/**\n * Find the last element returned by an option based selector function\n *\n * @example\n * import { findLastMap } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * interface Person {\n *   name: string\n *   age?: number\n * }\n *\n * const persons: Array<Person> = [{ name: 'John' }, { name: 'Mary', age: 45 }, { name: 'Joey', age: 28 }]\n *\n * // returns the name of the last person that has an age\n * assert.deepStrictEqual(findLastMap((p: Person) => (p.age === undefined ? none : some(p.name)))(persons), some('Joey'))\n *\n * @category destructors\n * @since 2.0.0\n */\n\nexport var findLastMap = RA.findLastMap;\n/**\n * Returns the index of the last element of the list which matches the predicate\n *\n * @example\n * import { findLastIndex } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * interface X {\n *   a: number\n *   b: number\n * }\n * const xs: Array<X> = [{ a: 1, b: 0 }, { a: 1, b: 1 }]\n * assert.deepStrictEqual(findLastIndex((x: { a: number }) => x.a === 1)(xs), some(1))\n * assert.deepStrictEqual(findLastIndex((x: { a: number }) => x.a === 4)(xs), none)\n *\n *\n * @since 2.0.0\n */\n\nexport var findLastIndex = RA.findLastIndex;\n/**\n * @category combinators\n * @since 2.0.0\n */\n\nexport var copy = RA.toArray;\n/**\n * Insert an element at the specified index, creating a new array, or returning `None` if the index is out of bounds\n *\n * @example\n * import { insertAt } from 'fp-ts/Array'\n * import { some } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(insertAt(2, 5)([1, 2, 3, 4]), some([1, 2, 5, 3, 4]))\n *\n * @since 2.0.0\n */\n\nexport var insertAt = RA.insertAt;\n/**\n * Change the element at the specified index, creating a new array, or returning `None` if the index is out of bounds\n *\n * @example\n * import { updateAt } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(updateAt(1, 1)([1, 2, 3]), some([1, 1, 3]))\n * assert.deepStrictEqual(updateAt(1, 1)([]), none)\n *\n * @since 2.0.0\n */\n\nexport var updateAt = RA.updateAt;\n/**\n * Delete the element at the specified index, creating a new array, or returning `None` if the index is out of bounds\n *\n * @example\n * import { deleteAt } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * assert.deepStrictEqual(deleteAt(0)([1, 2, 3]), some([2, 3]))\n * assert.deepStrictEqual(deleteAt(1)([]), none)\n *\n * @since 2.0.0\n */\n\nexport var deleteAt = RA.deleteAt;\n/**\n * Apply a function to the element at the specified index, creating a new array, or returning `None` if the index is out\n * of bounds\n *\n * @example\n * import { modifyAt } from 'fp-ts/Array'\n * import { some, none } from 'fp-ts/Option'\n *\n * const double = (x: number): number => x * 2\n * assert.deepStrictEqual(modifyAt(1, double)([1, 2, 3]), some([1, 4, 3]))\n * assert.deepStrictEqual(modifyAt(1, double)([]), none)\n *\n * @since 2.0.0\n */\n\nexport var modifyAt = RA.modifyAt;\n/**\n * Reverse an array, creating a new array\n *\n * @example\n * import { reverse } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(reverse([1, 2, 3]), [3, 2, 1])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var reverse = RA.reverse;\n/**\n * Extracts from an array of `Either` all the `Right` elements. All the `Right` elements are extracted in order\n *\n * @example\n * import { rights } from 'fp-ts/Array'\n * import { right, left } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(rights([right(1), left('foo'), right(2)]), [1, 2])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var rights = RA.rights;\n/**\n * Extracts from an array of `Either` all the `Left` elements. All the `Left` elements are extracted in order\n *\n * @example\n * import { lefts } from 'fp-ts/Array'\n * import { left, right } from 'fp-ts/Either'\n *\n * assert.deepStrictEqual(lefts([right(1), left('foo'), right(2)]), ['foo'])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var lefts = RA.lefts;\n/**\n * Sort the elements of an array in increasing order, creating a new array\n *\n * @example\n * import { sort } from 'fp-ts/Array'\n * import { ordNumber } from 'fp-ts/Ord'\n *\n * assert.deepStrictEqual(sort(ordNumber)([3, 2, 1]), [1, 2, 3])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var sort = RA.sort;\n/**\n * Apply a function to pairs of elements at the same index in two arrays, collecting the results in a new array. If one\n * input array is short, excess elements of the longer array are discarded.\n *\n * @example\n * import { zipWith } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(zipWith([1, 2, 3], ['a', 'b', 'c', 'd'], (n, s) => s + n), ['a1', 'b2', 'c3'])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var zipWith = RA.zipWith; // TODO: remove non-curried overloading in v3\n\n/**\n * Takes two arrays and returns an array of corresponding pairs. If one input array is short, excess elements of the\n * longer array are discarded\n *\n * @example\n * import { zip } from 'fp-ts/Array'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(pipe([1, 2, 3], zip(['a', 'b', 'c', 'd'])), [[1, 'a'], [2, 'b'], [3, 'c']])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var zip = RA.zip;\n/**\n * The function is reverse of `zip`. Takes an array of pairs and return two corresponding arrays\n *\n * @example\n * import { unzip } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(unzip([[1, 'a'], [2, 'b'], [3, 'c']]), [[1, 2, 3], ['a', 'b', 'c']])\n *\n * @since 2.0.0\n */\n\nexport var unzip = RA.unzip;\n/**\n * Prepend an element to every member of an array\n *\n * @example\n * import { prependToAll } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(prependToAll(9)([1, 2, 3, 4]), [9, 1, 9, 2, 9, 3, 9, 4])\n *\n * @category combinators\n * @since 2.9.0\n */\n\nexport var prependToAll = RA.prependToAll;\n/**\n * Places an element in between members of an array\n *\n * @example\n * import { intersperse } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(intersperse(9)([1, 2, 3, 4]), [1, 9, 2, 9, 3, 9, 4])\n *\n * @category combinators\n * @since 2.9.0\n */\n\nexport var intersperse = RA.intersperse;\n/**\n * Rotate an array to the right by `n` steps\n *\n * @example\n * import { rotate } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(rotate(2)([1, 2, 3, 4, 5]), [4, 5, 1, 2, 3])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var rotate = RA.rotate; // TODO: remove non-curried overloading in v3\n\n/**\n * Test if a value is a member of an array. Takes a `Eq<A>` as a single\n * argument which returns the function to use to search for a value of type `A` in\n * an array of type `Array<A>`.\n *\n * @example\n * import { elem } from 'fp-ts/Array'\n * import { eqNumber } from 'fp-ts/Eq'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.strictEqual(pipe([1, 2, 3], elem(eqNumber)(2)), true)\n * assert.strictEqual(pipe([1, 2, 3], elem(eqNumber)(0)), false)\n *\n * @since 2.0.0\n */\n\nexport var elem = RA.elem;\n/**\n * Remove duplicates from an array, keeping the first occurrence of an element.\n *\n * @example\n * import { uniq } from 'fp-ts/Array'\n * import { eqNumber } from 'fp-ts/Eq'\n *\n * assert.deepStrictEqual(uniq(eqNumber)([1, 2, 1]), [1, 2])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var uniq = RA.uniq;\n/**\n * Sort the elements of an array in increasing order, where elements are compared using first `ords[0]`, then `ords[1]`,\n * etc...\n *\n * @example\n * import { sortBy } from 'fp-ts/Array'\n * import { ord, ordString, ordNumber } from 'fp-ts/Ord'\n *\n * interface Person {\n *   name: string\n *   age: number\n * }\n * const byName = ord.contramap(ordString, (p: Person) => p.name)\n * const byAge = ord.contramap(ordNumber, (p: Person) => p.age)\n *\n * const sortByNameByAge = sortBy([byName, byAge])\n *\n * const persons = [{ name: 'a', age: 1 }, { name: 'b', age: 3 }, { name: 'c', age: 2 }, { name: 'b', age: 2 }]\n * assert.deepStrictEqual(sortByNameByAge(persons), [\n *   { name: 'a', age: 1 },\n *   { name: 'b', age: 2 },\n *   { name: 'b', age: 3 },\n *   { name: 'c', age: 2 }\n * ])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var sortBy = RA.sortBy;\n/**\n * A useful recursion pattern for processing an array to produce a new array, often used for \"chopping\" up the input\n * array. Typically chop is called with some function that will consume an initial prefix of the array and produce a\n * value and the rest of the array.\n *\n * @example\n * import { Eq, eqNumber } from 'fp-ts/Eq'\n * import { chop, spanLeft } from 'fp-ts/Array'\n *\n * const group = <A>(S: Eq<A>): ((as: Array<A>) => Array<Array<A>>) => {\n *   return chop(as => {\n *     const { init, rest } = spanLeft((a: A) => S.equals(a, as[0]))(as)\n *     return [init, rest]\n *   })\n * }\n * assert.deepStrictEqual(group(eqNumber)([1, 1, 2, 3, 3, 4]), [[1, 1], [2], [3, 3], [4]])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var chop = RA.chop;\n/**\n * Splits an array into two pieces, the first piece has `n` elements.\n *\n * @example\n * import { splitAt } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(splitAt(2)([1, 2, 3, 4, 5]), [[1, 2], [3, 4, 5]])\n *\n * @since 2.0.0\n */\n\nexport var splitAt = RA.splitAt;\n/**\n * Splits an array into length-`n` pieces. The last piece will be shorter if `n` does not evenly divide the length of\n * the array. Note that `chunksOf(n)([])` is `[]`, not `[[]]`. This is intentional, and is consistent with a recursive\n * definition of `chunksOf`; it satisfies the property that\n *\n * ```ts\n * chunksOf(n)(xs).concat(chunksOf(n)(ys)) == chunksOf(n)(xs.concat(ys)))\n * ```\n *\n * whenever `n` evenly divides the length of `xs`.\n *\n * @example\n * import { chunksOf } from 'fp-ts/Array'\n *\n * assert.deepStrictEqual(chunksOf(2)([1, 2, 3, 4, 5]), [[1, 2], [3, 4], [5]])\n *\n * @since 2.0.0\n */\n\nexport var chunksOf = RA.chunksOf;\nexport function comprehension(input, f, g) {\n  if (g === void 0) {\n    g = function g() {\n      return true;\n    };\n  }\n\n  return RA.comprehension(input, f, g);\n} // TODO: remove non-curried overloading in v3\n\n/**\n * Creates an array of unique values, in order, from all given arrays using a `Eq` for equality comparisons\n *\n * @example\n * import { union } from 'fp-ts/Array'\n * import { eqNumber } from 'fp-ts/Eq'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(pipe([1, 2], union(eqNumber)([2, 3])), [1, 2, 3])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var union = RA.union; // TODO: remove non-curried overloading in v3\n\n/**\n * Creates an array of unique values that are included in all given arrays using a `Eq` for equality\n * comparisons. The order and references of result values are determined by the first array.\n *\n * @example\n * import { intersection } from 'fp-ts/Array'\n * import { eqNumber } from 'fp-ts/Eq'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(pipe([1, 2], intersection(eqNumber)([2, 3])), [2])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var intersection = RA.intersection; // TODO: remove non-curried overloading in v3\n\n/**\n * Creates an array of array values not included in the other given array using a `Eq` for equality\n * comparisons. The order and references of result values are determined by the first array.\n *\n * @example\n * import { difference } from 'fp-ts/Array'\n * import { eqNumber } from 'fp-ts/Eq'\n * import { pipe } from 'fp-ts/function'\n *\n * assert.deepStrictEqual(pipe([1, 2], difference(eqNumber)([2, 3])), [1])\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var difference = RA.difference;\n/**\n * Wrap a value into the type constructor.\n *\n * @category Applicative\n * @since 2.0.0\n */\n\nexport var of = RA.of; // -------------------------------------------------------------------------------------\n// non-pipeables\n// -------------------------------------------------------------------------------------\n\nvar map_ = RA.Monad.map;\nvar ap_ = RA.Monad.ap;\nvar chain_ = RA.Monad.chain;\nvar mapWithIndex_ = RA.FunctorWithIndex.mapWithIndex;\nvar filter_ = RA.Filterable.filter;\nvar filterMap_ = RA.Filterable.filterMap;\nvar partition_ = RA.Filterable.partition;\nvar partitionMap_ = RA.Filterable.partitionMap;\nvar filterWithIndex_ = RA.FilterableWithIndex.filterWithIndex;\nvar filterMapWithIndex_ = RA.FilterableWithIndex.filterMapWithIndex;\nvar partitionWithIndex_ = RA.FilterableWithIndex.partitionWithIndex;\nvar partitionMapWithIndex_ = RA.FilterableWithIndex.partitionMapWithIndex;\nvar reduce_ = RA.Foldable.reduce;\nvar foldMap_ = RA.Foldable.foldMap;\nvar reduceRight_ = RA.Foldable.reduceRight;\nvar traverse_ = RA.Traversable.traverse;\nvar alt_ = RA.Alternative.alt;\nvar reduceWithIndex_ = RA.FoldableWithIndex.reduceWithIndex;\nvar foldMapWithIndex_ = RA.FoldableWithIndex.foldMapWithIndex;\nvar reduceRightWithIndex_ = RA.FoldableWithIndex.reduceRightWithIndex;\nvar traverseWithIndex_ = RA.TraversableWithIndex.traverseWithIndex;\nvar extend_ = RA.Extend.extend;\nvar wither_ = RA.Witherable.wither;\nvar wilt_ = RA.Witherable.wilt; // -------------------------------------------------------------------------------------\n// pipeables\n// -------------------------------------------------------------------------------------\n\n/**\n * `map` can be used to turn functions `(a: A) => B` into functions `(fa: F<A>) => F<B>` whose argument and return types\n * use the type constructor `F` to represent some computational context.\n *\n * @category Functor\n * @since 2.0.0\n */\n\nexport var map = RA.map;\n/**\n * Apply a function to an argument under a type constructor.\n *\n * @category Apply\n * @since 2.0.0\n */\n\nexport var ap = RA.ap;\n/**\n * Combine two effectful actions, keeping only the result of the first.\n *\n * Derivable from `Apply`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var apFirst = RA.apFirst;\n/**\n * Combine two effectful actions, keeping only the result of the second.\n *\n * Derivable from `Apply`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var apSecond = RA.apSecond;\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation.\n *\n * @category Monad\n * @since 2.0.0\n */\n\nexport var chain = RA.chain;\n/**\n * @since 2.7.0\n */\n\nexport var chainWithIndex = RA.chainWithIndex;\n/**\n * Composes computations in sequence, using the return value of one computation to determine the next computation and\n * keeping only the result of the first.\n *\n * Derivable from `Monad`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var chainFirst = RA.chainFirst;\n/**\n * @category FunctorWithIndex\n * @since 2.0.0\n */\n\nexport var mapWithIndex = RA.mapWithIndex;\n/**\n * @category Compactable\n * @since 2.0.0\n */\n\nexport var compact = RA.compact;\n/**\n * @category Compactable\n * @since 2.0.0\n */\n\nexport var separate = RA.separate;\n/**\n * @category Filterable\n * @since 2.0.0\n */\n\nexport var filter = RA.filter;\n/**\n * @category Filterable\n * @since 2.0.0\n */\n\nexport var filterMap = RA.filterMap;\n/**\n * @category Filterable\n * @since 2.0.0\n */\n\nexport var partition = RA.partition;\n/**\n * @category FilterableWithIndex\n * @since 2.0.0\n */\n\nexport var partitionWithIndex = RA.partitionWithIndex;\n/**\n * @category Filterable\n * @since 2.0.0\n */\n\nexport var partitionMap = RA.partitionMap;\n/**\n * @category FilterableWithIndex\n * @since 2.0.0\n */\n\nexport var partitionMapWithIndex = RA.partitionMapWithIndex;\n/**\n * Less strict version of [`alt`](#alt).\n *\n * @category Alt\n * @since 2.9.0\n */\n\nexport var altW = RA.altW;\n/**\n * Identifies an associative operation on a type constructor. It is similar to `Semigroup`, except that it applies to\n * types of kind `* -> *`.\n *\n * @category Alt\n * @since 2.0.0\n */\n\nexport var alt = RA.alt;\n/**\n * @category FilterableWithIndex\n * @since 2.0.0\n */\n\nexport var filterMapWithIndex = RA.filterMapWithIndex;\n/**\n * @category FilterableWithIndex\n * @since 2.0.0\n */\n\nexport var filterWithIndex = RA.filterWithIndex;\n/**\n * @category Extend\n * @since 2.0.0\n */\n\nexport var extend = RA.extend;\n/**\n * Derivable from `Extend`.\n *\n * @category combinators\n * @since 2.0.0\n */\n\nexport var duplicate = RA.duplicate;\n/**\n * @category Foldable\n * @since 2.0.0\n */\n\nexport var foldMap = RA.foldMap;\n/**\n * @category FoldableWithIndex\n * @since 2.0.0\n */\n\nexport var foldMapWithIndex = RA.foldMapWithIndex;\n/**\n * @category Foldable\n * @since 2.0.0\n */\n\nexport var reduce = RA.reduce;\n/**\n * @category FoldableWithIndex\n * @since 2.0.0\n */\n\nexport var reduceWithIndex = RA.reduceWithIndex;\n/**\n * @category Foldable\n * @since 2.0.0\n */\n\nexport var reduceRight = RA.reduceRight;\n/**\n * @category FoldableWithIndex\n * @since 2.0.0\n */\n\nexport var reduceRightWithIndex = RA.reduceRightWithIndex;\n/**\n * **for optimized and stack safe version check the data types `traverseArray` function**\n * @category Traversable\n * @since 2.6.3\n */\n\nexport var traverse = RA.traverse;\n/**\n * **for optimized and stack safe version check the data types `sequenceArray` function**\n * @category Traversable\n * @since 2.6.3\n */\n\nexport var sequence = RA.sequence;\n/**\n * **for optimized and stack safe version check the data types `traverseArrayWithIndex` function**\n * @category TraversableWithIndex\n * @since 2.6.3\n */\n\nexport var traverseWithIndex = RA.traverseWithIndex;\n/**\n * @category Witherable\n * @since 2.6.5\n */\n\nexport var wither = RA.wither;\n/**\n * @category Witherable\n * @since 2.6.5\n */\n\nexport var wilt = RA.wilt;\n/**\n * @category Unfoldable\n * @since 2.6.6\n */\n\nexport var unfold = RA.unfold;\n/**\n * @category Alternative\n * @since 2.7.0\n */\n\nexport var zero = RA.Alternative.zero; // -------------------------------------------------------------------------------------\n// instances\n// -------------------------------------------------------------------------------------\n\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport var URI = 'Array';\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Functor = {\n  URI: URI,\n  map: map_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var FunctorWithIndex = {\n  URI: URI,\n  map: map_,\n  mapWithIndex: mapWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Applicative = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Monad = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of,\n  chain: chain_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Unfoldable = {\n  URI: URI,\n  unfold: unfold\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Alt = {\n  URI: URI,\n  map: map_,\n  alt: alt_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Alternative = {\n  URI: URI,\n  map: map_,\n  ap: ap_,\n  of: of,\n  alt: alt_,\n  zero: zero\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Extend = {\n  URI: URI,\n  map: map_,\n  extend: extend_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Compactable = {\n  URI: URI,\n  compact: compact,\n  separate: separate\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Filterable = {\n  URI: URI,\n  map: map_,\n  compact: compact,\n  separate: separate,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var FilterableWithIndex = {\n  URI: URI,\n  map: map_,\n  mapWithIndex: mapWithIndex_,\n  compact: compact,\n  separate: separate,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_,\n  partitionMapWithIndex: partitionMapWithIndex_,\n  partitionWithIndex: partitionWithIndex_,\n  filterMapWithIndex: filterMapWithIndex_,\n  filterWithIndex: filterWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Foldable = {\n  URI: URI,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var FoldableWithIndex = {\n  URI: URI,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  reduceWithIndex: reduceWithIndex_,\n  foldMapWithIndex: foldMapWithIndex_,\n  reduceRightWithIndex: reduceRightWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Traversable = {\n  URI: URI,\n  map: map_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var TraversableWithIndex = {\n  URI: URI,\n  map: map_,\n  mapWithIndex: mapWithIndex_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  reduceWithIndex: reduceWithIndex_,\n  foldMapWithIndex: foldMapWithIndex_,\n  reduceRightWithIndex: reduceRightWithIndex_,\n  traverse: traverse_,\n  sequence: sequence,\n  traverseWithIndex: traverseWithIndex_\n};\n/**\n * @category instances\n * @since 2.7.0\n */\n\nexport var Witherable = {\n  URI: URI,\n  map: map_,\n  compact: compact,\n  separate: separate,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence,\n  wither: wither_,\n  wilt: wilt_\n}; // TODO: remove in v3\n\n/**\n * @category instances\n * @since 2.0.0\n */\n\nexport var array = {\n  URI: URI,\n  compact: compact,\n  separate: separate,\n  map: map_,\n  ap: ap_,\n  of: of,\n  chain: chain_,\n  filter: filter_,\n  filterMap: filterMap_,\n  partition: partition_,\n  partitionMap: partitionMap_,\n  mapWithIndex: mapWithIndex_,\n  partitionMapWithIndex: partitionMapWithIndex_,\n  partitionWithIndex: partitionWithIndex_,\n  filterMapWithIndex: filterMapWithIndex_,\n  filterWithIndex: filterWithIndex_,\n  alt: alt_,\n  zero: zero,\n  unfold: unfold,\n  reduce: reduce_,\n  foldMap: foldMap_,\n  reduceRight: reduceRight_,\n  traverse: traverse_,\n  sequence: sequence,\n  reduceWithIndex: reduceWithIndex_,\n  foldMapWithIndex: foldMapWithIndex_,\n  reduceRightWithIndex: reduceRightWithIndex_,\n  traverseWithIndex: traverseWithIndex_,\n  extend: extend_,\n  wither: wither_,\n  wilt: wilt_\n}; // -------------------------------------------------------------------------------------\n// unsafe\n// -------------------------------------------------------------------------------------\n\n/**\n * @category unsafe\n * @since 2.0.0\n */\n\nexport var unsafeInsertAt = RA.unsafeInsertAt;\n/**\n * @category unsafe\n * @since 2.0.0\n */\n\nexport var unsafeUpdateAt = RA.unsafeUpdateAt;\n/**\n * @category unsafe\n * @since 2.0.0\n */\n\nexport var unsafeDeleteAt = RA.unsafeDeleteAt; // -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n\n/**\n * An empty array\n *\n * @since 2.0.0\n */\n\nexport var empty = [];\n/**\n * @since 2.9.0\n */\n\nexport var every = RA.every;\n/**\n * @since 2.9.0\n */\n\nexport var some = RA.some; // -------------------------------------------------------------------------------------\n// do notation\n// -------------------------------------------------------------------------------------\n\n/**\n * @since 2.9.0\n */\n\nexport var Do =\n/*#__PURE__*/\nof({});\n/**\n * @since 2.8.0\n */\n\nexport var bindTo = RA.bindTo;\n/**\n * @since 2.8.0\n */\n\nexport var bind = RA.bind; // -------------------------------------------------------------------------------------\n// pipeable sequence S\n// -------------------------------------------------------------------------------------\n\n/**\n * @since 2.8.0\n */\n\nexport var apS = RA.apS;","// Mark <canvas>, <input> and <textarea> elements with\n// unique id's so that their state can be later copied into\n// a clone\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport { zip } from 'fp-ts/es6/Array';\nvar PICO_CLONE_ID_KEY = 'picocloneid';\n\nvar id = function id() {\n  return Math.random().toString(32).substring(2);\n};\n\nfunction isHTMLElement(element) {\n  return element instanceof HTMLElement;\n}\n\nfunction isHTMLOrSVGElement(element) {\n  return element instanceof HTMLElement || element instanceof SVGElement;\n}\n\nvar defaultNaN = function defaultNaN(defaultTo) {\n  return function (value) {\n    return isNaN(value) ? defaultTo : value;\n  };\n}; // Even though this function uses `querySelectorAll('*')` it's relatively\n// fast - on a page with 25k nodes (youtube) it executes in 10-15ms\n\n\nvar getScrolledElements = function getScrolledElements($target) {\n  return Array.from($target.querySelectorAll('*')).filter(function ($el) {\n    return $el.scrollTop !== 0 || $el.scrollLeft !== 0;\n  }).filter(isHTMLElement);\n};\n\nvar attachCloneID = function attachCloneID($target) {\n  var e_1, _a;\n\n  try {\n    for (var _b = __values(__spread($target.querySelectorAll('input'), $target.querySelectorAll('textarea'), $target.querySelectorAll('canvas'), getScrolledElements($target))), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var $element = _c.value;\n      $element.dataset[PICO_CLONE_ID_KEY] = id();\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n};\n\nvar removeCloneID = function removeCloneID($target) {\n  var e_2, _a;\n\n  try {\n    for (var _b = __values($target.querySelectorAll(\"[data-\" + PICO_CLONE_ID_KEY + \"]\")), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var $element = _c.value;\n\n      if (!($element instanceof HTMLElement)) {\n        console.warn('Element that had a pico clone id attached was not an HTMLElement during cleanup', $element);\n        continue;\n      }\n\n      $element.removeAttribute(\"data-\" + PICO_CLONE_ID_KEY);\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n};\n\nvar cloneCanvases = function cloneCanvases(container) {\n  var e_3, _a;\n\n  var _loop_1 = function _loop_1($clonedCanvas) {\n    var cloneId = $clonedCanvas.dataset[PICO_CLONE_ID_KEY];\n\n    if (cloneId === undefined) {\n      console.warn('Failed to get clone id from cloned canvas', $clonedCanvas);\n      return \"continue\";\n    }\n\n    var $originalCanvas = Array.from(container.parentWindow.document.querySelectorAll('canvas')).find(function ($original) {\n      return $original.dataset[PICO_CLONE_ID_KEY] === cloneId;\n    });\n\n    if ($originalCanvas === undefined) {\n      console.warn('Failed to find original canvas for cloned canvas', $clonedCanvas);\n      return \"continue\";\n    }\n\n    var $replacementImg = container.parentWindow.document.createElement('img'); // Since we're changing the element's name the \"canvas\"\n    // will be untargetable by css, therefore we need to\n    // clone all the style properties over manually in this\n    // particular case.\n\n    $replacementImg.style.cssText = container.parentWindow.window.getComputedStyle($originalCanvas).cssText;\n    $replacementImg.src = $originalCanvas.toDataURL();\n    var parent_1 = $clonedCanvas.parentNode;\n\n    if (!parent_1) {\n      console.warn('Failed to get parent of node', $clonedCanvas);\n      return \"continue\";\n    }\n\n    parent_1.replaceChild($replacementImg, $clonedCanvas);\n  };\n\n  try {\n    for (var _b = __values(container.tree.html.querySelectorAll('canvas')), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var $clonedCanvas = _c.value;\n\n      _loop_1($clonedCanvas);\n    }\n  } catch (e_3_1) {\n    e_3 = {\n      error: e_3_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_3) throw e_3.error;\n    }\n  }\n\n  return container;\n}; // Input values set by JS don't get copied when performing a recursive\n// `Node.cloneNode`, we need to set the attributes ourselves.\n\n\nvar cloneInputs = function cloneInputs(container) {\n  var e_4, _a;\n\n  var _loop_2 = function _loop_2($clonedInputOrTextarea) {\n    var cloneId = $clonedInputOrTextarea.dataset[PICO_CLONE_ID_KEY];\n\n    if (cloneId === undefined) {\n      console.warn('Failed to get clone id from cloned input or textarea', $clonedInputOrTextarea);\n      return \"continue\";\n    }\n\n    var $originalInputOrTextarea = __spread(container.parentWindow.document.querySelectorAll('input'), container.parentWindow.document.querySelectorAll('textarea')).find(function ($original) {\n      return $original.dataset[PICO_CLONE_ID_KEY] === cloneId;\n    });\n\n    if ($originalInputOrTextarea === undefined) {\n      console.warn('Failed to find original input or textarea for cloned input or textarea', $clonedInputOrTextarea);\n      return \"continue\";\n    }\n\n    if ($originalInputOrTextarea instanceof HTMLInputElement && $clonedInputOrTextarea instanceof HTMLInputElement) {\n      if (($clonedInputOrTextarea.type === 'checkbox' || $clonedInputOrTextarea.type === 'radio') && $originalInputOrTextarea.checked) {\n        // <input type=\"checkbox | radio\" />\n        $clonedInputOrTextarea.setAttribute('checked', 'checked');\n      } else if ( // <input type=\"number | text | range\" />\n      ['number', 'text', 'range'].indexOf($clonedInputOrTextarea.type) !== -1) {\n        $clonedInputOrTextarea.setAttribute('value', $originalInputOrTextarea.value);\n      }\n    } else if ($originalInputOrTextarea instanceof HTMLTextAreaElement && $clonedInputOrTextarea instanceof HTMLTextAreaElement) {\n      // <textarea>\n      var contents = container.parentWindow.document.createTextNode($originalInputOrTextarea.value);\n      $clonedInputOrTextarea.innerHTML = '';\n      $clonedInputOrTextarea.appendChild(contents);\n    }\n  };\n\n  try {\n    for (var _b = __values(__spread(container.tree.html.querySelectorAll('input'), container.tree.html.querySelectorAll('textarea'))), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var $clonedInputOrTextarea = _c.value;\n\n      _loop_2($clonedInputOrTextarea);\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return container;\n};\n\nvar cloneElementScroll = function cloneElementScroll(container, $clone) {\n  var e_5, _a;\n\n  var cloneId = $clone.dataset[PICO_CLONE_ID_KEY];\n\n  if (cloneId === undefined) {\n    console.warn('Failed to get clone id from cloned scrolled element', $clone);\n    return;\n  }\n\n  var $original = container.parentWindow.document.querySelector(\"[data-\" + PICO_CLONE_ID_KEY + \" = \\\"\" + cloneId + \"\\\"]\");\n\n  if (!($original instanceof HTMLElement)) {\n    console.warn('Failed to find original element for scrolled element', $clone);\n    return;\n  }\n\n  $clone.style.position = $clone.style.position === 'absolute' ? 'absolute' : 'relative';\n  $clone.style.overflow = 'hidden';\n  $clone.style.width = $original.offsetWidth + 'px';\n  $clone.style.height = $original.offsetHeight + 'px';\n  var $clonedChildren = Array.from($clone.children).filter(isHTMLOrSVGElement);\n  var $originalChildren = Array.from($original.children).filter(isHTMLOrSVGElement);\n\n  if ($clonedChildren.length !== $originalChildren.length) {\n    console.warn('Scrolled element has a different amount of children ' + 'than its clone, skipping scroll emulation', $original);\n    return;\n  }\n\n  var $$zippedChildren = zip($originalChildren, $clonedChildren);\n  var scrollTopRemaining = $original.scrollTop;\n  var scrollLeftRemaining = $original.scrollLeft;\n  var lastChild;\n\n  try {\n    for (var $$zippedChildren_1 = __values($$zippedChildren), $$zippedChildren_1_1 = $$zippedChildren_1.next(); !$$zippedChildren_1_1.done; $$zippedChildren_1_1 = $$zippedChildren_1.next()) {\n      var _b = __read($$zippedChildren_1_1.value, 2),\n          $originalChild = _b[0],\n          $clonedChild = _b[1];\n\n      var originalChildStyles = container.parentWindow.window.getComputedStyle($originalChild); // Handle absolutely positioned children\n\n      if (container.parentWindow.window.getComputedStyle($original).position === 'relative' && originalChildStyles.position === 'absolute') {\n        $clonedChild.style.top = defaultNaN(0)(parseInt(originalChildStyles.top)) - $original.scrollTop + 'px';\n        $clonedChild.style.left = defaultNaN(0)(parseInt(originalChildStyles.left)) - $original.scrollLeft + 'px'; // Since all relative children are now absolute, increment z-index\n        // of all previously absolute children by 1 so that they're\n        // still visible over\n\n        $clonedChild.style.zIndex = (defaultNaN(0)(parseInt(originalChildStyles.zIndex)) + 1).toString();\n        continue;\n      }\n\n      $clonedChild.style.position = 'absolute';\n      $clonedChild.style.width = originalChildStyles.width;\n      $clonedChild.style.height = originalChildStyles.height;\n\n      if (typeof lastChild !== 'undefined') {\n        var lastChildBoundingRect = lastChild.getBoundingClientRect();\n        scrollTopRemaining -= $originalChild.getBoundingClientRect().top - lastChildBoundingRect.top;\n        scrollLeftRemaining -= $originalChild.getBoundingClientRect().left - lastChildBoundingRect.left;\n      }\n\n      $clonedChild.style.top = -scrollTopRemaining + 'px';\n      $clonedChild.style.left = -scrollLeftRemaining + 'px';\n      lastChild = $originalChild; // const cloneChildBoundingRect = $originalChild.getBoundingClientRect()\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if ($$zippedChildren_1_1 && !$$zippedChildren_1_1.done && (_a = $$zippedChildren_1.return)) _a.call($$zippedChildren_1);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n};\n\nvar cloneScrolls = function cloneScrolls(container) {\n  var e_6, _a;\n\n  try {\n    for (var _b = __values(getScrolledElements(container.parentWindow.html)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var $original = _c.value;\n      var cloneId = $original.dataset[PICO_CLONE_ID_KEY];\n\n      if (cloneId === undefined) {\n        console.warn('Failed to get clone id from scrolled element', $original);\n        continue;\n      }\n\n      var $cloned = container.tree.html.querySelector(\"[data-\" + PICO_CLONE_ID_KEY + \" = \\\"\" + cloneId + \"\\\"]\");\n\n      if (!($cloned instanceof HTMLElement)) {\n        console.warn('Failed to find cloned element for original scrolled element', $original);\n        continue;\n      }\n\n      cloneElementScroll(container, $cloned);\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  } // The above code doesn't process <html> scroll since it usually gets\n  // special treatment in browsers, a simple `translate` will do\n\n\n  container.tree.html.style.transform += \" translate(-\" + container.parentWindow.html.scrollLeft + \"px, -\" + container.parentWindow.html.scrollTop + \"px)\";\n  return container;\n};\n\nvar removeNodesMatchingSelectors = function removeNodesMatchingSelectors(selectors) {\n  return function ($node) {\n    if ($node instanceof Element) {\n      selectors.forEach(function (selector) {\n        var e_7, _a;\n\n        try {\n          for (var _b = __values($node.querySelectorAll(selector)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var $child = _c.value;\n            $child.remove();\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      });\n    }\n  };\n}; // (ugly)\n\n\nexport var cloneBody = function cloneBody(ignoredSelectors) {\n  return function (container) {\n    attachCloneID(container.parentWindow.html);\n    container.tree.html.className = container.parentWindow.html.className;\n    container.tree.html.style.cssText = container.parentWindow.html.style.cssText; // Fix for `rem` units\n\n    container.tree.svg.style.fontSize = container.parentWindow.window.getComputedStyle(container.parentWindow.html).fontSize;\n    var $clonedBody = container.parentWindow.body.cloneNode(true);\n    removeNodesMatchingSelectors(ignoredSelectors)($clonedBody);\n    container.tree.html.appendChild($clonedBody);\n    cloneInputs(container);\n    cloneCanvases(container);\n    cloneScrolls(container);\n\n    if ($clonedBody instanceof HTMLBodyElement) {\n      container.tree.html.style.margin = '0';\n    }\n\n    removeCloneID(container.parentWindow.html);\n    return container;\n  };\n};","var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nexport var svgNS = 'http://www.w3.org/2000/svg';\nexport var xhtmlNS = 'http://www.w3.org/1999/xhtml';\nexport var createSVGElement = function createSVGElement($document) {\n  return function (tagName, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var $el = $document.createElementNS(svgNS, tagName);\n    Object.entries(options).forEach(function (_a) {\n      var _b = __read(_a, 2),\n          key = _b[0],\n          value = _b[1];\n\n      return $el.setAttribute(key, value);\n    });\n    return $el;\n  };\n};\nexport var createElement = function createElement($document) {\n  return function (tagName, properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var $el = $document.createElement(tagName);\n    Object.assign($el, properties);\n    return $el;\n  };\n};","export var err = function err(reason) {\n  return {\n    reason: reason,\n    error: new Error(reason)\n  };\n};","import { map as mapEither } from 'fp-ts/es6/Either';\nimport { pipe } from 'fp-ts/es6/pipeable';\nimport { createElement, createSVGElement, xhtmlNS } from './element';\nimport { getWindowInfo } from './window-info';\n\nvar getBackgroundColor = function getBackgroundColor($window, $element) {\n  var backgroundColor = $window.getComputedStyle($element).backgroundColor;\n  return backgroundColor === 'transparent' || backgroundColor === 'rgba(0, 0, 0, 0)' ? 'white' : backgroundColor;\n};\n\nexport var createTree = function createTree(windowInfo) {\n  var _a = windowInfo.window,\n      width = _a.innerWidth,\n      height = _a.innerHeight;\n  var h = createElement(windowInfo.document);\n  var s = createSVGElement(windowInfo.document);\n  var $iframe = h('iframe', {\n    width: width + 'px',\n    height: height + 'px'\n  });\n  var $svg = s('svg', {\n    width: width + 'px',\n    height: height + 'px'\n  });\n  $svg.style.backgroundColor = getBackgroundColor(windowInfo.window, windowInfo.body);\n  var $foreignObject = s('foreignObject', {\n    x: '0',\n    y: '0',\n    width: width + 'px',\n    height: height + 'px'\n  });\n  var $newHtml = h('html');\n  $newHtml.setAttribute('xmlns', xhtmlNS);\n  var $newHead = h('head');\n  $newHtml.appendChild($newHead);\n  $newHtml.appendChild($newHead);\n  $foreignObject.appendChild($newHtml);\n  $svg.appendChild($foreignObject);\n  $iframe.appendChild($svg);\n  return {\n    html: $newHtml,\n    head: $newHead,\n    svg: $svg\n  };\n};\nexport var createContainer = function createContainer($window) {\n  return pipe(getWindowInfo($window), mapEither(function (parentWindow) {\n    return {\n      parentWindow: parentWindow,\n      tree: createTree(parentWindow)\n    };\n  }));\n};","import { left, right } from 'fp-ts/es6/Either';\nimport { err } from './error';\nexport var getWindowInfo = function getWindowInfo($window) {\n  var $document = $window.document;\n  var $head = $document.head;\n  var $body = $document.body;\n  var $html = $document.querySelector('html');\n\n  if (!($html instanceof HTMLHtmlElement)) {\n    return left(err('Failed to get HTMLHtmlElement'));\n  }\n\n  if (!($body instanceof HTMLBodyElement)) {\n    return left(err('Failed to get HTMLBodyElement'));\n  } // const $canvas = $document.createElement('canvas')\n  // const ctx = $canvas.getContext('2d')\n  // const $iframe = $document.createElement('iframe')\n  // const $svg = $document.createElementNS(svgNS, 'svg')\n\n\n  return right({\n    window: $window,\n    document: $document,\n    html: $html,\n    head: $head,\n    body: $body\n  });\n};","import { flatten, lefts, map, reduce } from 'fp-ts/es6/Array';\nimport { pipe } from 'fp-ts/es6/pipeable';\nvar ErrorStack$ = Symbol();\nexport var empty = function empty(value) {\n  return {\n    _tag: ErrorStack$,\n    errors: [],\n    value: value\n  };\n};\nexport var fromEithers = function fromEithers(value) {\n  return function (eithers) {\n    return {\n      _tag: ErrorStack$,\n      errors: lefts(eithers),\n      value: value\n    };\n  };\n};\nexport var fromError = function fromError(value) {\n  return function (error) {\n    return fromErrors(value)([error]);\n  };\n};\nexport var fromErrors = function fromErrors(value) {\n  return function (errors) {\n    return {\n      _tag: ErrorStack$,\n      errors: errors,\n      value: value\n    };\n  };\n};\nexport var concat = function concat(stack, error) {\n  return {\n    _tag: ErrorStack$,\n    errors: stack.errors.concat(error),\n    value: stack.value\n  };\n};\nexport var fold = function fold(foldValueFn, initValue) {\n  return function (stacks) {\n    return {\n      _tag: ErrorStack$,\n      errors: pipe(stacks, map(function (s) {\n        return s.errors;\n      }), flatten),\n      value: pipe(stacks, map(function (s) {\n        return s.value;\n      }), reduce(initValue, foldValueFn))\n    };\n  };\n};\nexport var value = function value(stack) {\n  return stack.value;\n};\nexport var errors = function errors(stack) {\n  return stack.errors;\n};","export var noop = function noop() {};","import { Future, chain as chainFluture, reject } from 'fluture';\nimport { fromEither as flutureFromEither } from 'fp-ts-fluture/es6/Future';\nimport { left, right } from 'fp-ts/es6/Either';\nimport { flow } from 'fp-ts/es6/function';\nimport { pipe } from 'fp-ts/es6/pipeable';\nimport { createElement } from './element';\nimport { err } from './error';\nimport { timeout } from './future';\nimport { noop } from './noop';\n\nvar serializeSVGToDataURL = function serializeSVGToDataURL($svg) {\n  return 'data:image/svg+xml;charset=utf-8,' + window.encodeURIComponent(new XMLSerializer().serializeToString($svg));\n};\n\nvar canvasToPngBlob = function canvasToPngBlob($canvas) {\n  return Future(function (rej, res) {\n    try {\n      $canvas.toBlob(function (maybeBlob) {\n        if (maybeBlob === null) {\n          return rej(err('Failed to get blob from canvas ' + '(the returned blob is null)'));\n        }\n\n        res(maybeBlob);\n      }, 'image/png', 1);\n    } catch (_a) {\n      rej(err('Failed to get blob from canvas ' + '(the canvas is most likely tainted)'));\n    }\n\n    return noop;\n  });\n};\n\nvar canvasToPngDataURL = function canvasToPngDataURL($canvas) {\n  try {\n    return right($canvas.toDataURL('image/png', 1));\n  } catch (_a) {\n    return left(err('Failed to get data url from canvas ' + '(the canvas is most likely tainted)'));\n  }\n};\n\nexport var containerToCanvas = function containerToCanvas(container) {\n  var scalingRatio = container.parentWindow.window.devicePixelRatio || 1;\n  var $canvas = createElement(container.parentWindow.document)('canvas', {\n    width: container.parentWindow.window.innerWidth * scalingRatio,\n    height: container.parentWindow.window.innerHeight * scalingRatio\n  });\n  var ctx = $canvas.getContext('2d');\n\n  if (ctx === null) {\n    return reject(err('Failed to obtain 2d canvas context'));\n  }\n\n  return timeout(2000)(Future(function (rej, res) {\n    var $img = new Image();\n\n    $img.onerror = function () {\n      return rej(err(\"Failed to load exported <img> onto canvas\"));\n    };\n\n    $img.onload = function () {\n      ctx.setTransform(scalingRatio, 0, 0, scalingRatio, 0, 0);\n      ctx.drawImage($img, 0, 0);\n      res($canvas);\n    };\n\n    $img.src = serializeSVGToDataURL(container.tree.svg);\n    return $img.remove;\n  }));\n};\n\nvar dataURLToBlob = function dataURLToBlob(dataURL) {\n  return Future(function (rej, res) {\n    fetch(dataURL).then(function (x) {\n      return x.blob();\n    }).then(res).catch(function () {\n      return rej(err(\"Failed to convert dataURL to blob (\" + dataURL + \")\"));\n    });\n    return noop;\n  });\n};\n\nexport var containerToSVGBlob = function containerToSVGBlob(container) {\n  return pipe(serializeSVGToDataURL(container.tree.svg), dataURLToBlob);\n};\nexport var containerToPngBlob = function containerToPngBlob(container) {\n  return pipe(containerToCanvas(container), chainFluture(canvasToPngBlob));\n};\nexport var containerToPngDataURL = function containerToPngDataURL(container) {\n  return pipe(containerToCanvas(container), chainFluture(flow(canvasToPngDataURL, flutureFromEither)));\n}; // Type safe wrapper for URL.createObjectURL. Also because this\n// function creates a reference in a global object URL store,\n// this function is technically impure.\n\nexport var createObjectURL = function createObjectURL(object) {\n  try {\n    return right(URL.createObjectURL(object));\n  } catch (_a) {\n    return left(err('Failed to create result object URL'));\n  }\n};","import { Future, race } from 'fluture';\nimport { err } from './error';\nexport var timeout = function timeout(ms) {\n  return function (fl) {\n    return race(Future(function (rej) {\n      var timeout = setTimeout(function () {\n        return rej(err(\"Timed out waiting for promise (\" + ms + \"ms)\"));\n      }, ms);\n      return function () {\n        return clearTimeout(timeout);\n      };\n    }))(fl);\n  };\n};","import { Future } from 'fluture';\nimport { err } from './error';\nimport { noop } from './noop';\nexport var download = function download(url) {\n  return Future(function (reject, resolve) {\n    fetch(url, {\n      cache: 'force-cache'\n    }).then(function (response) {\n      if (response.ok) {\n        resolve(response);\n      } else {\n        reject({\n          _tag: 'HTTPError',\n          url: url,\n          status: response.status,\n          statusText: response.statusText\n        });\n      }\n    }).catch(function (error) {\n      reject({\n        _tag: 'NetworkError',\n        url: url\n      });\n    });\n    return noop;\n  });\n};\nexport var responseToText = function responseToText(response) {\n  return Future(function (reject, resolve) {\n    response.text().then(resolve).catch(function (error) {\n      return reject({\n        error: error,\n        reason: \"Failed to convert response to text (\" + response.url + \")\"\n      });\n    });\n    return noop;\n  });\n};\nexport var responseToBlob = function responseToBlob(response) {\n  return Future(function (reject, resolve) {\n    response.blob().then(resolve).catch(function (error) {\n      return reject({\n        error: error,\n        reason: \"Failed to convert response to text (\" + response.url + \")\"\n      });\n    });\n    return noop;\n  });\n};\nexport var blobToDataURL = function blobToDataURL(blob) {\n  return Future(function (reject, resolve) {\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      return typeof reader.result === 'string' ? resolve(reader.result) : reject(err(\"Got invalid type when reading blob (\" + typeof reader.result + \")\"));\n    };\n\n    reader.onerror = function () {\n      return reject(err('Failed to load data url for blob'));\n    };\n\n    reader.readAsDataURL(blob);\n    return reader.abort;\n  });\n};\nexport var downloadErrorToDetailedError = function downloadErrorToDetailedError(downloadError) {\n  var reason = \"Failed to download resource at \" + downloadError.url + \" \" + (downloadError._tag === 'NetworkError' ? '(Network Error, most likely a CORS issue)' : \"(Status: \" + downloadError.status + \" - \" + downloadError.statusText + \")\");\n  return {\n    reason: reason,\n    error: new Error(reason)\n  };\n};","var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport { chain as chainFluture, coalesce, both as flutureBoth, map as mapFluture, mapRej, parallel, reject, resolve } from 'fluture';\nimport { filter, flatten, map } from 'fp-ts/es6/Array';\nimport { left, right } from 'fp-ts/es6/Either';\nimport { identity } from 'fp-ts/es6/function';\nimport { pipe } from 'fp-ts/es6/pipeable';\nimport { blobToDataURL, download, downloadErrorToDetailedError, responseToBlob, responseToText } from './download';\nimport { empty as emptyErrorStack, errors as errorStackErrors, fromEithers as errorStackFromEithers, fromError as errorStackFromError, fromErrors as errorStackFromErrors, value as errorStackValue, fold as foldErrorStacks } from './error-stack';\nvar parallelAll = parallel(Infinity);\n\nfunction isCSSStyleSheet(sheet) {\n  return sheet instanceof CSSStyleSheet;\n} // Takes a non-global, non-sticky RegExp object with exactly one capturing\n// group\n\n\nvar replaceAllAsync = function replaceAllAsync(regex, replaceFn) {\n  return function (input) {\n    if (regex.global || regex.sticky) {\n      throw new TypeError('Only non-global and non-sticky ' + \"(without the /g or /y flags) regex' can be used\");\n    }\n\n    var result = regex.exec(input);\n\n    if (result === null) {\n      return resolve(emptyErrorStack(input));\n    }\n\n    var theWholeMatch = result[0];\n    var firstGroup = result[1];\n\n    if (typeof result[1] !== 'string') {\n      return resolve(emptyErrorStack(input));\n    }\n\n    var start = input.substring(0, result.index);\n    var middleF = pipe(replaceFn(firstGroup), coalesce(errorStackFromError(firstGroup))(emptyErrorStack));\n    var endF = replaceAllAsync(regex, replaceFn)(input.substring(result.index + theWholeMatch.length));\n    return pipe(flutureBoth(middleF)(endF), mapFluture(function (_a) {\n      var _b = __read(_a, 2),\n          middle = _b[0],\n          end = _b[1];\n\n      return errorStackFromErrors(start + middle.value + end.value)(flatten([middle.errors, end.errors]));\n    }));\n  };\n};\n\nvar processStyleSheetText = function processStyleSheetText(baseURL) {\n  return function (styleSheetText) {\n    var $stylesheetStyle = document.createElement('style');\n    $stylesheetStyle.appendChild(document.createTextNode(styleSheetText));\n    var $fakeDocument = document.implementation.createHTMLDocument();\n    $fakeDocument.head.appendChild($stylesheetStyle);\n    var sheet = $stylesheetStyle.sheet;\n\n    if (!(sheet instanceof CSSStyleSheet)) {\n      var reason = 'Failed to initialize CSSStyleSheet';\n      return reject({\n        reason: reason,\n        error: new Error(reason)\n      });\n    }\n\n    return inlineURLsFromCSSRuleList(sheet.cssRules, baseURL);\n  };\n};\n\nvar URL_REGEX = /url\\(['\"]?(.+?)['\"]?\\)/;\n\nvar inlineStyleSheetTextURLs = function inlineStyleSheetTextURLs(baseURL) {\n  return replaceAllAsync(URL_REGEX, function (url) {\n    if (url.indexOf('data:') === 0) {\n      // Skip data urls\n      return resolve(\"url(\\\"\" + url + \"\\\")\");\n    }\n\n    var absoluteURL = new URL(url, baseURL).toString();\n    return pipe(download(absoluteURL), mapRej(downloadErrorToDetailedError), chainFluture(responseToBlob), chainFluture(blobToDataURL), mapFluture(function (dataURL) {\n      return \"url(\" + dataURL + \")\";\n    }));\n  });\n};\n\nvar inlineURLsFromCSSRule = function inlineURLsFromCSSRule(baseURL) {\n  return function (rule) {\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/url()\n    // \"The url() function can be included as a value for background,\n    // background-image, list-style, list-style-image, content, cursor,\n    // border, border-image, border-image-source, mask, mask-image, src as\n    // part of a @font-face block, and @counter-style/symbol\"\n    if (rule instanceof CSSStyleRule) {\n      // We go through only the allowed properties individually rather\n      // than doing a single big rule.cssText.replace(blahblah) because\n      // there can be special cases like `content`, where a property\n      // that's just the url() call should be replaced but when it's a\n      // url() call inside of a string it should not which makes using a\n      // regex-only solution unreasonable.\n      //\n      // 1. Find all url() calls from `rule.style[x]`\n      // 2. Fetch the resources under the url()'s\n      // 3. Replace with base64 fetched contents using\n      //    `rule.style.setProperty`\n      //\n      // Modifying rule.style[x] doesn't actually update the base css\n      // text, which is a shame - instead we're going to update the\n      // rule.style text and then return cssText, which DOES get updated.\n      var rulesThatNeedTheirURLCallsInlined = ['background', 'backgroundImage', 'listStyle', 'listStyleImage', 'content', 'cursor', 'border', 'borderImage', 'borderImageSource', 'mask', 'maskImage'];\n      return pipe(rulesThatNeedTheirURLCallsInlined.map(function (ruleName) {\n        var ruleStyle = rule.style[ruleName];\n\n        if (ruleStyle === '' || ruleStyle === undefined) {\n          return resolve([]);\n        }\n\n        return pipe(inlineStyleSheetTextURLs(baseURL)(ruleStyle), mapFluture(function (_a) {\n          var errors = _a.errors,\n              value = _a.value; // fp gods please spare me again\n\n          rule.style[ruleName] = value;\n          return errors;\n        }));\n      }), parallelAll, mapFluture(flatten), mapFluture(function (e) {\n        // Needs to be a thunk to let the rule.cssText update\n        return errorStackFromErrors(rule.cssText)(e);\n      }));\n    } else if (rule instanceof CSSFontFaceRule) {\n      // Setting `src` in a @font-face declaration is not supported in\n      // Firefox, we unfortunately have to replace things manually\n      return inlineStyleSheetTextURLs(baseURL)(rule.cssText);\n    } else if (rule instanceof CSSMediaRule) {\n      if (window.matchMedia(rule.media.mediaText).matches) {\n        return inlineURLsFromCSSRuleList(rule.cssRules, baseURL);\n      } else {\n        return resolve(emptyErrorStack(''));\n      }\n    } else if (rule instanceof CSSImportRule) {\n      // Download the referenced stylesheet recursively\n      return pipe(download(rule.href), mapRej(downloadErrorToDetailedError), chainFluture(responseToText), chainFluture(processStyleSheetText(rule.href)));\n    } else if (rule instanceof CSSPageRule) {\n      // Library is not used in print contexts - safe to ignore.\n      return resolve(emptyErrorStack(rule.cssText));\n    }\n\n    return resolve(emptyErrorStack(rule.cssText));\n  };\n};\n\nvar inlineURLsFromCSSRuleList = function inlineURLsFromCSSRuleList(cssRules, baseURL) {\n  return pipe(Array.from(cssRules), map(inlineURLsFromCSSRule(baseURL)), map(coalesce(function (x) {\n    return errorStackFromErrors('')([x]);\n  })(identity)), parallelAll, mapFluture(foldErrorStacks(function (a, b) {\n    return a + \"\\n\" + b;\n  }, '')));\n}; // Cross-origin stylesheets cannot be read from directly, download any\n// stylesheet that's not inline.\n\n\nvar extractStylesFromCSSStyleSheet = function extractStylesFromCSSStyleSheet(baseURL) {\n  return function (styleSheet) {\n    return pipe(styleSheet.href ? pipe(download(styleSheet.href), mapRej(downloadErrorToDetailedError), chainFluture(responseToText)) : resolve(Array.from(styleSheet.cssRules).map(function (rule) {\n      return rule.cssText;\n    }).join('\\n')), chainFluture(processStyleSheetText(styleSheet.href || baseURL)));\n  };\n};\n\nvar extractStylesFromStyleSheets = function extractStylesFromStyleSheets(styleSheets, baseURL) {\n  return pipe(Array.from(styleSheets), filter(isCSSStyleSheet), map(extractStylesFromCSSStyleSheet(baseURL)), map(coalesce(errorStackFromError(''))(identity)), parallelAll);\n};\n\nvar inlineExternalStylesheets = function inlineExternalStylesheets(container) {\n  return pipe(extractStylesFromStyleSheets(container.parentWindow.document.styleSheets, container.parentWindow.window.location.href), mapFluture(function (stacks) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(pipe(stacks, map(errorStackValue))), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var styleContents = _c.value;\n        var $style = container.parentWindow.document.createElement('style');\n        $style.appendChild(container.parentWindow.document.createTextNode(styleContents));\n        container.tree.head.appendChild($style);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    var errors = pipe(stacks, map(errorStackErrors), flatten);\n    return errorStackFromErrors(container)(errors);\n  }));\n}; // Inline all images on the page (improvement: can only\n// inline *visible* images for potentially less network\n// strain if cache doesn't work)\n\n\nvar inlineImages = function inlineImages(container) {\n  return pipe(Array.from(container.tree.html.querySelectorAll('img')), map(function ($image) {\n    return pipe(download($image.src), mapRej(downloadErrorToDetailedError), chainFluture(responseToBlob), chainFluture(blobToDataURL), mapFluture(function (dataURL) {\n      // please don't hurt me fp gods\n      $image.src = dataURL;\n      return dataURL;\n    }), coalesce(left)(right));\n  }), parallelAll, mapFluture(errorStackFromEithers(container)));\n};\n\nexport var inlineExternalResources = function inlineExternalResources(container) {\n  return pipe(inlineImages(container), chainFluture(function (stack) {\n    // Improvement: `errorStack.chain`\n    return pipe(inlineExternalStylesheets(errorStackValue(stack)), mapFluture(function (secondStack) {\n      return errorStackFromErrors(errorStackValue(secondStack))(flatten([errorStackErrors(stack), errorStackErrors(secondStack)]));\n    }));\n  }));\n};","export var defaults = {\n  ignore: []\n};\nexport var normalize = function normalize(options) {\n  return Object.assign({}, defaults, options);\n};","import { chain as chainFluture, fork as forkFluture, map as mapFluture } from 'fluture';\nimport { fromEither as flutureFromEither } from 'fp-ts-fluture/es6/Future';\nimport { flow } from 'fp-ts/es6/function';\nimport { pipe } from 'fp-ts/es6/pipeable';\nimport { cloneBody } from './clone';\nimport { createContainer } from './container';\nimport { fromErrors as errorStackFromErrors } from './error-stack';\nimport { containerToPngBlob, containerToPngDataURL, containerToSVGBlob, createObjectURL } from './export';\nimport { inlineExternalResources } from './inline';\nimport { defaults as defaultOptions_, normalize as normalizeOptions } from './options';\nexport var defaultOptions = defaultOptions_;\n\nvar generateExport = function generateExport($window, options) {\n  return pipe( // Create container where we'll store extracted\n  // information about the window (which could fail) in\n  createContainer($window), flutureFromEither, // Clone existing window data into a container,\n  // including filling out <input>'s, copying <canvas>\n  // elements, etc.  mapEither(cloneBody),\n  mapFluture(cloneBody(options.ignore)), // Inline external stylesheets, images, fonts as data\n  // URL's inside of the copied tree\n  chainFluture(inlineExternalResources));\n};\n\nexport var objectURLFluture = function objectURLFluture($window, options) {\n  return pipe(generateExport($window, options), // Export tree into a png object URL and return it\n  // together with all accumulated errors\n  chainFluture(function (_a) {\n    var container = _a.value,\n        errors = _a.errors;\n    return pipe(containerToPngBlob(container), chainFluture(flow(createObjectURL, flutureFromEither)), mapFluture(function (objectURL) {\n      return errorStackFromErrors(objectURL)(errors);\n    }));\n  }));\n};\nexport var svgObjectURLFluture = function svgObjectURLFluture($window, options) {\n  return pipe(generateExport($window, options), // Export tree into a object URL containing SVG data and\n  // return it together with all accumulated errors\n  chainFluture(function (_a) {\n    var container = _a.value,\n        errors = _a.errors;\n    return pipe(containerToSVGBlob(container), chainFluture(flow(createObjectURL, flutureFromEither)), mapFluture(function (objectURL) {\n      return errorStackFromErrors(objectURL)(errors);\n    }));\n  }));\n};\nexport var dataURLFluture = function dataURLFluture($window, options) {\n  return pipe(generateExport($window, options), // Export tree into a png object URL and return it\n  // together with all accumulated errors\n  chainFluture(function (_a) {\n    var container = _a.value,\n        errors = _a.errors;\n    return pipe(containerToPngDataURL(container), mapFluture(function (objectURL) {\n      return errorStackFromErrors(objectURL)(errors);\n    }));\n  }));\n};\n\nvar promisifyExport = function promisifyExport(fn) {\n  return function ($window, partialOptions) {\n    if (partialOptions === void 0) {\n      partialOptions = {};\n    }\n\n    return new Promise(function (res, rej) {\n      return pipe(fn($window, normalizeOptions(partialOptions)), forkFluture(function (x) {\n        return rej(x.error);\n      })(res));\n    });\n  };\n};\n\nexport var objectURL = promisifyExport(objectURLFluture);\nexport var svgObjectURL = promisifyExport(svgObjectURLFluture);\nexport var dataURL = promisifyExport(dataURLFluture);","import \"./css/App.css\";\nimport { dataURL } from \"@gripeless/pico\";\n\nclass BugBattle {\n  apiUrl = \"https://api.bugbattle.io\";\n  sdkKey = null;\n  privacyPolicyUrl = \"https://www.bugbattle.io/pages/privacy-policy\";\n  privacyPolicyCheckEnabled = false;\n  email = localStorage.getItem(\"bugbattle-sender-email\") ?? \"\";\n  activation = \"\";\n  screenshot = null;\n  screenshotURL = \"\";\n  crashDetectorEnabled = false;\n  crashDetected = false;\n  actionLog = [];\n  logArray = [];\n  customData = {};\n  sessionStart = new Date();\n  bugReportingRunning = false;\n  poweredByHidden = false;\n  originalConsoleLog;\n  description = \"\";\n  severity = \"LOW\";\n  appVersionCode = \"\";\n  appBuildNumber = \"\";\n  mainColor = \"#398CFE\";\n  previousBodyOverflow;\n  snapshotPosition = {\n    x: 0,\n    y: 0,\n  };\n\n  // Activation methods\n  static FEEDBACK_BUTTON = \"FEEDBACK_BUTTON\";\n  static NONE = \"NONE\";\n\n  // Bugbattle singleton instance\n  static instance;\n\n  static initialize(sdkKey, activation) {\n    if (!this.instance) {\n      this.instance = new BugBattle(sdkKey, activation);\n    } else {\n      console.warn(\"Bugbattle already initialized.\");\n    }\n  }\n\n  constructor(sdkKey, activation) {\n    this.sdkKey = sdkKey;\n    this.activation = activation;\n    this.init();\n  }\n\n  /**\n   * Hides the powered by bugbattle logo.\n   * @param {boolean} hide\n   */\n  static enablePoweredByBugbattle(hide) {\n    this.instance.poweredByHidden = hide;\n  }\n\n  /**\n   * Enables the privacy policy.\n   * @param {boolean} enabled\n   */\n  static enablePrivacyPolicy(enabled) {\n    this.instance.privacyPolicyCheckEnabled = enabled;\n  }\n\n  /**\n   * Sets the privacy policy url.\n   * @param {string} privacyPolicyUrl\n   */\n  static setPrivacyPolicyUrl(privacyPolicyUrl) {\n    this.instance.privacyPolicyUrl = privacyPolicyUrl;\n  }\n\n  /**\n   * Enables the automatic crash detector.\n   * @param {boolean} enabled\n   */\n  static enableCrashDetector(enabled) {\n    this.instance.crashDetectorEnabled = enabled;\n  }\n\n  /**\n   * Sets the customers email.\n   * @param {string} email\n   */\n  static setCustomerEmail(email) {\n    this.instance.email = email;\n  }\n\n  /**\n   * Sets the app version code.\n   * @param {string} appVersionCode\n   */\n  static setAppVersionCode(appVersionCode) {\n    this.instance.appVersionCode = appVersionCode;\n  }\n\n  /**\n   * Sets the app version code.\n   * @param {string} appVersionCode\n   */\n  static setAppBuildNumber(appBuildNumber) {\n    this.instance.appBuildNumber = appBuildNumber;\n  }\n\n  /**\n   * Set a custom api url to send bug reports to.\n   * @param {string} apiUrl\n   */\n  static setApiUrl(apiUrl) {\n    this.instance.apiUrl = apiUrl;\n  }\n\n  /**\n   * Set custom data that will be attached to the bug-report.\n   * @param {*} data\n   */\n  static attachCustomData(data) {\n    this.instance.customData = data;\n  }\n\n  /**\n   * Sets a custom color (HEX-String i.e. #086EFB) as new main color scheme.\n   * @param {string} color\n   */\n  static setMainColor(color) {\n    const colorStyleSheet = `\n    .bugbattle--feedback-button {\n        background-color: ${color};\n    }\n    .bugbattle--feedback-dialog-header-button {\n        color: ${color};\n    }\n    .bugbattle-screenshot-editor-borderlayer {\n        border-color: ${color};\n    }\n    .bugbattle-screenshot-editor-dot {\n      background-color: ${color};\n    }\n    .bugbattle-screenshot-editor-rectangle {\n      border-color: ${color};\n    }\n    .bugbattle--feedback-send-button {\n      background-color: ${color};\n    }\n    .bugbattle--feedback-inputgroup--privacy-policy a {\n      color: ${color};\n    }\n    .bugbattle-screenshot-editor-drag-info {\n      background-color: ${color};\n    }\n    .bugbattle-double-bounce1,\n    .bugbattle-double-bounce2 {\n      background-color: ${color};\n    }\n    `;\n\n    this.instance.mainColor = color;\n    const node = document.createElement(\"style\");\n    node.innerHTML = colorStyleSheet;\n    document.body.appendChild(node);\n  }\n\n  /**\n   * Starts the bug reporting flow.\n   */\n  static startBugReporting() {\n    this.instance.disableScroll();\n    const feedbackBtn = document.querySelector(\".bugbattle--feedback-button\");\n    if (feedbackBtn) {\n      feedbackBtn.style.display = \"none\";\n    }\n\n    // Set snapshot position\n    this.instance.snapshotPosition = {\n      x: window.scrollX,\n      y: window.scrollY,\n    };\n\n    if (this.instance.crashDetected) {\n      this.instance.askForCrashReport();\n    } else {\n      this.instance.showBugReportEditor();\n    }\n  }\n\n  startCrashDetection() {\n    const self = this;\n    window.onerror = function (msg, url, lineNo, columnNo, error) {\n      var message = [\n        \"Message: \" + msg,\n        \"URL: \" + url,\n        \"Line: \" + lineNo,\n        \"Column: \" + columnNo,\n        \"Error object: \" + JSON.stringify(error),\n      ];\n      self.addLog(message, \"error\");\n\n      self.startCrashFlow();\n\n      return false;\n    };\n  }\n\n  startCrashFlow() {\n    if (this.crashDetectorEnabled && !this.bugReportingRunning) {\n      this.bugReportingRunning = true;\n      this.crashDetected = true;\n      BugBattle.startBugReporting();\n    }\n  }\n\n  addLog(args, priority) {\n    if (!args) {\n      return;\n    }\n\n    var log = \"\";\n    for (var i = 0; i < args.length; i++) {\n      log += args[i] + \" \";\n    }\n    this.logArray.push({\n      log: log,\n      date: new Date(),\n      priority,\n    });\n  }\n\n  static disableConsoleLogOverwrite() {\n    window.console = this.instance.originalConsoleLog;\n  }\n\n  overwriteConsoleLog() {\n    const self = this;\n    window.console = (function (origConsole) {\n      if (!window.console || !origConsole) {\n        origConsole = {};\n      }\n\n      self.originalConsoleLog = origConsole;\n\n      return {\n        log: function () {\n          self.addLog(arguments, \"INFO\");\n          origConsole.log && origConsole.log.apply(origConsole, arguments);\n        },\n        warn: function () {\n          self.addLog(arguments, \"WARNING\");\n          origConsole.warn && origConsole.warn.apply(origConsole, arguments);\n        },\n        error: function () {\n          self.addLog(arguments, \"ERROR\");\n          origConsole.error && origConsole.error.apply(origConsole, arguments);\n          self.startCrashFlow();\n        },\n        info: function (v) {\n          self.addLog(arguments, \"INFO\");\n          origConsole.info && origConsole.info.apply(origConsole, arguments);\n        },\n      };\n    })(window.console);\n  }\n\n  disableScroll() {\n    this.previousBodyOverflow = document.body.style.overflow;\n    document.body.style.overflow = \"hidden\";\n  }\n\n  enableScroll() {\n    if (this.previousBodyOverflow) {\n      document.body.style.overflow = this.previousBodyOverflow;\n    } else {\n      document.body.style.overflow = null;\n    }\n  }\n\n  askForCrashReport() {\n    const self = this;\n\n    var elem = document.createElement(\"div\");\n    elem.className = \"bugbattle--feedback-dialog-container\";\n    elem.setAttribute(\"data-ignore-bb\", \"true\");\n    elem.innerHTML = `<div class='bugbattle--feedback-dialog'>\n      <div class=\"bugbattle--feedback-dialog-header\">\n        <div></div>\n        <div class=\"bugbattle--feedback-dialog-header-title\">Crash detected</div>\n        <div class=\"bugbattle--feedback-dialog-header-button bugbattle--feedback-dialog-header-button-cancel\">\n          <svg fill=\"#CCCCCC\" width=\"100pt\" height=\"100pt\" version=\"1.1\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"m100 9.4414-9.4414-9.4414-40.344 40.344-40.773-40.344-9.4414 9.4414 40.344 40.773-40.344 40.344 9.4414 9.4414 40.773-40.344 40.344 40.344 9.4414-9.4414-40.344-40.344z\" fill-rule=\"evenodd\"/>\n          </svg>\n        </div>\n      </div>\n      <div class=\"bugbattle--feedback-dialog-body\">\n        <div class=\"bugbattle--feedback-inputgroup bugbattle--feedback-inputgroup-text\">\n          A critical error has been detected. Do you want to submit an error report?\n        </div>\n        <div class=\"bugbattle--feedback-inputgroup\">\n          <div class=\"bugbattle--feedback-send-button\">Submit error report</div>\n        </div>\n      </div>\n    </div>`;\n    document.body.appendChild(elem);\n\n    const sendButton = document.querySelector(\n      \".bugbattle--feedback-send-button\"\n    );\n    const cancelButton = document.querySelector(\n      \".bugbattle--feedback-dialog-header-button-cancel\"\n    );\n\n    cancelButton.onclick = function () {\n      self.hide();\n    };\n\n    sendButton.onclick = function () {\n      document.querySelector(\".bugbattle--feedback-dialog-container\").remove();\n\n      self.createBugReportingDialog();\n    };\n  }\n\n  createBugReportingDialog() {\n    const self = this;\n\n    var elem = document.createElement(\"div\");\n    elem.className = \"bugbattle--feedback-dialog-container\";\n    elem.setAttribute(\"data-ignore-bb\", \"true\");\n    elem.innerHTML = `<div class='bugbattle--feedback-dialog'>\n      <div class=\"bugbattle--feedback-dialog-header\">\n        <div></div>\n        <div class=\"bugbattle--feedback-dialog-header-title\">Report your feedback</div>\n        <div class=\"bugbattle--feedback-dialog-header-button bugbattle--feedback-dialog-header-button-cancel\">\n          <svg fill=\"#CCCCCC\" width=\"100pt\" height=\"100pt\" version=\"1.1\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"m100 9.4414-9.4414-9.4414-40.344 40.344-40.773-40.344-9.4414 9.4414 40.344 40.773-40.344 40.344 9.4414 9.4414 40.773-40.344 40.344 40.344 9.4414-9.4414-40.344-40.344z\" fill-rule=\"evenodd\"/>\n          </svg>\n        </div>\n      </div>\n      <div class=\"bugbattle--feedback-dialog-loading\">\n        <div class=\"bugbattle-spinner\">\n          <div class=\"bugbattle-double-bounce1\"></div>\n          <div class=\"bugbattle-double-bounce2\"></div>\n        </div>\n      </div>\n      <div class=\"bugbattle--feedback-dialog-success\">\n        <svg width=\"120px\" height=\"92px\" viewBox=\"0 0 120 92\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n            <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g id=\"np_check_1807541\" fill=\"${this.mainColor}\" fill-rule=\"nonzero\">\n                    <path d=\"M107.553103,1.03448276 L101.669379,6.85344828 C81.2141379,27.3490345 62.5845517,47.5706897 42.7038621,67.7596552 L17.5535172,47.6517931 L11.088,42.4793793 L0.743172414,55.4104138 L38.2431724,85.4104138 L44.0621379,90.0010345 L49.2991034,84.764069 C71.5404828,62.4751034 91.5349655,40.4985517 113.437034,18.5571724 L119.256,12.6734483 L107.553103,1.03448276 Z\" id=\"Path\"></path>\n                </g>\n            </g>\n        </svg>\n        <div class=\"bugbattle--feedback-dialog-info-text\">Thank you for your feedback!</div>\n      </div>\n      <div class=\"bugbattle--feedback-dialog-body\">\n        <div class=\"bugbattle--feedback-inputgroup\">\n          <div class=\"bugbattle--feedback-inputgroup-label\">Email</div>\n          <input class=\"bugbattle--feedback-email\" type=\"text\" placeholder=\"Email\" />\n        </div>\n        <div class=\"bugbattle--feedback-inputgroup\">\n          <div class=\"bugbattle--feedback-inputgroup-label\">What went wrong?</div>\n          <textarea class=\"bugbattle--feedback-description\" placeholder=\"Describe your issue\"></textarea>\n        </div>\n        <div class=\"bugbattle--feedback-inputgroup bugbattle--feedback-inputgroup--privacy-policy\">\n          <input type=\"checkbox\" required name=\"terms\"> <span class=\"bugbattle--feedback-inputgroup--privacy-policy-label\">I read and accept the <a id=\"bugbattle-privacy-policy-link\" href=\"#\" target=\"_blank\">privacy policy</a>.</span>\n        </div>\n        <div class=\"bugbattle--feedback-inputgroup\">\n          <div class=\"bugbattle--feedback-send-button\">Send feedback</div>\n        </div>\n        <div class=\"bugbattle--feedback-poweredbycontainer\">\n          <span>Powered by</span>\n          <svg width=\"173px\" height=\"30px\" viewBox=\"0 0 173 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                  <g fill=\"#AAAAAA\">\n                      <g transform=\"translate(147.600000, 0.000000)\">\n                          <path d=\"M24.2859542,7.7113198 C24.0540256,7.30857681 23.5901684,7.21614399 23.1067117,7.49014127 C22.4207257,7.88298074 21.7282066,8.2659167 21.0585536,8.68186438 C20.793959,8.84692298 20.6796281,8.81721243 20.5293645,8.54321515 C19.7290475,7.10060297 18.8960646,5.67119547 18.092481,4.25169149 C18.0234655,4.09525611 17.9234014,3.95480724 17.7984871,3.83904499 C17.6571381,3.74207171 17.4921828,3.68612411 17.3215635,3.67728756 L12.0002725,3.67728756 C11.7748771,3.67728756 11.8010099,3.50892778 11.8010099,3.34717035 C11.8010099,2.52847968 11.8010099,1.69658433 11.8010099,0.887797176 C11.8346543,0.638013247 11.7383149,0.38837468 11.5462151,0.227562766 C11.4071145,0.0821266579 11.2155424,0 11.0153926,0 C10.8152429,0 10.6236708,0.0821266579 10.4845702,0.227562766 C10.2986685,0.392643686 10.2046806,0.639351901 10.233042,0.887797176 C10.2036426,1.81212535 10.2624414,2.73975469 10.184043,3.66408287 L6.51891806,3.64757701 C6.36738842,3.6701226 6.22373966,3.73023167 6.10079329,3.82253913 C5.9974756,3.89628042 5.90789458,3.98792717 5.8361987,4.09323523 L0.53450728,13.3167099 C0.35516424,13.600556 0.35516424,13.9637944 0.53450728,14.2476405 L5.81006591,23.5305363 C5.90158939,23.7273663 6.07735578,23.8709275 6.28698947,23.9200746 C6.38409512,23.9386703 6.48230448,23.9508007 6.58098345,23.9563874 L17.0896349,23.9960015 C17.2513063,24.0107273 17.4140655,23.9846371 17.5632919,23.9200746 C17.7549133,23.8514168 17.9098335,23.705613 17.9912164,23.5173316 C19.733403,20.4736509 21.4864782,17.4299703 23.2504421,14.3862897 C23.4716092,14.0527399 23.4716092,13.617248 23.2504421,13.2836982 C22.7147197,12.3725747 22.2083967,11.4416442 21.6694078,10.5338219 C21.5322106,10.3027399 21.5910094,10.2235117 21.7968052,10.1112719 C22.5056573,9.71513123 23.2079763,9.30248473 23.9135618,8.88983822 C24.1271707,8.79373014 24.2900142,8.61002873 24.3611418,8.38492949 C24.4322695,8.15983024 24.4049139,7.91475021 24.2859542,7.7113198 Z M20.0393745,14.4820237 C19.9021773,14.7197081 19.7715133,14.9474889 19.6310495,15.178571 L19.6310495,15.178571 L17.8115535,18.344395 L17.8115535,18.344395 C17.3280967,19.1927962 16.8315735,20.0378962 16.3644498,20.8895986 C16.2455303,21.114253 16.0045103,21.2445048 15.7535956,21.2197158 C13.1642709,21.2043103 10.5727684,21.1911057 7.97908815,21.1801018 C7.76734312,21.1891383 7.57068598,21.0696354 7.47929839,20.8763939 C6.17265848,18.5897821 4.87255177,16.3020699 3.57897826,14.0132572 C3.47017471,13.8570302 3.46000511,13.6514856 3.55284547,13.4850697 L5.01301556,10.9794801 C5.01148564,10.969637 5.01148564,10.9596127 5.01301556,10.9497696 L6.90111023,7.64859753 L6.90111023,7.64859753 C7.03504082,7.41091314 7.18203781,7.10060297 7.2898356,6.91573733 C7.39763339,6.7308717 7.46296539,6.7308717 7.61649558,6.82990686 C9.28899466,7.82025848 10.9680269,8.81061009 12.6437926,9.78115467 C15.0545433,11.1940563 17.4663827,12.6058576 19.8793111,14.0165584 C20.1308393,14.1882194 20.1733051,14.2443393 20.0328413,14.4820237 L20.0393745,14.4820237 Z\" id=\"Shape\"></path>\n                      </g>\n                      <path d=\"M17.556,15.03 C17.556,19.848 13.761,23.808 9.108,23.808 C6.77072152,23.7933743 4.54993338,22.7855117 3,21.036 L3,21.168 L2.4,23.268 L0,23.268 L0,0.168 L3,0.168 L3,9 C4.56193736,7.27275703 6.77633455,6.27927072 9.105,6.261 C13.761,6.252 17.556,10.2 17.556,15.03 Z M14.556,15.03 C14.556,11.8405556 11.9704444,9.255 8.781,9.255 C5.59155557,9.255 3.006,11.8405556 3.006,15.03 C3.006,18.2194444 5.59155557,20.805 8.781,20.805 C11.9631308,20.7885804 14.5382339,18.2121389 14.553,15.03 L14.556,15.03 Z\" id=\"Shape\" fill-rule=\"nonzero\"></path>\n                      <path d=\"M32.736,23.28 L32.274,21.63 C30.1613238,23.7506367 26.978911,24.3891451 24.2117195,23.2475883 C21.4445279,22.1060314 19.6379658,19.4094081 19.635,16.416 L19.635,6.78 L22.635,6.78 L22.635,16.053 C22.635,18.6774571 24.7625429,20.805 27.387,20.805 C30.0114571,20.805 32.139,18.6774571 32.139,16.053 L32.139,6.78 L35.139,6.78 L35.139,23.28 L32.736,23.28 Z\" id=\"Path\" fill-rule=\"nonzero\"></path>\n                      <path d=\"M55.044,21.102 C55.0420903,24.650847 52.9027758,27.8491651 49.623469,29.2058026 C46.3441622,30.5624401 42.5705487,29.8102793 40.062,27.3 L42.207,25.2 C43.8577662,26.8474964 46.3387667,27.3376373 48.4920171,26.4416539 C50.6452675,25.5456705 52.0462228,23.4402192 52.041,21.108 L52.041,21.042 C50.5002169,22.8021497 48.2752599,23.8124004 45.936,23.814 C41.283,23.814 37.488,19.854 37.488,15.036 C37.488,10.218 41.283,6.258 45.936,6.258 C48.2752599,6.2595996 50.5002169,7.2698503 52.041,9.03 L52.041,8.898 L52.641,6.798 L55.041,6.798 L55.044,21.102 Z M51.48,15.03 C51.48,11.862 48.972,9.255 45.936,9.255 C42.9,9.255 40.392,11.862 40.392,15.03 C40.392,18.198 42.867,20.805 45.936,20.805 C49.005,20.805 51.48,18.198 51.48,15.03 Z\" id=\"Shape\" fill-rule=\"nonzero\"></path>\n                      <path d=\"M75.537,15.03 C75.537,19.848 71.742,23.808 67.089,23.808 C64.7527694,23.7925242 62.5332367,22.7847364 60.984,21.036 L60.984,21.168 L60.384,23.268 L57.984,23.268 L57.984,0.168 L60.984,0.168 L60.984,9 C62.5459374,7.27275703 64.7603345,6.27927072 67.089,6.261 C71.742,6.252 75.537,10.2 75.537,15.03 Z M72.537,15.03 C72.537,11.8405556 69.9514444,9.255 66.762,9.255 C63.5725556,9.255 60.987,11.8405556 60.987,15.03 C60.987,18.2194444 63.5725556,20.805 66.762,20.805 C69.9441308,20.7885804 72.5192339,18.2121389 72.534,15.03 L72.537,15.03 Z\" id=\"Shape\" fill-rule=\"nonzero\"></path>\n                      <path d=\"M95.139,23.28 L92.739,23.28 L92.139,21.18 L92.139,21.048 C90.5807158,22.803397 88.3482532,23.8116059 86.001,23.82 C81.381,23.82 77.586,19.86 77.586,15.042 C77.586,10.224 81.381,6.264 86.001,6.264 C88.3482532,6.27239413 90.5807158,7.28060302 92.139,9.036 L92.139,8.904 L92.739,6.804 L95.139,6.804 L95.139,23.28 Z M92.139,15.03 C92.139,11.8405556 89.5534444,9.255 86.364,9.255 C83.1745556,9.255 80.589,11.8405556 80.589,15.03 C80.589,18.2194444 83.1745556,20.805 86.364,20.805 C89.5461308,20.7885804 92.1212339,18.2121389 92.136,15.03 L92.139,15.03 Z\" id=\"Shape\" fill-rule=\"nonzero\"></path>\n                      <path d=\"M105.963,20.805 L105.963,23.28 L103.422,23.28 C101.143537,22.2828018 99.6773135,20.0250766 99.693,17.538 L99.693,9.453 L97.593,9.453 L97.593,6.78 L99.693,6.78 L99.693,2.325 L102.693,2.325 L102.693,6.78 L105.498,6.78 L105.498,9.453 L102.693,9.453 L102.693,17.538 C102.688982,18.4062085 103.032305,19.2399754 103.646509,19.8536163 C104.260714,20.4672572 105.094796,20.8098149 105.963,20.805 Z\" id=\"Path\" fill-rule=\"nonzero\"></path>\n                      <path d=\"M115.962,20.805 L115.962,23.28 L113.421,23.28 C111.142537,22.2828018 109.676314,20.0250766 109.692,17.538 L109.692,9.453 L107.592,9.453 L107.592,6.78 L109.692,6.78 L109.692,2.325 L112.692,2.325 L112.692,6.78 L115.5,6.78 L115.5,9.453 L112.695,9.453 L112.695,17.538 C112.690988,18.4056858 113.033901,19.2389929 113.647454,19.852546 C114.261007,20.4660991 115.094314,20.8090116 115.962,20.805 Z\" id=\"Path\" fill-rule=\"nonzero\"></path>\n                      <polygon fill-rule=\"nonzero\" points=\"118.305 23.28 118.305 0.18 121.305 0.18 121.305 23.28\"></polygon>\n                      <path d=\"M127.08,15.69 C127.330165,17.935452 128.871936,19.8263987 131.021025,20.5235752 C133.170113,21.2207517 135.528322,20.5949806 137.049,18.924 L139.194,21.069 C139.119365,21.1139793 139.051659,21.1695593 138.993,21.234 C137.350467,22.8842039 135.117322,23.8107216 132.789,23.808006 C130.468503,23.7936931 128.246259,22.869464 126.6,21.234 C124.949796,19.5914668 124.023278,17.3583215 124.025994,15.03 C124.025994,10.179 127.524,6.252 131.826,6.252 C136.128,6.252 139.626,10.179 139.626,15.03 L139.626,15.69 L127.08,15.69 Z M127.314,13.017 L136.287,13.017 C135.627,10.839 133.887,9.255 131.787,9.255 C129.687,9.255 128.004,10.839 127.314,13.017 Z\" id=\"Shape\" fill-rule=\"nonzero\"></path>\n                  </g>\n              </g>\n          </svg>\n        </div>\n      </div>\n    </div>`;\n    document.body.appendChild(elem);\n\n    // poweredByHidden\n\n    const privacyPolicyContainer = document.querySelector(\n      \".bugbattle--feedback-inputgroup--privacy-policy\"\n    );\n    const privacyPolicyInputLabel = document.querySelector(\n      \".bugbattle--feedback-inputgroup--privacy-policy-label\"\n    );\n    const privacyPolicyInput = document.querySelector(\n      \".bugbattle--feedback-inputgroup--privacy-policy input\"\n    );\n    if (this.privacyPolicyCheckEnabled) {\n      privacyPolicyContainer.style.display = \"block\";\n      document.querySelector(\n        \"#bugbattle-privacy-policy-link\"\n      ).href = this.privacyPolicyUrl;\n    } else {\n      privacyPolicyContainer.style.display = \"none\";\n    }\n\n    privacyPolicyInputLabel.onclick = function () {\n      privacyPolicyInput.checked = !privacyPolicyInput.checked;\n    };\n\n    const poweredByContainer = document.querySelector(\n      \".bugbattle--feedback-poweredbycontainer\"\n    );\n    if (this.poweredByHidden) {\n      poweredByContainer.style.display = \"none\";\n    } else {\n      poweredByContainer.onclick = function () {\n        window.open(\"https://www.bugbattle.io/\", \"_blank\");\n      };\n    }\n\n    const sendButton = document.querySelector(\n      \".bugbattle--feedback-send-button\"\n    );\n    const cancelButton = document.querySelector(\n      \".bugbattle--feedback-dialog-header-button-cancel\"\n    );\n\n    const emailField = document.querySelector(\".bugbattle--feedback-email\");\n    const textArea = document.querySelector(\".bugbattle--feedback-description\");\n\n    textArea.oninput = function () {\n      textArea.style.height = \"inherit\";\n      textArea.style.height = textArea.scrollHeight + \"px\";\n    };\n\n    cancelButton.onclick = function () {\n      self.hide();\n    };\n\n    emailField.value = this.email;\n\n    sendButton.onclick = function () {\n      self.email = emailField.value;\n\n      if (!self.email || self.email.length === 0) {\n        alert(\"Please provide an email address.\");\n        return;\n      }\n\n      if (self.privacyPolicyCheckEnabled && !privacyPolicyInput.checked) {\n        alert(\"Please read and accept the privacy policy.\");\n        return;\n      }\n\n      self.description = textArea.value;\n\n      localStorage.setItem(\"bugbattle-sender-email\", self.email);\n\n      self.toggleLoading(true);\n\n      if (!self.sdkKey) {\n        return alert(\"BUGBATTLE: Please provide a valid API key!\");\n      }\n\n      self.preScreenshotCleanup();\n\n      window.scrollTo(self.snapshotPosition.x, self.snapshotPosition.y);\n\n      dataURL(window, {\n        ignore: ['[data-ignore-bb~=\"true\"]'],\n      })\n        .then((screen) => {\n          if (screen && screen.value) {\n            self.screenshot = screen.value;\n            self.prepareScreenshot();\n          } else {\n            self.showError();\n          }\n        })\n        .catch((exp) => {\n          self.showError();\n        });\n    };\n  }\n\n  preScreenshotCleanup() {\n    const imgElements = document.body.querySelectorAll(\"img, svg, video\");\n    imgElements.forEach(function (item) {\n      item.setAttribute(\"width\", item.getBoundingClientRect().width);\n      item.setAttribute(\"height\", item.getBoundingClientRect().height);\n    });\n  }\n\n  hide() {\n    const editorContainer = document.querySelector(\n      \".bugbattle-screenshot-editor-container\"\n    );\n    if (editorContainer) {\n      editorContainer.remove();\n    }\n    const dialogContainer = document.querySelector(\n      \".bugbattle--feedback-dialog-container\"\n    );\n    if (dialogContainer) {\n      dialogContainer.remove();\n    }\n\n    const feedbackBtn = document.querySelector(\".bugbattle--feedback-button\");\n    if (feedbackBtn) {\n      feedbackBtn.style.display = \"block\";\n    }\n\n    this.bugReportingRunning = false;\n    this.crashDetected = false;\n    this.enableScroll();\n  }\n\n  init() {\n    this.overwriteConsoleLog();\n    this.startCrashDetection();\n\n    const self = this;\n    if (\n      document.readyState === \"complete\" ||\n      document.readyState === \"loaded\" ||\n      document.readyState === \"interactive\"\n    ) {\n      self.checkForInitType();\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", function (event) {\n        self.checkForInitType();\n      });\n    }\n  }\n\n  checkForInitType() {\n    if (this.activation === BugBattle.FEEDBACK_BUTTON) {\n      this.injectFeedbackButton();\n    }\n  }\n\n  injectFeedbackButton() {\n    var elem = document.createElement(\"div\");\n    elem.className = \"bugbattle--feedback-button\";\n    elem.innerHTML =\n      '<div class=\"bugbattle--feedback-button-inner\"><span class=\"bugbattle--feedback-button-inner-text\">Feedback</span></div>';\n    elem.onclick = function () {\n      BugBattle.startBugReporting();\n    };\n    document.body.appendChild(elem);\n  }\n\n  toggleLoading(loading) {\n    const header = document.querySelector(\".bugbattle--feedback-dialog-header\");\n    const body = document.querySelector(\".bugbattle--feedback-dialog-body\");\n    const loader = document.querySelector(\n      \".bugbattle--feedback-dialog-loading\"\n    );\n    if (loading) {\n      body.style.display = \"none\";\n      loader.style.display = \"block\";\n      header.style.display = \"none\";\n    } else {\n      body.style.display = \"block\";\n      loader.style.display = \"none\";\n      header.style.display = \"block\";\n    }\n  }\n\n  showSuccessMessage() {\n    const success = document.querySelector(\n      \".bugbattle--feedback-dialog-success\"\n    );\n    const body = document.querySelector(\".bugbattle--feedback-dialog-body\");\n    const loader = document.querySelector(\n      \".bugbattle--feedback-dialog-loading\"\n    );\n    body.style.display = \"none\";\n    loader.style.display = \"none\";\n    success.style.display = \"flex\";\n  }\n\n  dataURItoBlob(dataURI) {\n    var byteString = atob(dataURI.split(\",\")[1]);\n    var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    var blob = new Blob([ab], { type: mimeString });\n    return blob;\n  }\n\n  prepareScreenshot() {\n    const self = this;\n    const imageObj = new Image();\n    imageObj.onload = function () {\n      const pixelRatio = window.devicePixelRatio;\n      const canvas = document.createElement(\"canvas\");\n\n      canvas.width = this.width;\n      canvas.height = this.height;\n      const context = canvas.getContext(\"2d\");\n\n      // Draw image\n      context.drawImage(imageObj, 0, 0, this.width, this.height);\n\n      // Draw markers\n      const editorDot = document.querySelector(\n        \".bugbattle-screenshot-editor-dot\"\n      );\n      const editorRectangle = document.querySelector(\n        \".bugbattle-screenshot-editor-rectangle\"\n      );\n\n      if (editorDot && editorRectangle) {\n        context.beginPath();\n        context.arc(\n          (editorDot.offsetLeft + editorDot.offsetWidth / 2) * pixelRatio,\n          (editorDot.offsetTop + editorDot.offsetHeight / 2) * pixelRatio,\n          6 * pixelRatio,\n          0,\n          2 * Math.PI,\n          false\n        );\n        context.fillStyle = self.mainColor;\n        context.fill();\n        context.closePath();\n\n        context.lineWidth = 3 * pixelRatio;\n        context.strokeStyle = self.mainColor;\n        context.stroke();\n        if (editorRectangle.offsetTop > 0 || editorRectangle.offsetLeft) {\n          context.strokeRect(\n            editorRectangle.offsetLeft * pixelRatio,\n            editorRectangle.offsetTop * pixelRatio,\n            editorRectangle.offsetWidth * pixelRatio,\n            editorRectangle.offsetHeight * pixelRatio\n          );\n        }\n      }\n\n      // Upload screenshot\n      self.uploadScreenshot(canvas.toDataURL(\"image/jpeg\", 0.5));\n      self.screenshot = null;\n    };\n    imageObj.onerror = function () {\n      self.hide();\n    };\n    imageObj.src = this.screenshot;\n  }\n\n  uploadScreenshot(screenshot) {\n    const self = this;\n    const http = new XMLHttpRequest();\n    http.open(\"POST\", this.apiUrl + \"/uploads/sdk\");\n    http.setRequestHeader(\"Api-Token\", this.sdkKey);\n    http.onreadystatechange = function (e) {\n      if (http.readyState === XMLHttpRequest.DONE) {\n        try {\n          const response = JSON.parse(http.responseText);\n          if (response && response.fileUrl) {\n            self.screenshotURL = response.fileUrl;\n            self.sendBugReportToServer();\n          } else {\n            self.showError();\n          }\n        } catch (e) {\n          self.showError();\n        }\n      }\n    };\n\n    const canvas = document.querySelector(\n      \".bugbattle-screenshot-editor-canvas\"\n    );\n    const file = this.dataURItoBlob(screenshot);\n    const formData = new FormData();\n    formData.append(\"file\", file, \"screenshot.jpg\");\n    http.send(formData);\n  }\n\n  sendBugReportToServer() {\n    const self = this;\n    const http = new XMLHttpRequest();\n    http.open(\"POST\", this.apiUrl + \"/bugs\");\n    http.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n    http.setRequestHeader(\"Api-Token\", this.sdkKey);\n    http.onreadystatechange = function (e) {\n      if (\n        http.readyState === XMLHttpRequest.DONE &&\n        (http.status === 200 || http.status === 201)\n      ) {\n        self.showSuccessMessage();\n        setTimeout(function () {\n          self.hide();\n        }, 1500);\n      }\n    };\n\n    const bugReportData = {\n      reportedBy: this.email,\n      description: this.description,\n      priority: this.severity,\n      screenshotUrl: this.screenshotURL,\n      customData: this.customData,\n      metaData: this.getMetaData(),\n      consoleLog: this.logArray,\n      type: this.crashDetected ? \"CRASHREPORT\" : \"BUG\",\n    };\n    http.send(JSON.stringify(bugReportData));\n  }\n\n  showError() {\n    this.toggleLoading(false);\n  }\n\n  getMetaData() {\n    var nAgt = navigator.userAgent;\n    var browserName = navigator.appName;\n    var fullVersion = \"\" + parseFloat(navigator.appVersion);\n    var majorVersion = parseInt(navigator.appVersion, 10);\n    var nameOffset, verOffset, ix;\n\n    // In Opera, the true version is after \"Opera\" or after \"Version\"\n    if ((verOffset = nAgt.indexOf(\"Opera\")) !== -1) {\n      browserName = \"Opera\";\n      fullVersion = nAgt.substring(verOffset + 6);\n      if ((verOffset = nAgt.indexOf(\"Version\")) !== -1)\n        fullVersion = nAgt.substring(verOffset + 8);\n    }\n    // In MSIE, the true version is after \"MSIE\" in userAgent\n    else if ((verOffset = nAgt.indexOf(\"MSIE\")) !== -1) {\n      browserName = \"Microsoft Internet Explorer\";\n      fullVersion = nAgt.substring(verOffset + 5);\n    }\n    // In Chrome, the true version is after \"Chrome\"\n    else if ((verOffset = nAgt.indexOf(\"Chrome\")) !== -1) {\n      browserName = \"Chrome\";\n      fullVersion = nAgt.substring(verOffset + 7);\n    }\n    // In Safari, the true version is after \"Safari\" or after \"Version\"\n    else if ((verOffset = nAgt.indexOf(\"Safari\")) !== -1) {\n      browserName = \"Safari\";\n      fullVersion = nAgt.substring(verOffset + 7);\n      if ((verOffset = nAgt.indexOf(\"Version\")) !== -1)\n        fullVersion = nAgt.substring(verOffset + 8);\n    }\n    // In Firefox, the true version is after \"Firefox\"\n    else if ((verOffset = nAgt.indexOf(\"Firefox\")) !== -1) {\n      browserName = \"Firefox\";\n      fullVersion = nAgt.substring(verOffset + 8);\n    }\n    // In most other browsers, \"name/version\" is at the end of userAgent\n    else if (\n      (nameOffset = nAgt.lastIndexOf(\" \") + 1) <\n      (verOffset = nAgt.lastIndexOf(\"/\"))\n    ) {\n      browserName = nAgt.substring(nameOffset, verOffset);\n      fullVersion = nAgt.substring(verOffset + 1);\n      if (browserName.toLowerCase() === browserName.toUpperCase()) {\n        browserName = navigator.appName;\n      }\n    }\n    // trim the fullVersion string at semicolon/space if present\n    if ((ix = fullVersion.indexOf(\";\")) !== -1)\n      fullVersion = fullVersion.substring(0, ix);\n    if ((ix = fullVersion.indexOf(\" \")) !== -1)\n      fullVersion = fullVersion.substring(0, ix);\n\n    majorVersion = parseInt(\"\" + fullVersion, 10);\n    if (isNaN(majorVersion)) {\n      fullVersion = \"\" + parseFloat(navigator.appVersion);\n      majorVersion = parseInt(navigator.appVersion, 10);\n    }\n\n    var OSName = \"Unknown OS\";\n    if (navigator.appVersion.indexOf(\"Win\") !== -1) OSName = \"Windows\";\n    if (navigator.appVersion.indexOf(\"Mac\") !== -1) OSName = \"MacOS\";\n    if (navigator.appVersion.indexOf(\"X11\") !== -1) OSName = \"UNIX\";\n    if (navigator.appVersion.indexOf(\"Linux\") !== -1) OSName = \"Linux\";\n    if (navigator.appVersion.indexOf(\"iPad\") !== -1) OSName = \"iPad\";\n    if (navigator.appVersion.indexOf(\"iPhone\") !== -1) OSName = \"iPhone\";\n    if (navigator.appVersion.indexOf(\"Android\") !== -1) OSName = \"Android\";\n\n    const now = new Date();\n    const sessionDuration =\n      (now.getTime() - this.sessionStart.getTime()) / 1000;\n\n    return {\n      browserName: browserName + \"(\" + fullVersion + \")\",\n      userAgent: nAgt,\n      browser: navigator.appName,\n      systemName: OSName,\n      buildVersionNumber: this.appBuildNumber,\n      releaseVersionNumber: this.appVersionCode,\n      sessionDuration: sessionDuration,\n      devicePixelRatio: window.devicePixelRatio,\n      screenWidth: window.screen.width,\n      screenHeight: window.screen.height,\n      innerWidth: window.innerWidth,\n      innerHeight: window.innerHeight,\n      currentUrl: window.location.href,\n      language: navigator.language || navigator.userLanguage,\n    };\n  }\n\n  showBugReportEditor() {\n    const self = this;\n    var bugReportingEditor = document.createElement(\"div\");\n    bugReportingEditor.className = \"bugbattle-screenshot-editor-container\";\n    bugReportingEditor.setAttribute(\"data-ignore-bb\", \"true\");\n    bugReportingEditor.innerHTML = `\n      <div class='bugbattle-screenshot-editor-container-inner'>\n        <div class='bugbattle-screenshot-editor-borderlayer'></div>\n        <div class='bugbattle-screenshot-editor-dot'></div>\n        <div class='bugbattle-screenshot-editor-rectangle'></div>\n        <div class='bugbattle-screenshot-editor-drag-info'>Click or drag to create a comment</div>\n      </div>\n    `;\n    document.body.appendChild(bugReportingEditor);\n\n    const editorRectangle = document.querySelector(\n      \".bugbattle-screenshot-editor-borderlayer\"\n    );\n    if (editorRectangle) {\n      editorRectangle.style.height = `${window.innerHeight}px`;\n    }\n\n    var addedMarker = false;\n    var clickStartX = -1;\n    var clickStartY = -1;\n\n    function setStartPoint(x, y) {\n      if (addedMarker) {\n        return;\n      }\n\n      const editorDot = document.querySelector(\n        \".bugbattle-screenshot-editor-dot\"\n      );\n      editorDot.style.left = x - editorDot.offsetWidth / 2 + \"px\";\n      editorDot.style.top = y - editorDot.offsetHeight / 2 + \"px\";\n    }\n\n    function setMouseMove(x, y) {\n      const dragInfo = document.querySelector(\n        \".bugbattle-screenshot-editor-drag-info\"\n      );\n      dragInfo.style.left = `${x + 20}px`;\n      dragInfo.style.top = `${y - dragInfo.offsetHeight / 2}px`;\n      dragInfo.style.right = null;\n\n      if (addedMarker || clickStartX < 0) {\n        return;\n      }\n\n      const width = x - clickStartX;\n      const height = y - clickStartY;\n\n      const editorRectangle = document.querySelector(\n        \".bugbattle-screenshot-editor-rectangle\"\n      );\n\n      var left = width < 0 ? clickStartX + width : clickStartX;\n      var top = height < 0 ? clickStartY + height : clickStartY;\n      var heightAbs = height < 0 ? height * -1 : height;\n      var widthAbs = width < 0 ? width * -1 : width;\n\n      editorRectangle.style.left = `${left}px`;\n      editorRectangle.style.top = `${top}px`;\n      editorRectangle.style.width = `${widthAbs}px`;\n      editorRectangle.style.height = `${heightAbs}px`;\n    }\n\n    function mouseDownEventHandler(e) {\n      clickStartX = e.pageX - document.documentElement.scrollLeft;\n      clickStartY = e.pageY - document.documentElement.scrollTop;\n      setStartPoint(clickStartX, clickStartY);\n    }\n\n    function touchstartEventHandler(e) {\n      clickStartX = e.touches[0].pageX - document.documentElement.scrollLeft;\n      clickStartY = e.touches[0].pageY - document.documentElement.scrollTop;\n      setStartPoint(clickStartX, clickStartY);\n    }\n\n    function mouseUpEventHandler(e) {\n      const dragInfo = document.querySelector(\n        \".bugbattle-screenshot-editor-drag-info\"\n      );\n      dragInfo.style.display = \"none\";\n\n      addedMarker = true;\n\n      self.createBugReportingDialog();\n    }\n\n    function mouseMoveEventHandler(e) {\n      const x = e.pageX - document.documentElement.scrollLeft;\n      const y = e.pageY - document.documentElement.scrollTop;\n      setMouseMove(x, y);\n    }\n\n    function touchMoveEventHandler(e) {\n      const x = e.touches[0].pageX - document.documentElement.scrollLeft;\n      const y = e.touches[0].pageY - document.documentElement.scrollTop;\n      setMouseMove(x, y);\n      e.preventDefault();\n    }\n\n    bugReportingEditor.addEventListener(\"mouseup\", mouseUpEventHandler);\n    bugReportingEditor.addEventListener(\"mousemove\", mouseMoveEventHandler);\n    bugReportingEditor.addEventListener(\"mousedown\", mouseDownEventHandler);\n    bugReportingEditor.addEventListener(\"touchstart\", touchstartEventHandler);\n    bugReportingEditor.addEventListener(\"touchmove\", touchMoveEventHandler);\n    bugReportingEditor.addEventListener(\"touchend\", mouseUpEventHandler);\n  }\n}\n\nexport default BugBattle;\n","import BugBattle from './BugBattle';\nexport default BugBattle;"],"sourceRoot":""}